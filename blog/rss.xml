<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Apache Doris Blog</title>
        <link>https://doris.apache.org/blog</link>
        <description>Apache Doris Blog</description>
        <lastBuildDate>Mon, 28 Apr 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Apache Doris 3.0.5 Released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.5</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.5</guid>
            <pubDate>Mon, 28 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community members, the Apache Doris 3.0.5 version was officially released on April 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Semi-structured Data Management and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.5 Released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-04-28T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 28, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.5 version was officially released on April 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Semi-structured Data Management and more.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.5#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Added Catalog/Database/Table quantity monitoring metrics to FE Metrics (<a href="https://github.com/apache/doris/pull/47891" target="_blank" rel="noopener noreferrer">#47891</a>)</li>
<li>MaxCompute Catalog now supports Timestamp type (<a href="https://github.com/apache/doris/pull/48768" target="_blank" rel="noopener noreferrer">#48768</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.5#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Added URL processing functions: <code>top_level_domain</code>, <code>first_significant_subdomain</code>, <code>cut_to_first_significant_subdomain</code> (<a href="https://github.com/apache/doris/pull/42488" target="_blank" rel="noopener noreferrer">#42488</a>)</li>
<li>Added <code>year_of_week</code> function with Trino-compatible implementation (<a href="https://github.com/apache/doris/pull/48870" target="_blank" rel="noopener noreferrer">#48870</a>)</li>
<li><code>percentile_array</code> function now supports Float and Double data types (<a href="https://github.com/apache/doris/pull/48094" target="_blank" rel="noopener noreferrer">#48094</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-compute-separation">Storage-Compute Separation<a href="https://doris.apache.org/blog/release-note-3.0.5#storage-compute-separation" class="hash-link" aria-label="Direct link to Storage-Compute Separation" title="Direct link to Storage-Compute Separation">&#x200B;</a></h3>
<ul>
<li>Added compute group renaming support (<a href="https://github.com/apache/doris/pull/46221" target="_blank" rel="noopener noreferrer">#46221</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.5#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.5#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Accelerated Compaction task generation to improve performance (<a href="https://github.com/apache/doris/pull/49547" target="_blank" rel="noopener noreferrer">#49547</a>)</li>
<li>Stream Load now supports compressed JSON file ingestion (<a href="https://github.com/apache/doris/pull/49044" target="_blank" rel="noopener noreferrer">#49044</a>)</li>
<li>Enhanced error messages for various ingestion scenarios (<a href="https://github.com/apache/doris/pull/48436" target="_blank" rel="noopener noreferrer">#48436</a> <a href="https://github.com/apache/doris/pull/47721" target="_blank" rel="noopener noreferrer">#47721</a> <a href="https://github.com/apache/doris/pull/47804" target="_blank" rel="noopener noreferrer">#47804</a> <a href="https://github.com/apache/doris/pull/48638" target="_blank" rel="noopener noreferrer">#48638</a> <a href="https://github.com/apache/doris/pull/48344" target="_blank" rel="noopener noreferrer">#48344</a> <a href="https://github.com/apache/doris/pull/49287" target="_blank" rel="noopener noreferrer">#49287</a> <a href="https://github.com/apache/doris/pull/48009" target="_blank" rel="noopener noreferrer">#48009</a>)</li>
<li>Added multiple metrics for Routine Load (<a href="https://github.com/apache/doris/pull/49045" target="_blank" rel="noopener noreferrer">#49045</a> <a href="https://github.com/apache/doris/pull/48764" target="_blank" rel="noopener noreferrer">#48764</a>)</li>
<li>Optimized Routine Load scheduling algorithm to prevent single job failure from affecting overall scheduling (<a href="https://github.com/apache/doris/pull/47847" target="_blank" rel="noopener noreferrer">#47847</a>)</li>
<li>Added Routine Load system table (<a href="https://github.com/apache/doris/pull/49284" target="_blank" rel="noopener noreferrer">#49284</a>)</li>
<li>Improved query performance for Merge-On-Write (MOW) tables under high-frequency ingestion (<a href="https://github.com/apache/doris/pull/48968" target="_blank" rel="noopener noreferrer">#48968</a>)</li>
<li>Enhanced Profile information display for Key Range queries (<a href="https://github.com/apache/doris/pull/48191" target="_blank" rel="noopener noreferrer">#48191</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.5#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed multiple File Cache stability and performance issues (<a href="https://github.com/apache/doris/pull/48786" target="_blank" rel="noopener noreferrer">#48786</a> <a href="https://github.com/apache/doris/pull/48623" target="_blank" rel="noopener noreferrer">#48623</a> <a href="https://github.com/apache/doris/pull/48687" target="_blank" rel="noopener noreferrer">#48687</a> <a href="https://github.com/apache/doris/pull/49050" target="_blank" rel="noopener noreferrer">#49050</a> <a href="https://github.com/apache/doris/pull/48318" target="_blank" rel="noopener noreferrer">#48318</a>)</li>
<li>Improved validation logic for Storage Vault creation (<a href="https://github.com/apache/doris/pull/48073" target="_blank" rel="noopener noreferrer">#48073</a> <a href="https://github.com/apache/doris/pull/48369" target="_blank" rel="noopener noreferrer">#48369</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Optimized BE Scanner closure logic for Trino Connector Catalog to accelerate memory release (<a href="https://github.com/apache/doris/pull/47857" target="_blank" rel="noopener noreferrer">#47857</a>)</li>
<li>ClickHouse JDBC Catalog now auto-adapts to different driver versions (<a href="https://github.com/apache/doris/pull/46026" target="_blank" rel="noopener noreferrer">#46026</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.5#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Enhanced planning performance for transparent rewrite (<a href="https://github.com/apache/doris/pull/48782" target="_blank" rel="noopener noreferrer">#48782</a>)</li>
<li>Optimized <code>tvf mv_infos</code> performance (<a href="https://github.com/apache/doris/pull/47415" target="_blank" rel="noopener noreferrer">#47415</a>)</li>
<li>Disabled catalog metadata refresh during external table-based MV construction to reduce memory usage (<a href="https://github.com/apache/doris/pull/48767" target="_blank" rel="noopener noreferrer">#48767</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.5#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Improved statistics collection performance for key columns and partition columns (<a href="https://github.com/apache/doris/pull/46534" target="_blank" rel="noopener noreferrer">#46534</a>)</li>
<li>Query result aliases now strictly match user input (<a href="https://github.com/apache/doris/pull/47093" target="_blank" rel="noopener noreferrer">#47093</a>)</li>
<li>Enhanced column pruning after common subexpression extraction in aggregation operators (<a href="https://github.com/apache/doris/pull/46627" target="_blank" rel="noopener noreferrer">#46627</a>)</li>
<li>Improved error messages for function binding failures and unsupported subqueries (<a href="https://github.com/apache/doris/pull/47919" target="_blank" rel="noopener noreferrer">#47919</a> <a href="https://github.com/apache/doris/pull/47985" target="_blank" rel="noopener noreferrer">#47985</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.5#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li><code>json_object</code> function now supports complex type parameters (<a href="https://github.com/apache/doris/pull/47779" target="_blank" rel="noopener noreferrer">#47779</a>)</li>
<li>Added support for writing UInt128 to IPv6 type (<a href="https://github.com/apache/doris/pull/48802" target="_blank" rel="noopener noreferrer">#48802</a>)</li>
<li>Enabled inverted index support for ARRAY fields in VARIANT type (<a href="https://github.com/apache/doris/pull/47688" target="_blank" rel="noopener noreferrer">#47688</a> <a href="https://github.com/apache/doris/pull/48117" target="_blank" rel="noopener noreferrer">#48117</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="https://doris.apache.org/blog/release-note-3.0.5#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">&#x200B;</a></h3>
<ul>
<li>Improved Ranger authorization performance (<a href="https://github.com/apache/doris/pull/49352" target="_blank" rel="noopener noreferrer">#49352</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-3.0.5#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Optimized JVM Metrics interface performance (<a href="https://github.com/apache/doris/pull/49380" target="_blank" rel="noopener noreferrer">#49380</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.5#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.5#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed data correctness issues in several edge cases (<a href="https://github.com/apache/doris/pull/48056" target="_blank" rel="noopener noreferrer">#48056</a> <a href="https://github.com/apache/doris/pull/48399" target="_blank" rel="noopener noreferrer">#48399</a> <a href="https://github.com/apache/doris/pull/48400" target="_blank" rel="noopener noreferrer">#48400</a> <a href="https://github.com/apache/doris/pull/48748" target="_blank" rel="noopener noreferrer">#48748</a> <a href="https://github.com/apache/doris/pull/48775" target="_blank" rel="noopener noreferrer">#48775</a> <a href="https://github.com/apache/doris/pull/48867" target="_blank" rel="noopener noreferrer">#48867</a> <a href="https://github.com/apache/doris/pull/49165" target="_blank" rel="noopener noreferrer">#49165</a> <a href="https://github.com/apache/doris/pull/49193" target="_blank" rel="noopener noreferrer">#49193</a> <a href="https://github.com/apache/doris/pull/49350" target="_blank" rel="noopener noreferrer">#49350</a> <a href="https://github.com/apache/doris/pull/49710" target="_blank" rel="noopener noreferrer">#49710</a> <a href="https://github.com/apache/doris/pull/49825" target="_blank" rel="noopener noreferrer">#49825</a>)</li>
<li>Fixed untimely cleanup of completed transactions (<a href="https://github.com/apache/doris/pull/49564" target="_blank" rel="noopener noreferrer">#49564</a>)</li>
<li>Changed JSONB default value to <code>{}</code> for partial column updates (<a href="https://github.com/apache/doris/pull/49066" target="_blank" rel="noopener noreferrer">#49066</a>)</li>
<li>Fixed delete bitmap update lock release issue in Storage-Compute Separation model (<a href="https://github.com/apache/doris/pull/47766" target="_blank" rel="noopener noreferrer">#47766</a>)</li>
<li>Fixed data loss in Stream Load on ARM architecture (<a href="https://github.com/apache/doris/pull/49666" target="_blank" rel="noopener noreferrer">#49666</a>)</li>
<li>Fixed missing error URL return for data quality issues in Insert Into Select (<a href="https://github.com/apache/doris/pull/49687" target="_blank" rel="noopener noreferrer">#49687</a>)</li>
<li>Fixed error URL reporting for multi-table Routine Load data quality issues (<a href="https://github.com/apache/doris/pull/49130" target="_blank" rel="noopener noreferrer">#49130</a>)</li>
<li>Fixed incorrect results when using Insert Into Values during Schema Change (<a href="https://github.com/apache/doris/pull/49338" target="_blank" rel="noopener noreferrer">#49338</a>)</li>
<li>Fixed core dump caused by tablet commit info reporting (<a href="https://github.com/apache/doris/pull/48732" target="_blank" rel="noopener noreferrer">#48732</a>)</li>
<li>Added Azure China region support for S3 Load (<a href="https://github.com/apache/doris/pull/48642" target="_blank" rel="noopener noreferrer">#48642</a>)</li>
<li>Fixed &quot;get image failed&quot; error in K8s environment (<a href="https://github.com/apache/doris/pull/49072" target="_blank" rel="noopener noreferrer">#49072</a>)</li>
<li>Reduced CPU consumption in dynamic partition scheduling (<a href="https://github.com/apache/doris/pull/48577" target="_blank" rel="noopener noreferrer">#48577</a>)</li>
<li>Fixed column exception after materialized view renaming (<a href="https://github.com/apache/doris/pull/48328" target="_blank" rel="noopener noreferrer">#48328</a>)</li>
<li>Fixed memory and file cache leakage after failed Schema Change (<a href="https://github.com/apache/doris/pull/48426" target="_blank" rel="noopener noreferrer">#48426</a>)</li>
<li>Fixed base compaction failure for tables with empty partitions (<a href="https://github.com/apache/doris/pull/49062" target="_blank" rel="noopener noreferrer">#49062</a>)</li>
<li>Fixed data correctness issues in complex type modifications (<a href="https://github.com/apache/doris/pull/49452" target="_blank" rel="noopener noreferrer">#49452</a>)</li>
<li>Fixed core dump in cold compaction (<a href="https://github.com/apache/doris/pull/48329" target="_blank" rel="noopener noreferrer">#48329</a>)</li>
<li>Fixed cumulative point stagnation with delete operations (<a href="https://github.com/apache/doris/pull/47282" target="_blank" rel="noopener noreferrer">#47282</a>)</li>
<li>Fixed memory insufficiency in large-scale full compaction (<a href="https://github.com/apache/doris/pull/48958" target="_blank" rel="noopener noreferrer">#48958</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-1">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.5#compute-storage-decoupled-1" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed file cache cleanup failure in K8s environment (<a href="https://github.com/apache/doris/pull/49199" target="_blank" rel="noopener noreferrer">#49199</a>)</li>
<li>Fixed FE CPU spike caused by read-write locks during high-frequency ingestion (<a href="https://github.com/apache/doris/pull/48564" target="_blank" rel="noopener noreferrer">#48564</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.5#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<p><strong>Data Lakes</strong></p>
<ul>
<li>Fixed BE core dump during concurrent writes to Hive/Iceberg tables (<a href="https://github.com/apache/doris/pull/49842" target="_blank" rel="noopener noreferrer">#49842</a>)</li>
<li>Fixed write failures to Hive/Iceberg tables on AWS S3 (<a href="https://github.com/apache/doris/pull/47162" target="_blank" rel="noopener noreferrer">#47162</a>)</li>
<li>Fixed incorrect Iceberg Position Deletion reads (<a href="https://github.com/apache/doris/pull/47977" target="_blank" rel="noopener noreferrer">#47977</a>)</li>
<li>Added Tencent Cloud COS support for Iceberg table creation (<a href="https://github.com/apache/doris/pull/49885" target="_blank" rel="noopener noreferrer">#49885</a>)</li>
<li>Fixed Kerberos authentication for Paimon data on HDFS (<a href="https://github.com/apache/doris/pull/47192" target="_blank" rel="noopener noreferrer">#47192</a>)</li>
<li>Fixed memory leak in Hudi Jni Scanner (<a href="https://github.com/apache/doris/pull/48955" target="_blank" rel="noopener noreferrer">#48955</a>)</li>
<li>Fixed multi-partition list reading in MaxCompute Catalog (<a href="https://github.com/apache/doris/pull/48325" target="_blank" rel="noopener noreferrer">#48325</a>)</li>
</ul>
<p><strong>JDBC</strong></p>
<ul>
<li>Fixed NPE when fetching row count from JDBC Catalog (<a href="https://github.com/apache/doris/pull/49442" target="_blank" rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed OceanBase Oracle mode connection test (<a href="https://github.com/apache/doris/pull/49442" target="_blank" rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed column type length inconsistency in concurrent JDBC Catalog access (<a href="https://github.com/apache/doris/pull/48541" target="_blank" rel="noopener noreferrer">#48541</a>)</li>
<li>Fixed Classloader leak in JDBC Catalog BE (<a href="https://github.com/apache/doris/pull/46912" target="_blank" rel="noopener noreferrer">#46912</a>)</li>
<li>Fixed connection thread leak in PostgreSQL JDBC Catalog (<a href="https://github.com/apache/doris/pull/49568" target="_blank" rel="noopener noreferrer">#49568</a>)</li>
</ul>
<p><strong>Export</strong></p>
<ul>
<li>Fixed EXPORT job stuck in EXPORTING state (<a href="https://github.com/apache/doris/pull/47974" target="_blank" rel="noopener noreferrer">#47974</a>)</li>
<li>Disabled OUTFILE auto-retry to prevent duplicate files (<a href="https://github.com/apache/doris/pull/48095" target="_blank" rel="noopener noreferrer">#48095</a>)</li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li>Fixed NPE when executing TVF queries via FE WebUI (<a href="https://github.com/apache/doris/pull/49213" target="_blank" rel="noopener noreferrer">#49213</a>)</li>
<li>Fixed Hadoop Libhdfs thread local null pointer exception (<a href="https://github.com/apache/doris/pull/48280" target="_blank" rel="noopener noreferrer">#48280</a>)</li>
<li>Fixed &quot;Filesystem already closed&quot; error in FE Hadoop access (<a href="https://github.com/apache/doris/pull/48351" target="_blank" rel="noopener noreferrer">#48351</a>)</li>
<li>Fixed Catalog comment persistence issue (<a href="https://github.com/apache/doris/pull/46946" target="_blank" rel="noopener noreferrer">#46946</a>)</li>
<li>Fixed Parquet complex type reading errors (<a href="https://github.com/apache/doris/pull/47734" target="_blank" rel="noopener noreferrer">#47734</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.5#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed slow MV construction in extreme scenarios (<a href="https://github.com/apache/doris/pull/48074" target="_blank" rel="noopener noreferrer">#48074</a>)</li>
<li>Fixed nested MV transparent rewrite failure (<a href="https://github.com/apache/doris/pull/48222" target="_blank" rel="noopener noreferrer">#48222</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.5#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed constant folding calculation errors (<a href="https://github.com/apache/doris/pull/49225" target="_blank" rel="noopener noreferrer">#49225</a> <a href="https://github.com/apache/doris/pull/47966" target="_blank" rel="noopener noreferrer">#47966</a> <a href="https://github.com/apache/doris/pull/49416" target="_blank" rel="noopener noreferrer">#49416</a> <a href="https://github.com/apache/doris/pull/49087" target="_blank" rel="noopener noreferrer">#49087</a> <a href="https://github.com/apache/doris/pull/49033" target="_blank" rel="noopener noreferrer">#49033</a> <a href="https://github.com/apache/doris/pull/49061" target="_blank" rel="noopener noreferrer">#49061</a> <a href="https://github.com/apache/doris/pull/48895" target="_blank" rel="noopener noreferrer">#48895</a> <a href="https://github.com/apache/doris/pull/48957" target="_blank" rel="noopener noreferrer">#48957</a> <a href="https://github.com/apache/doris/pull/47288" target="_blank" rel="noopener noreferrer">#47288</a> <a href="https://github.com/apache/doris/pull/48641" target="_blank" rel="noopener noreferrer">#48641</a> <a href="https://github.com/apache/doris/pull/49413" target="_blank" rel="noopener noreferrer">#49413</a> <a href="https://github.com/apache/doris/pull/48783" target="_blank" rel="noopener noreferrer">#48783</a>)</li>
<li>Fixed unexpected errors with ORDER BY in nested window functions (<a href="https://github.com/apache/doris/pull/48492" target="_blank" rel="noopener noreferrer">#48492</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.5#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed pipeline task scheduling deadlocks/performance issues (<a href="https://github.com/apache/doris/pull/49976" target="_blank" rel="noopener noreferrer">#49976</a> <a href="https://github.com/apache/doris/pull/49007" target="_blank" rel="noopener noreferrer">#49007</a>)</li>
<li>Fixed memory corruption on FE connection failure (<a href="https://github.com/apache/doris/pull/48370" target="_blank" rel="noopener noreferrer">#48370</a> <a href="https://github.com/apache/doris/pull/48313" target="_blank" rel="noopener noreferrer">#48313</a>)</li>
<li>Fixed memory corruption with lambda and array functions (<a href="https://github.com/apache/doris/pull/49140" target="_blank" rel="noopener noreferrer">#49140</a>)</li>
<li>Fixed BE core caused by null string-to-JSONB conversion (<a href="https://github.com/apache/doris/pull/49810" target="_blank" rel="noopener noreferrer">#49810</a>)</li>
<li>Standardized undefined behaviors in <code>parse_url</code> (<a href="https://github.com/apache/doris/pull/49149" target="_blank" rel="noopener noreferrer">#49149</a>)</li>
<li>Fixed <code>array_overlap</code> null handling (<a href="https://github.com/apache/doris/pull/49403" target="_blank" rel="noopener noreferrer">#49403</a>)</li>
<li>Fixed case conversion errors for non-ASCII characters (<a href="https://github.com/apache/doris/pull/49763" target="_blank" rel="noopener noreferrer">#49763</a>)</li>
<li>Fixed BE core in <code>percentile</code> function (<a href="https://github.com/apache/doris/pull/48563" target="_blank" rel="noopener noreferrer">#48563</a>)</li>
<li>Fixed multiple memory corruption issues (<a href="https://github.com/apache/doris/pull/48288" target="_blank" rel="noopener noreferrer">#48288</a> <a href="https://github.com/apache/doris/pull/49737" target="_blank" rel="noopener noreferrer">#49737</a> <a href="https://github.com/apache/doris/pull/48018" target="_blank" rel="noopener noreferrer">#48018</a> <a href="https://github.com/apache/doris/pull/47964" target="_blank" rel="noopener noreferrer">#47964</a>)</li>
<li>Fixed incorrect SET operator results (<a href="https://github.com/apache/doris/pull/48001" target="_blank" rel="noopener noreferrer">#48001</a>)</li>
<li>Reduced default Arrow Flight thread pool size to prevent FD exhaustion (<a href="https://github.com/apache/doris/pull/48530" target="_blank" rel="noopener noreferrer">#48530</a>)</li>
<li>Fixed window function memory corruption (<a href="https://github.com/apache/doris/pull/48458" target="_blank" rel="noopener noreferrer">#48458</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.5#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li>Fixed chunked Stream Load JSON import (<a href="https://github.com/apache/doris/pull/48474" target="_blank" rel="noopener noreferrer">#48474</a>)</li>
<li>Enhanced JSONB format validation (<a href="https://github.com/apache/doris/pull/48731" target="_blank" rel="noopener noreferrer">#48731</a>)</li>
<li>Fixed crash with large STRUCT fields (<a href="https://github.com/apache/doris/pull/49552" target="_blank" rel="noopener noreferrer">#49552</a>)</li>
<li>Extended VARCHAR length support in complex types (<a href="https://github.com/apache/doris/pull/48025" target="_blank" rel="noopener noreferrer">#48025</a>)</li>
<li>Fixed <code>array_avg</code> crash with specific parameters (<a href="https://github.com/apache/doris/pull/48691" target="_blank" rel="noopener noreferrer">#48691</a>)</li>
<li>Fixed <code>ColumnObject::pop_back</code> crash in VARIANT type (<a href="https://github.com/apache/doris/pull/48935" target="_blank" rel="noopener noreferrer">#48935</a> <a href="https://github.com/apache/doris/pull/48978" target="_blank" rel="noopener noreferrer">#48978</a>)</li>
<li>Disabled index building on VARIANT type (<a href="https://github.com/apache/doris/pull/49844" target="_blank" rel="noopener noreferrer">#49844</a>)</li>
<li>Disabled inverted index v1 format for VARIANT type (<a href="https://github.com/apache/doris/pull/49890" target="_blank" rel="noopener noreferrer">#49890</a>)</li>
<li>Fixed multi-layer CAST errors in VARIANT type (<a href="https://github.com/apache/doris/pull/47954" target="_blank" rel="noopener noreferrer">#47954</a>)</li>
<li>Optimized inverted index metadata lookup for VARIANT with many subcolumns (<a href="https://github.com/apache/doris/pull/48153" target="_blank" rel="noopener noreferrer">#48153</a>)</li>
<li>Reduced VARIANT schema memory consumption in Storage-Compute Separation mode (<a href="https://github.com/apache/doris/pull/47629" target="_blank" rel="noopener noreferrer">#47629</a> <a href="https://github.com/apache/doris/pull/48463" target="_blank" rel="noopener noreferrer">#48463</a>)</li>
<li>Fixed PreparedStatement ID overflow (<a href="https://github.com/apache/doris/pull/48116" target="_blank" rel="noopener noreferrer">#48116</a>)</li>
<li>Fixed row storage with DELETE operations (<a href="https://github.com/apache/doris/pull/49609" target="_blank" rel="noopener noreferrer">#49609</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-3.0.5#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Fixed ARRAY type null bitmap handling (<a href="https://github.com/apache/doris/pull/48052" target="_blank" rel="noopener noreferrer">#48052</a>)</li>
<li>Fixed Date/Datetimev1 Bloomfilter comparison (<a href="https://github.com/apache/doris/pull/47005" target="_blank" rel="noopener noreferrer">#47005</a>)</li>
<li>Fixed UTF-8 4-byte character truncation (<a href="https://github.com/apache/doris/pull/48792" target="_blank" rel="noopener noreferrer">#48792</a>)</li>
<li>Fixed index loss after immediate column addition (<a href="https://github.com/apache/doris/pull/48547" target="_blank" rel="noopener noreferrer">#48547</a>)</li>
<li>Fixed empty data handling in ARRAY inverted index (<a href="https://github.com/apache/doris/pull/48264" target="_blank" rel="noopener noreferrer">#48264</a>)</li>
<li>Improved FE metadata upgrade compatibility (<a href="https://github.com/apache/doris/pull/49283" target="_blank" rel="noopener noreferrer">#49283</a>)</li>
<li>Fixed <code>match_phrase_prefix</code> cache error (<a href="https://github.com/apache/doris/pull/46517" target="_blank" rel="noopener noreferrer">#46517</a>)</li>
<li>Fixed file cache cleanup after compaction (<a href="https://github.com/apache/doris/pull/49738" target="_blank" rel="noopener noreferrer">#49738</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-1">Security<a href="https://doris.apache.org/blog/release-note-3.0.5#security-1" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">&#x200B;</a></h3>
<ul>
<li>Removed Select_Priv check for DELETE operations (<a href="https://github.com/apache/doris/pull/49239" target="_blank" rel="noopener noreferrer">#49239</a>)</li>
<li>Prevented non-root users from modifying root privileges (<a href="https://github.com/apache/doris/pull/48752" target="_blank" rel="noopener noreferrer">#48752</a>)</li>
<li>Fixed intermittent LDAP PartialResultException (<a href="https://github.com/apache/doris/pull/47858" target="_blank" rel="noopener noreferrer">#47858</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others-1">Others<a href="https://doris.apache.org/blog/release-note-3.0.5#others-1" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fixed JAVA_OPTS_FOR_JDK_17 recognition (<a href="https://github.com/apache/doris/pull/48170" target="_blank" rel="noopener noreferrer">#48170</a>)</li>
<li>Fixed BDB metadata write failure caused by InterruptException (<a href="https://github.com/apache/doris/pull/47874" target="_blank" rel="noopener noreferrer">#47874</a>)</li>
<li>Improved SQL hash generation for multi-statement requests (<a href="https://github.com/apache/doris/pull/48242" target="_blank" rel="noopener noreferrer">#48242</a>)</li>
<li>User attribute variables now override session variables (<a href="https://github.com/apache/doris/pull/48548" target="_blank" rel="noopener noreferrer">#48548</a>)</li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[How Tencent Music saved 80% in costs by migrating from Elasticsearch to Apache Doris]]></title>
            <link>https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris</link>
            <guid>https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris</guid>
            <pubDate>Thu, 17 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Handle full-text search, audience segmentation, and aggregation analysis directly within Apache Doris and slash their storage costs by 80% while boosting write performance by 4x]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practices</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">How Tencent Music saved 80% in costs by migrating from Elasticsearch to Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-04-17T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 17, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>As a long-time user of Apache Doris, Tencent Music Entertainment (NYSE: TME) has undergone four generations of data platform evolution, with the Doris community actively supporting its transformation. From <a href="https://doris.apache.org/blog/Tencent-Data-Engineers-Why-We-Went-from-ClickHouse-to-Apache-Doris" target="_blank" rel="noopener noreferrer">replacing ClickHouse as the analytical engine</a> to gradually offloading Elasticsearch&apos;s functionalities, TME has now taken a big step&#x2014;fully replacing Elasticsearch with Doris as its unified search engine. They can handle <strong>full-text search</strong>, <strong>audience segmentation</strong>, and <strong>aggregation analysis</strong> directly within Doris. By combining their self-developed SuperSonic with <strong>AI-powered</strong> <strong>natural language processing</strong>, they can perform data analytics through simple, conversational queries. The shift from Elasticsearch to Apache Doris has slashed their storage costs by 80% while boosting write performance by 4x. In this article, we dive into TME&apos;s journey, uncovering key insights that can serve as a blueprint for others navigating similar transitions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-they-do">What they do<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#what-they-do" class="hash-link" aria-label="Direct link to What they do" title="Direct link to What they do">&#x200B;</a></h2>
<p>The TME content library provides two types of functionality:</p>
<ul>
<li><strong>Search</strong>: Quickly locate artists, songs, and other textual data based on flexible query conditions.</li>
<li><strong>Tag-based segmentation</strong>: Filter data based on specific tags and criteria among billions of records and deliver sub-second query responses</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-hybrid-solution-elasticsearch--apache-doris">A hybrid solution: Elasticsearch + Apache Doris<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#a-hybrid-solution-elasticsearch--apache-doris" class="hash-link" aria-label="Direct link to A hybrid solution: Elasticsearch + Apache Doris" title="Direct link to A hybrid solution: Elasticsearch + Apache Doris">&#x200B;</a></h2>
<p>TME previously used both Elasticsearch and Apache Doris in its content library platform to leverage the strengths from both:</p>
<ul>
<li><strong>Elasticsearch</strong> excelled in full-text search. It can quickly match specific keywords or phrases using inverted indexing while supporting indexing of all fields and flexible filtering conditions. However, it struggled with data aggregation, lacked support for complex queries like JOINs, and had high storage overhead.</li>
<li><strong>Apache Doris</strong> offered efficient OLAP capabilities for complex analytical queries while optimizing storage through high compression rates, but before the release of Apache Doris 2.0, it had limited search capabilities due to the absence of inverted index.</li>
</ul>
<p>That&apos;s why TME built a hybrid architecture. In this setup, Elasticsearch handled full-text search and tag-based segmentation, while Apache Doris powered OLAP analytics. With Doris&apos; <a href="https://doris.apache.org/docs/lakehouse/database/es" target="_blank" rel="noopener noreferrer">Elasticsearch catalog</a>, data in Elasticsearch can be queried directly through Doris, creating a unified query interface for seamless data retrieval.</p>
<p><img decoding="async" loading="lazy" alt="A hybrid solution: Elasticsearch + Apache Doris" src="https://doris.apache.org/assets/images/a-hybrid-solution-Elasticsearch-and-Apache-Doris-4f791f51b90b53347d067f6bdcc5ea42.png" width="1280" height="653" class="img_ev3q"></p>
<p>Despite the advantages of the hybrid architecture, TME encountered several challenges during its implementation:</p>
<ul>
<li><strong>High storage costs</strong>: Elasticsearch continued to consume huge storage space.</li>
<li><strong>Write performance bottlenecks</strong>: As data volumes grew, the write pressure on the Elasticsearch cluster intensified. Full data writes were taking over 10 hours, nearing the business&apos;s operational limits.</li>
<li><strong>Architectural complexity</strong>: The multi-component architecture meant complex maintenance, extra costs due to redundant data storage, and higher risk of data inconsistency.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-unified-solution-based-on-apache-doris">A unified solution based on Apache Doris<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#a-unified-solution-based-on-apache-doris" class="hash-link" aria-label="Direct link to A unified solution based on Apache Doris" title="Direct link to A unified solution based on Apache Doris">&#x200B;</a></h2>
<p>In <a href="https://doris.apache.org/blog/release-note-2.0.0" target="_blank" rel="noopener noreferrer">version 2.0</a>, Apache Doris introduced inverted index and started to support full-text search. This release drove TME to consider entrusting Doris with the full scope of full-text search, tag-based segmentation, and aggregation analysis tasks.</p>
<p>What enables Doris to fully replace Elasticsearch?</p>
<ul>
<li>In terms of <strong>full-text search</strong>, Doris accelerates standard equality and range queries (<code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>) and supports comprehensive text field searches, including tokenization for English, Chinese and Unicode, multi-keyword searches (<code>MATCH_ANY</code>, <code>MATCH_ALL</code>), phrase searches (<code>MATCH_PHRASE</code>, <code>MATCH_PHRASE_PREFIX</code>, <code>MATCH_PHRASE_REGEXP</code>), slop in phrase, and multi-field searches (<code>MULTI_MATCH</code>). It improves performance by orders of magnitude compared to traditional databases using <code>LIKE</code>-based fuzzy matching.</li>
<li>As for <strong>inverted index</strong>, Doris implements it directly within the database kernel. Inverted indexing in Doris is seamlessly integrated with SQL syntax and supports any logical combinations for <code>AND</code>, <code>OR</code>, and <code>NOT</code> operations, so it allows for complex filtering and search queries. This is an example query involving five filtering conditions: full-text (<code>title MATCH &apos;love&apos; OR description MATCH_PHRASE &apos;true love&apos;</code>), date range filtering (<code>dt BETWEEN &apos;2024-09-10 00:00:00&apos; AND &apos;2024-09-10 23:59:59&apos;</code>), numeric range filtering (<code>rating &gt; 4</code>), and equality check on strings (<code>country = &apos;Canada&apos;</code>). These conditions are combined into a single SQL query, after which results are grouped by <code>actor</code> and sorted by the highest count.</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> cnt </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> dt </span><span class="token operator">BETWEEN</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-09-10 00:00:00&apos;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-09-10 23:59:59&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">title </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">MATCH</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;love&apos;</span><span class="token plain"> </span><span class="token operator">OR</span><span class="token plain"> description MATCH_PHRASE </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;true love&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> rating </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">AND</span><span class="token plain"> country </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Canada&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> actor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> cnt </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DESC</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">LIMIT</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>This is the data platform after TME transitioned from a hybrid Elasticsearch + Doris architecture to a unified Doris solution.</p>
<p><img decoding="async" loading="lazy" alt="A unified solution based on Apache Doris" src="https://doris.apache.org/assets/images/a-unified-solution-based-on-Apache-Doris-f85938ee550bcb327fe58f23a1b49c7c.png" width="1280" height="695" class="img_ev3q"></p>
<p>With this upgrade, users can now experience:</p>
<ul>
<li><strong>A big cost reduction</strong>: Doris now handles both search and analytical workloads, leading to an <strong>80%</strong> reduction in operational costs. For example, a single business&apos; daily full data previously required 697.7 GB in Elasticsearch but now only takes 195.4 GB in Doris.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="A big cost reduction" src="https://doris.apache.org/assets/images/A-big-cost-reduction-74dd64360e6aef6ae731fe336b17cc08.png" width="1239" height="1126" class="img_ev3q"></p>
<ul>
<li><strong>Improved performance</strong>: Data ingestion time was cut down from over 10 hours to under 3 hours, making Doris&apos; write performance <strong>4x faster than Elasticsearch</strong>. Additionally, Doris supports complex custom tag-based queries, enabling previously impractical analytics and significantly enhancing user experience.</li>
<li><strong>Simplified architecture</strong>: With a unified Doris-based architecture, TME now maintains a single technology stack and eliminates data inconsistency issues</li>
</ul>
<p>The transition to a Doris-only architecture required several key design optimizations. In the following sections, we&apos;ll dive deeper into the technical strategies and lessons learned from this migration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-game-changer-inverted-index">The game changer: Inverted Index<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#the-game-changer-inverted-index" class="hash-link" aria-label="Direct link to The game changer: Inverted Index" title="Direct link to The game changer: Inverted Index">&#x200B;</a></h3>
<p>To optimize storage, TME adopts a dimension table + fact table model to efficiently handle search and analytics workloads:</p>
<ul>
<li><strong>Dimension table</strong>: Built using the <a href="https://doris.apache.org/docs/3.0/table-design/data-model/unique" target="_blank" rel="noopener noreferrer">Primary Key model</a>, dimension tables are can be easily updated via the partial column update feature of Doris. These tables are meant for both searching and tag-based segmentation.</li>
<li><strong>Fact table</strong>: Designed with the <a href="https://doris.apache.org/docs/3.0/table-design/data-model/aggregate" target="_blank" rel="noopener noreferrer">Aggregate model</a>, this table stores daily metric data. Given the high data volume and the independence of daily datasets, a new <a href="https://doris.apache.org/docs/3.0/table-design/data-partitioning/data-distribution#partitioning-strategy" target="_blank" rel="noopener noreferrer">partition</a> is created every day to enhance query performance and manageability.</li>
</ul>
<p>To ensure a seamless transition from Elasticsearch to Apache Doris, TME designs the table schemas and indexes based on Doris&apos; inverted index <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index" target="_blank" rel="noopener noreferrer">docs</a>. The mapping follows these key principles:</p>
<ul>
<li>Elasticsearch&apos;s <code>Keyword</code> type maps to Doris&apos; <code>Varchar</code>/<code>String</code> type with non-tokenized inverted indexing (<code>USING INVERTED</code>).</li>
<li>Elasticsearch&apos;s <code>Text</code> type maps to Doris&apos; <code>Varchar</code>/<code>String</code> type with tokenized inverted indexing (<code>USING INVERTED PROPERTIES(&quot;parser&quot; = &quot;english/unicode&quot;)</code>).</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">tag_baike_zipper_track_dim_string</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;id&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a4</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">65000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;song_name&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a43</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">65000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;zyqk_singer_id&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_a4 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a4</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">USING</span><span class="token plain"> INVERTED PROPERTIES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;parser&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unicode&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;support_phrase&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_a43 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">a43</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">USING</span><span class="token plain"> INVERTED PROPERTIES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;parser&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;english&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">OLAP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;OLAP&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dayno</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p99991230 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;9999-12-30&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;9999-12-31&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS auto</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p><strong>Before enabling inverted index in Doris:</strong></p>
<p>Take the following complex query as an example: Without inverted indexing, it was slow and took minutes to return results.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- like (Low performance):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain">  </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_track_pro_3  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dayno</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-08-01&apos;</span><span class="token plain"> </span><span class="token operator">AND</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> concat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;%#I&apos;</span><span class="token plain">m so busy dancing</span><span class="token comment" style="color:rgb(98, 114, 164)">#%&apos; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">or</span><span class="token plain"> concat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a43</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;%#1000#%&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- explode (Low performance and often triggers ERROR 1105 (HY000)):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> tab1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a4_single</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">a43_single </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_track_pro_3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> dayno</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-08-01&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tab1 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> a4_single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a43</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;#&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> a43_single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tab2 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> a4_single</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;I&apos;</span><span class="token plain">m so busy dancing</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; or a43_single=&apos;</span><span class="token number">1000</span><span class="token plain">&apos;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p><strong>After enabling inverted index in Doris:</strong></p>
<p>The query response times reduces <strong>from minutes to just seconds</strong>. A tip is to set <code>store_row_column</code> to enable row-based storage. This optimizes <code>select*</code> queries that reads all columns from a table.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- Retrieve the corresponding ID from the dimension table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain">  id </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_baike_zipper_track_dim_string  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> a4 MATCH_PHRASE </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;I&apos;</span><span class="token plain">m so busy dancing</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; OR a43 MATCH_ALL &apos;</span><span class="token number">1000</span><span class="token string" style="color:rgb(255, 121, 198)">&apos; )  AND  dayno =&apos;</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain">&apos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Fetch the detailed data from the fact table based on the ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> db_tag_pro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tag_baike_track_pro  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain">  id </span><span class="token operator">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">563559286</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>Moreover, Apache Doris overcomes a key limitation found in Elasticsearch&#x2014;<strong>handling overly long SQL queries that previously failed due to length constraints</strong>. Doris supports longer and more complex queries with ease. Additionally, using Doris as the unified engine means that users can leverage materialized views and BITMAP data type to further optimize intermediate query results. This eliminates the need for cross-engine synchronization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-service-resource-isolation">Multi-service resource isolation<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#multi-service-resource-isolation" class="hash-link" aria-label="Direct link to Multi-service resource isolation" title="Direct link to Multi-service resource isolation">&#x200B;</a></h3>
<p>To ensure a cost-effective and seamless user experience, TME leverages Doris&apos; resource isolation mechanism for efficient workload management across different business scenarios.</p>
<ul>
<li><strong>Layer 1: Physical isolation (Resource Group)</strong> They divide the cluster into two Resource Groups to serve difference workloads: Core and Normal. The Core group is dedicated to mission-critical tasks such as content search and tag-based segmentation, while the Normal group handles general-purpose queries. This node-level physical isolation ensures that high-priority operations remain unaffected by other workloads.</li>
<li><strong>Layer 2: Logical isolation (Workload Group)</strong> Within each physically isolated Resource Group, resources are further divided into Workload Groups. For example, TME creates multiple Workload Groups within the Normal resource group, and assign a default Workload Group to each user. In this way, they prevent any single user from monopolizing cluster resources.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Multi-service resource isolation" src="https://doris.apache.org/assets/images/Multi-service-resource-isolation-68396dfd1f3cc91a8b806c4323878ffb.png" width="1280" height="736" class="img_ev3q"></p>
<p>These resource isolation mechanisms improve system stability. <strong>In TME&apos;s case, the frequency of alerts has reduced from over 20 times per day to single digits per month</strong>. The team can now focus more on system optimization and performance improvements rather than constant firefighting.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-seamless-migration">A seamless migration<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#a-seamless-migration" class="hash-link" aria-label="Direct link to A seamless migration" title="Direct link to A seamless migration">&#x200B;</a></h2>
<p>TME implements the migration via their self-developed <a href="https://github.com/tencentmusic/supersonic" target="_blank" rel="noopener noreferrer">SuperSonic</a> project, which has a built-in Headless BI feature to simplify the process. All they need is to convert the queries written in Elasticsearch&apos;s Domain Specific Language (DSL) into SQL statements, and switch the data sources for pre-defined metrics and tags.</p>
<p>The idea of Headless BI is to decouple data modeling, management, and consumption. With it, business analysts can define metrics and tags directly on the Headless BI platform without worrying about the underlying data sources. Because Headless BI abstracts away differences between various data storage and analytics engines, users can experience a transparent, frictionless migration without disruptions.</p>
<p><img decoding="async" loading="lazy" alt="A seamless migration" src="https://doris.apache.org/assets/images/A-seamless-migration-eb346dbeb462247193fe25f764b7bad5.png" width="1280" height="739" class="img_ev3q"></p>
<p>The Headless BI enables seamless data source migration and largely simplifies data management and querying. SuperSonic takes this a step further by integrating Chat BI capabilities with Headless BI, so users can perform unified data governance and data analysis using natural language. Originally developed and battle-tested in-house by TME, the SuperSonic platform is now open source: <a href="https://github.com/tencentmusic/supersonic" target="_blank" rel="noopener noreferrer">https://github.com/tencentmusic/supersonic</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&apos;s next<a href="https://doris.apache.org/blog/tencent-music-migrate-elasticsearch-to-doris#whats-next" class="hash-link" aria-label="Direct link to What&apos;s next" title="Direct link to What&apos;s next">&#x200B;</a></h2>
<p>The migration from Elasticsearch to Apache Doris has yielded impressive gains. Write performance has improved 4x and storage usage has dropped by 72%, while the overall operational costs have been cut by up to 80%.</p>
<p>By replacing its Elasticsearch cluster with Doris, TME has unified its content library&apos;s search and analytics engines into a single, streamlined platform. The system now supports complex custom tag-based segmentation with sub-second response. The next-phase plan of TME is to explore broader use cases of Apache Doris and prepare to adopt the <a href="https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview" target="_blank" rel="noopener noreferrer">compute-storage decoupled mode</a> to drive even greater cost efficiency.</p>
<p>For direct communication, real-world insights, and best practices, join <a href="https://apachedoriscommunity.slack.com/archives/C08CQKX20R5" target="_blank" rel="noopener noreferrer">#elasticsearch-to-doris</a> channel in the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2gmq5o30h-455W226d79zP3L96ZhXIoQ" target="_blank" rel="noopener noreferrer">Apache Doris community</a>.</p></div>]]></content:encoded>
            <category>Best Practices</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.9 released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.9</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.9</guid>
            <pubDate>Thu, 03 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[This version features improved SQL hash calculation, enhanced query result accuracy, and new metrics for better storage management. It also resolves critical bugs across multiple areas, enhancing the data management experience.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.9 released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-04-03T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">April 3, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear Community, <strong>Apache Doris version 2.1.9 is now available</strong>, featuring improved SQLHash calculation, enhanced query results accuracy, and new metrics for better storage management. This update also resolves critical bugs across multiple areas for a more robust data management experience.</p>
<ul>
<li>
<p><a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href="https://github.com/apache/doris/releases/tag/2.1.9-rc02" target="_blank" rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-2.1.9#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li>The SQLHash in Audit Log is now accurately calculated per SQL query, resolving the issue of identical hashes in a single request. <a href="https://github.com/apache/doris/pull/48242" target="_blank" rel="noopener noreferrer">#48242</a></li>
<li>Query results match ColumnLabelName exactly. <a href="https://github.com/apache/doris/pull/47093" target="_blank" rel="noopener noreferrer">#47093</a></li>
<li>User property variables now take precedence over session variables. <a href="https://github.com/apache/doris/pull/47185" target="_blank" rel="noopener noreferrer">#47185</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-2.1.9#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Disallow renaming partition columns. <a href="https://github.com/apache/doris/pull/47596" target="_blank" rel="noopener noreferrer">#47596</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.9#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Added FE monitoring metrics for Catalogs, Databases, and Tables counts. <a href="https://github.com/apache/doris/pull/47891" target="_blank" rel="noopener noreferrer">#47891</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.9#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-2.1.9#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Support for ARRAY type in VARIANT inverted indexes. <a href="https://github.com/apache/doris/pull/47688" target="_blank" rel="noopener noreferrer">#47688</a></li>
<li>Profile now shows performance metrics for each filter condition. <a href="https://github.com/apache/doris/pull/47504" target="_blank" rel="noopener noreferrer">#47504</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.9#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Support for using <code>SELECT *</code> in aggregate queries with only aggregation key columns. <a href="https://github.com/apache/doris/pull/48006" target="_blank" rel="noopener noreferrer">#48006</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Enhanced CCR for binlog recycling and small file transfer efficiency, and robustness in chaotic environments. <a href="https://github.com/apache/doris/pull/47547" target="_blank" rel="noopener noreferrer">#47547</a> <a href="https://github.com/apache/doris/pull/47313" target="_blank" rel="noopener noreferrer">#47313</a> <a href="https://github.com/apache/doris/pull/45061" target="_blank" rel="noopener noreferrer">#45061</a></li>
<li>Enhanced import error messages to be more specific. <a href="https://github.com/apache/doris/pull/47918" target="_blank" rel="noopener noreferrer">#47918</a> <a href="https://github.com/apache/doris/pull/47470" target="_blank" rel="noopener noreferrer">#47470</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-2.1.9#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.9#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Fixed BE krb5.conf path configuration issue. <a href="https://github.com/apache/doris/pull/47679" target="_blank" rel="noopener noreferrer">#47679</a></li>
<li>Prevented <code>SELECT OUTFILE</code> statement retries to avoid duplicate data export. <a href="https://github.com/apache/doris/pull/48095" target="_blank" rel="noopener noreferrer">#48095</a></li>
<li>Fixed JAVA API access to Paimon tables. <a href="https://github.com/apache/doris/pull/47192" target="_blank" rel="noopener noreferrer">#47192</a></li>
<li>Resolved writing to Hive tables with <code>s3a://</code> storage location. <a href="https://github.com/apache/doris/pull/47162" target="_blank" rel="noopener noreferrer">#47162</a></li>
<li>Fixed the issue of Catalog&apos;s Comment field not being persisted. <a href="https://github.com/apache/doris/pull/46946" target="_blank" rel="noopener noreferrer">#46946</a></li>
<li>Addressed JDBC BE class loading leaks under certain conditions. <a href="https://github.com/apache/doris/pull/46912" target="_blank" rel="noopener noreferrer">#46912</a></li>
<li>Resolved high version ClickHouse JDBC Driver compatibility with JDBC Catalog. <a href="https://github.com/apache/doris/pull/46026" target="_blank" rel="noopener noreferrer">#46026</a></li>
<li>Fixed BE crash when reading Iceberg Position Delete. <a href="https://github.com/apache/doris/pull/47977" target="_blank" rel="noopener noreferrer">#47977</a></li>
<li>Corrected reading MaxCompute table data under multi-partition columns. <a href="https://github.com/apache/doris/pull/48325" target="_blank" rel="noopener noreferrer">#48325</a></li>
<li>Fixed reading Parquet complex column types errors. <a href="https://github.com/apache/doris/pull/47734" target="_blank" rel="noopener noreferrer">#47734</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index-1">Inverted Index<a href="https://doris.apache.org/blog/release-note-2.1.9#inverted-index-1" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Fixed ARRAY type inverted index null value handling. <a href="https://github.com/apache/doris/pull/48231" target="_blank" rel="noopener noreferrer">#48231</a></li>
<li>Resolved <code>BUILD INDEX</code> exception for newly added columns. <a href="https://github.com/apache/doris/pull/48389" target="_blank" rel="noopener noreferrer">#48389</a></li>
<li>Corrected UTF8 encoding index truncation issues leading to errors. <a href="https://github.com/apache/doris/pull/48657" target="_blank" rel="noopener noreferrer">#48657</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-types">Semi-structured Data Types<a href="https://doris.apache.org/blog/release-note-2.1.9#semi-structured-data-types" class="hash-link" aria-label="Direct link to Semi-structured Data Types" title="Direct link to Semi-structured Data Types">&#x200B;</a></h3>
<ul>
<li>Fixed <code>array_agg</code> function crashes under special conditions. <a href="https://github.com/apache/doris/pull/46927" target="_blank" rel="noopener noreferrer">#46927</a></li>
<li>Resolved JSON import crashes due to incorrect chunk parameters. <a href="https://github.com/apache/doris/pull/48196" target="_blank" rel="noopener noreferrer">#48196</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.9#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed constant folding issues with nested time functions like <code>current_date</code>. <a href="https://github.com/apache/doris/pull/47288" target="_blank" rel="noopener noreferrer">#47288</a></li>
<li>Addressed non-deterministic function result errors. <a href="https://github.com/apache/doris/pull/48321" target="_blank" rel="noopener noreferrer">#48321</a></li>
<li>Resolved <code>CREATE TABLE LIKE</code> execution issues with on update column properties. <a href="https://github.com/apache/doris/pull/48007" target="_blank" rel="noopener noreferrer">#48007</a></li>
<li>Fixed unexpected planning errors for materialized views of aggregate model tables. <a href="https://github.com/apache/doris/pull/47658" target="_blank" rel="noopener noreferrer">#47658</a></li>
<li>Resolved <code>PreparedStatement</code> exceptions due to internal ID overflow. <a href="https://github.com/apache/doris/pull/47950" target="_blank" rel="noopener noreferrer">#47950</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.9#query-execution-engine" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Resolved query hang or null pointer issues when querying system tables. <a href="https://github.com/apache/doris/pull/48370" target="_blank" rel="noopener noreferrer">#48370</a></li>
<li>Added DOUBLE type support for LEAD/LAG functions. <a href="https://github.com/apache/doris/pull/47940" target="_blank" rel="noopener noreferrer">#47940</a></li>
<li>Fixed query errors when <code>case when</code> conditions exceed 256. <a href="https://github.com/apache/doris/pull/47179" target="_blank" rel="noopener noreferrer">#47179</a></li>
<li>Corrected <code>str_to_date</code> function errors with spaces. <a href="https://github.com/apache/doris/pull/48920" target="_blank" rel="noopener noreferrer">#48920</a></li>
<li>Fixed <code>split_part</code> function errors during constant folding with <code>||</code>. <a href="https://github.com/apache/doris/pull/48910" target="_blank" rel="noopener noreferrer">#48910</a></li>
<li>Corrected <code>log</code> function result errors. <a href="https://github.com/apache/doris/pull/47228" target="_blank" rel="noopener noreferrer">#47228</a></li>
<li>Resolved core dump issues with <code>array</code> / <code>map</code> functions in lambda expressions. <a href="https://github.com/apache/doris/pull/49140" target="_blank" rel="noopener noreferrer">#49140</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-2">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.9#storage-management-2" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Fixed memory corruption issues during import of aggregate tables. <a href="https://github.com/apache/doris/pull/47523" target="_blank" rel="noopener noreferrer">#47523</a></li>
<li>Resolved occasional core dump during MoW import under memory pressure. <a href="https://github.com/apache/doris/pull/47715" target="_blank" rel="noopener noreferrer">#47715</a></li>
<li>Fixed potential duplicate key issues with MoW during BE restart and schema change. <a href="https://github.com/apache/doris/pull/48056" target="_blank" rel="noopener noreferrer">#48056</a> <a href="https://github.com/apache/doris/pull/48775" target="_blank" rel="noopener noreferrer">#48775</a></li>
<li>Corrected group commit and global column update issues with memtable promotion. <a href="https://github.com/apache/doris/pull/48120" target="_blank" rel="noopener noreferrer">#48120</a> <a href="https://github.com/apache/doris/pull/47968" target="_blank" rel="noopener noreferrer">#47968</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permission-management">Permission Management<a href="https://doris.apache.org/blog/release-note-2.1.9#permission-management" class="hash-link" aria-label="Direct link to Permission Management" title="Direct link to Permission Management">&#x200B;</a></h3>
<ul>
<li>No longer throws PartialResultException when using LDAP. <a href="https://github.com/apache/doris/pull/47858" target="_blank" rel="noopener noreferrer">#47858</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Why Apache Doris is a Better Alternative to Elasticsearch for Real-Time Analytics]]></title>
            <link>https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics</link>
            <guid>https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics</guid>
            <pubDate>Tue, 25 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris is a real-time data warehouse commonly used for observability, cyber security analysis, online reports, customer profiles, data lakehouse and more. Elasticsearch is more like a search engine, but it is also widely used for data analytics, so there's an overlap in their use cases. The comparison in this post will focus on the real-time analytics capabilities of Apache Doris and Elasticsearch from a user-oriented perspective]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Why Apache Doris is a Better Alternative to Elasticsearch for Real-Time Analytics</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Kang, Apache Doris PMC Member</span></span><time datetime="2025-03-25T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">March 25, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>The author previously presented this topic at the VeloDB Webinar. This article expands on that presentation by providing more detailed comparative information, including test data and in-depth technical explanations: <a href="https://www.youtube.com/embed/qnxX-FOd8Wc?si=TcEF_w-XhqgQyP4A" target="_blank" rel="noopener noreferrer">https://www.youtube.com/embed/qnxX-FOd8Wc?si=TcEF_w-XhqgQyP4A</a></p>
<p>In the past year, there&apos;s an increasing number of users looking to use Apache Doris as an alternative to Elasticsearch, so I&apos;d like to provide an in-depth comparison of the two to serve as a reference for users.</p>
<p><a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Apache Doris</a> is a real-time data warehouse commonly used for observability, cyber security analysis, online reports, customer profiles, data lakehouse and more. <a href="https://www.elastic.co/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch</a> is more like a search engine, but it is also widely used for data analytics, so there&apos;s an overlap in their use cases. The comparison in this post will focus on the real-time analytics capabilities of Apache Doris and Elasticsearch from a user-oriented perspective:</p>
<ol>
<li><strong>Open source</strong></li>
<li><strong>System architecture</strong></li>
<li><strong>Real-time writes</strong></li>
<li><strong>Real-time storage</strong></li>
<li><strong>Real-time queries</strong></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-source">Open source<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#open-source" class="hash-link" aria-label="Direct link to Open source" title="Direct link to Open source">&#x200B;</a></h2>
<p>The license decides the level of openness of an open source product, and further decides whether users will be trapped in a vendor lock-in situation.</p>
<p><strong>Apache Doris</strong> is operated under the Apache Software Foundation and it is governed by <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. This is a highly liberal open source license. Anyone can freely use, modify, and distribute Apache Doris in open source or commercial projects.</p>
<p><strong>Elasticsearch</strong> has undergone several changes in licenses. It was subject to Apache License 2.0 at the very beginning. Then in <a href="https://www.elastic.co/blog/licensing-change" target="_blank" rel="noopener noreferrer">2021</a>, it switched to the <a href="https://www.elastic.co/licensing/elastic-license" target="_blank" rel="noopener noreferrer">Elastic License</a> and <a href="https://www.mongodb.com/licensing/server-side-public-license" target="_blank" rel="noopener noreferrer">SSPL</a>, mostly because some cloud service providers were providing Elasticsearch as a managed service. The Elastic company tried to protect its business interests and moved to the Elastic License in order to restrict certain commercial use. And then in 2024, Elasticsearch announced that <a href="https://www.elastic.co/blog/elasticsearch-is-open-source-again" target="_blank" rel="noopener noreferrer">&quot;Elasticsearch Is Open Source. Again!&quot;</a> by adding the AGPL License. This license has less restrictions on cloud providers.</p>
<p>The difference in licenses reflects the differing ways in which the two open-source projects are managed and operated. Apache Doris is operated under the Apache Software Foundation and adheres to &quot;the Apache Way&quot; and maintains vendor neutrality. It will always be under Apache License and maintain a high level of openness. Elasticsearch is owned and run by the Elastic company, so it is free to change its license based on the changing needs of the company.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture">System architecture<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#system-architecture" class="hash-link" aria-label="Direct link to System architecture" title="Direct link to System architecture">&#x200B;</a></h2>
<p>The system architecture of Apache Doris and Elasticsearch is relevant to how users can deploy them and the software/hardware prerequisites that must be met.</p>
<p><strong>Apache Doris</strong> supports various deployment models, especially after the <a href="https://doris.apache.org/blog/release-note-3.0.0" target="_blank" rel="noopener noreferrer">release of verion 3.0</a>. It can be deployed on-premise the traditional way, which means compute and storage are integrated within the same hardware. It can also be deployed with <a href="https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview" target="_blank" rel="noopener noreferrer">compute and storage decoupled</a>, providing higher flexibility and elasticity.</p>
<p><img decoding="async" loading="lazy" alt="System architecture.jpeg" src="https://doris.apache.org/assets/images/System-architecture-00b81da315da4b5ca4041d6377cbe866.jpeg" width="1280" height="415" class="img_ev3q"></p>
<p>Apache Doris enables the isolation of computing workloads, which makes it well-suited for multi-tenancy. In addition to decoupling compute and storage, it also provides tiered storage so you can choose different storage medium for your hot and cold data.</p>
<p>For workload isolation, Apache Doris provides the <a href="https://doris.apache.org/docs/3.0/admin-manual/workload-management/compute-group" target="_blank" rel="noopener noreferrer">Compute Group</a> and <a href="https://doris.apache.org/docs/3.0/admin-manual/workload-management/workload-group" target="_blank" rel="noopener noreferrer">Workload Group</a> mechanism.</p>
<p><img decoding="async" loading="lazy" alt="System architecture-2.png" src="https://doris.apache.org/assets/images/System-architecture-2-468364f6130920aa606189ac151ccf47.png" width="1120" height="552" class="img_ev3q"></p>
<p>Compute Group is a mechanism for physical isolation between different workloads in a compute-storage decoupled architecture. One or more BE nodes can form a Compute Group.</p>
<p><img decoding="async" loading="lazy" alt="System architecture-3.png" src="https://doris.apache.org/assets/images/System-architecture-3-2c6a79b4e7b8b2e3b939e951efd25bbc.png" width="1280" height="438" class="img_ev3q"></p>
<p>Workload Group is an in-process mechanism for isolating workloads. It achieves resource isolation by finely partitioning or limiting resources (CPU, IO, Memory) within the BE process, which is implemented by Linux CGroup and offers strict hard isolation.</p>
<p><strong>Elasticsearch</strong> supports on-premise and cloud deployment. It does not support compute-storage decoupling. Elasticsearch implements workload isolation by Thread Groups, which provides limited soft resource isolation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-writes">Real-time writes<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#real-time-writes" class="hash-link" aria-label="Direct link to Real-time writes" title="Direct link to Real-time writes">&#x200B;</a></h2>
<p>The next step after deploying the system is to write data into it. Apache Doris and Elasticsearch are very different in data ingestion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-capabilities">Write capabilities<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#write-capabilities" class="hash-link" aria-label="Direct link to Write capabilities" title="Direct link to Write capabilities">&#x200B;</a></h3>
<p>Normally there are two ways to write real-time data into a data system. One is push-based, and the other is pull-based. A push-based method means users actively push the data into the database system, such as via HTTP. A pull-based method, for example, is where database system pulls data from data source such as Kafka message queue.</p>
<p><strong>Elasticsearch</strong> supports push-based ingestion, but it requires Logstash to perform pull-based data ingestion, making it less convenient.</p>
<p>As for <strong>Apache Doris</strong>, it supports both push-based method (HTTP <a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/stream-load-manual" target="_blank" rel="noopener noreferrer">Stream Load</a>) and pull-based method (<a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/routine-load-manual" target="_blank" rel="noopener noreferrer">Routine Load</a> from Kafka, <a href="https://doris.apache.org/docs/3.0/data-operate/import/import-way/broker-load-manual" target="_blank" rel="noopener noreferrer">Broker Load</a> from object storage and HDFS). In addition, output plugins for <a href="https://doris.apache.org/docs/ecosystem/logstash" target="_blank" rel="noopener noreferrer">Logstash</a> and <a href="https://doris.apache.org/docs/ecosystem/beats" target="_blank" rel="noopener noreferrer">Beats</a> are available to enable seamless data ingestion from Logstash or Beats into Doris.</p>
<p>In addition, Doris provides a special write <a href="https://doris.apache.org/docs/3.0/data-operate/transaction" target="_blank" rel="noopener noreferrer">transaction</a> mechanism. By setting a <a href="https://doris.apache.org/docs/3.0/data-operate/transaction#label-mechanism" target="_blank" rel="noopener noreferrer">label</a> for a batch of data through the Load API, attempting to re-load a label that has been successfully load before will result in an error, thereby achieving data deduplication. This mechanism ensures that data is written without loss or duplication without relying on the uniqueness of primary keys at the storage layer. Additionally, having a unique label for each batch of data offers better performance compared to having a unique primary key for each individual record.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-performance">Write performance<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#write-performance" class="hash-link" aria-label="Direct link to Write performance" title="Direct link to Write performance">&#x200B;</a></h3>
<p><strong>Apache Doris</strong>, as a real-time data warehouse, supports real-time data writes and updates. One of the standout features of Doris is its incredibly high write throughput. This is because the Doris community has put a lot of effort in optimizing it for high-throughput writes such as vertorized writting and  single replica indexing.</p>
<p>On the other hand, the low write throughput of <strong>Elasticsearch</strong> is a well-known pain point. This is due to Elasticsearch&apos;s needs to generate complex inverted index on multiple replicas, causing a lot of overheads.</p>
<p>We compare the write performance of Doris and Elasticsearch using Elasticsearch&apos;s official benchmark <a href="https://github.com/elastic/rally-tracks/tree/master/http_logs" target="_blank" rel="noopener noreferrer">httplogs</a>, under the same hardware resources and storage schema (including field types and inverted indexes). The test environment and results are as follows:</p>
<p><img decoding="async" loading="lazy" alt="write performance.png" src="https://doris.apache.org/assets/images/write-performance-4d69725174a2f844b881ef4231f254cc.png" width="1280" height="1184" class="img_ev3q"></p>
<p>Under the premise of creating the same inverted index, Apache Doris delivers a much higher write throughput than Elasticsearch. This is due to some key advancements in performance optimization, including:</p>
<ol>
<li>Doris is implemented in C++, which is more efficient than Elasticsearch&apos;s Java implementation.</li>
<li>The vectorized execution engine of Doris fully utilizes CPU SIMD instructions to accelerate both data writing and inverted index building. Its columnar storage also facilitates vectorized execution.</li>
<li>The inverted index of Doris is simplified for real-time analytics scenarios, eliminating unnecessary storage structures such as forward indexes and norms.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-storage">Real-time storage<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#real-time-storage" class="hash-link" aria-label="Direct link to Real-time storage" title="Direct link to Real-time storage">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-format-and-cost">Storage format and cost<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#storage-format-and-cost" class="hash-link" aria-label="Direct link to Storage format and cost" title="Direct link to Storage format and cost">&#x200B;</a></h3>
<p>As a real-time data warehouse, Doris adheres to the typical relational database model, with a storage hierarchy that includes <strong>catalog</strong>, <strong>database</strong>, and <strong>table</strong> levels. A table consists of one or more columns, each with its own data type, and indexes can be created on the columns.</p>
<p>By default, Doris stores tables in a columnar format, meaning that data for a single column is stored in contiguous physical files. This not only achieves a high compression ratio but also ensures high query efficiency in analysis scenarios where only certain columns are accessed, as only the required data is read and processed. Additionally, Doris supports an optional row storage format to accelerate detailed point queries.</p>
<p>In Elasticsearch, data is stored in Lucene using a document model. In this model, an Elasticsearch index is equivalent to a database table, the index mapping corresponds to the database table schema, and fields within the index mapping are akin to columns in a database, each with its own type and index type.</p>
<p>By default, Elasticsearch uses row-based storage (the _source field), where each field has an associated inverted index created for it, but it also supports optional columnar storage (docvalue). Generally, row-based storage is essential in Elasticsearch because it lays the foundation for raw detailed data queries.</p>
<p>Storage space consumption, or more straightforward, storage cost, is a big concern for users. This is another pain point of Elasticsearch - it creates huge storage costs.</p>
<p>Apache Doris community have made a lot of optimizations and successfully reduced the storage cost significantly. We have put a lot of work to simplify <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index" target="_blank" rel="noopener noreferrer">inverted index</a>, which is supported in Doris since version 2.0, and it now takes up much less space. <strong>Doris</strong> supports the ZSTD algorithm, which is much more efficient than GZIP and LZ4, and it can reach a data compression ratio of 5:1 ~ 10:1. Since the compression ratio of <strong>Elasticsearch</strong> is usually about 1.5:1, Doris is 3~5 times more efficient than Elasticsearch in data compression.</p>
<p>As demonstrated in the httplogs test results table above, 32GB of raw data occupies 3.2GB in Doris, whereas Elasticsearch defaults to 19.4GB. Even with the latest logsdb optimization mode enabled, Elasticsearch still consumes 11.7GB. Compared to Elasticsearch, Doris reduces storage space by 83% (73% with logsdb enabled).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-model">Table model<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#table-model" class="hash-link" aria-label="Direct link to Table model" title="Direct link to Table model">&#x200B;</a></h3>
<p>Apache Doris provides three data models. As for Elasticsearch, I put it as &quot;one and two half&quot; models because it only provides limited support for certain data storage models. I will get to them one by one.</p>
<ul>
<li>
<p>The first is the Duplicate model, which means it allows data duplication. This is suitable for storing logs. Both Doris and Elasticsearch support this model.</p>
</li>
<li>
<p>The second is the primary key model. It works like OLTP databases, which means the data will be deduplicated by key. The <a href="https://doris.apache.org/docs/table-design/data-model/unique" target="_blank" rel="noopener noreferrer">primary key model</a> in <strong>Doris</strong> provides high performance and many user-friendly features. Just like many databases, you can define one or multiple fields as the primary and unique key.</p>
<ul>
<li>
<p>However, in <strong>Elasticsearch</strong>, you can only use a special field <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/mapping-id-field.html" target="_blank" rel="noopener noreferrer">_id</a> as the unique identifier for a document (a row in database). Unlike database primary key, there are many limitations for it.</p>
</li>
<li>
<p>The <code>_id</code> field can not be used for aggregation or sorting</p>
</li>
<li>
<p>The <code>_id</code> field can not be larger than 512 bytes</p>
</li>
<li>
<p>The <code>_id</code> field can not be multiple fields, so you will need to combine the multiple fields into one before you can use them as the primary key, but the length of the combined _id can still not exceed 512 bytes.</p>
</li>
</ul>
</li>
<li>
<p>The third is the aggregation model, which means data will be aggregated or rolled up.</p>
</li>
</ul>
<p>In its early stages, Elasticsearch provided the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/rollup-getting-started.html" target="_blank" rel="noopener noreferrer">rollup</a> feature through the commercial X-Pack plugin, allowing users to create rollup jobs that configured dimensions, metric fields, and aggregation intervals for rollup indexes based on a base index. However, X-Pack rollup had several limitations:</p>
<ol>
<li><strong>Data Asynchrony</strong>: Rollup jobs ran in the background, meaning the data in the rollup index was not synchronized in real time with the base index.</li>
<li><strong>Specialized Query Requirement</strong>: Queries targeting rolled-up data required dedicated rollup queries, and users had to manually specify the rollup index in their queries.</li>
</ol>
<p>Perhaps these reasons explain why <strong>Elasticsearch has deprecated the use of rollup starting in version 8.11.0</strong> and now recommends <strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/downsampling.html" target="_blank" rel="noopener noreferrer">downsampling</a></strong> as an alternative. Downsampling eliminates the need to specify a separate index and simplifies querying, but it also comes with its own constraints:</p>
<ol>
<li><strong>Time-Series Exclusive</strong>: Downsampling is only applicable to time-series data, relying on time as the primary dimension. It cannot be used for other data types, such as business reporting data.</li>
<li><strong>Index Replacement</strong>: A downsampled index replaces the original index, meaning aggregated data and raw data cannot coexist.</li>
<li><strong>Read-Only</strong>: Downsampling can only be performed on the original index after it transitions to a read-only state. Data actively being written (e.g., real-time ingestion) cannot undergo downsampling.</li>
</ol>
<p>As a real-time data warehouse excelling in aggregation and analytics, <strong>Doris</strong> has supported aggregation capabilities since its early use cases in online reporting and analytics. It offers two flexible mechanisms:</p>
<ol>
<li><strong><a href="https://doris.apache.org/docs/3.0/table-design/data-model/aggregate" target="_blank" rel="noopener noreferrer">Aggregation Table Model</a></strong>:
<ul>
<li>Data is directly aggregated during ingestion, eliminating the storage of raw data.</li>
<li>Only aggregated results are stored, drastically reducing storage costs.</li>
</ul>
</li>
<li><strong><a href="https://doris.apache.org/docs/query-acceleration/materialized-view/sync-materialized-view" target="_blank" rel="noopener noreferrer">Aggregated Materialized Views</a>/ Rollup</strong>:
<ul>
<li>Users can create aggregated materialized views on a base table. Data is written to both the base table and the materialized view simultaneously, ensuring atomic and synchronized updates.</li>
<li>Queries target the base table, and the query optimizer automatically rewrites queries to leverage the materialized view for accelerated performance.</li>
</ul>
</li>
</ol>
<p>This design ensures real-time aggregation while maintaining query flexibility and efficiency in Doris.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flexible-schema">Flexible schema<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#flexible-schema" class="hash-link" aria-label="Direct link to Flexible schema" title="Direct link to Flexible schema">&#x200B;</a></h3>
<p>In most cases, especially for online business scenarios, users often need to update or modify the data schema. Elasticsearch supports flexible schema, but it only allows users to dynamically add columns.</p>
<p><img decoding="async" loading="lazy" alt="Flexible schema.png" src="https://doris.apache.org/assets/images/Flexible-schema-4a101b19b1ce379dcd31c5d6c0106aac.png" width="1280" height="687" class="img_ev3q"></p>
<p>When you write JSON data into Elasticsearch, if the data contains a new field which is not in index mapping, Elasticsearch will create a new field in the schema through <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/dynamic-field-mapping.html" target="_blank" rel="noopener noreferrer">dynamic mapping</a>, so you don&apos;t need to change the  schema beforehand, like you have to do in traditional databases. However, in Elasticsearch, users cannot directly delete a field of the schema. For that, you will need a reindex operation that reads and writes the entire index in Elasticsearch.</p>
<p>In addition, Elasticsearch does not allow adding index for an already existed field. Imagine that you have 100 fields in a schema, and you have created inverted index for 10 of them, and then some days later, you want to add inverted index for another 5 fields, but no, you can&apos;t do that in Elasticsearch. Likewise, deleting index for a field is not allowed either.</p>
<p>As a result, to avoid such troubles, most Elasticsearch users will just create inverted index for all of their fields, but that causes much slower data writing and much larger storage usage.</p>
<p>Also, Elasticsearch does not allow you to modify your index names or your field names. To sum up, if you need to make any changes to your data other than adding a field, you will need to re-index everything. That&apos;s a highly resource-intensive and time-consuming operation.</p>
<p>What about <strong>Apache Doris</strong>? Doris supports all these <a href="https://doris.apache.org/docs/3.0/table-design/schema-change" target="_blank" rel="noopener noreferrer">schema changes</a>. You can add or delete fields and <a href="https://doris.apache.org/docs/3.0/table-design/index/inverted-index#managing-indexes" target="_blank" rel="noopener noreferrer">indexes</a> as you want, and you can change the name of any table or field easily. Doris can finish these changes within just a few milliseconds. Such flexibility will save you a lot of time and resource, especially when you have changing business needs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-queries">Real-time queries<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#real-time-queries" class="hash-link" aria-label="Direct link to Real-time queries" title="Direct link to Real-time queries">&#x200B;</a></h2>
<p>We break down the real-time querying of Elasticsearch and Apache Doris into three dimensions: usability, query capabilities, and performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usability">Usability<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#usability" class="hash-link" aria-label="Direct link to Usability" title="Direct link to Usability">&#x200B;</a></h3>
<p>One key aspect of usability is reflected in the user interface.</p>
<p>The Doris SQL interface is designed to maintain protocol and syntax compatibility with MySQL. It even does not have its own client or JDBC driver, allowing the use of MySQL&#x2019;s client and JDBC driver directly. This is a big convenience for many users familiar with MySQL. In fact, this choice was made early in the original design of Doris to make it more user-friendly. Since MySQL is the most widely used open-source OLTP database, Doris is designed to complement MySQL, creating the best practice for combining OLTP (MySQL) with OLAP (Doris). This allows engineers and data analysts to work seamlessly within a single interface and set of syntax, covering both transactional and analytical workloads.</p>
<p>On the other hand, Elasticsearch has its own Domain Specific Language (DSL), which is originally designed for searching. This DSL is part of the Elasticsearch ecosystem, it often requires engineers to invest a lot of time and effort to fully understand and use the DSL effectively.</p>
<p>Let&apos;s take a look at one example:</p>
<p><img decoding="async" loading="lazy" alt="Real-time queries.png" src="https://doris.apache.org/assets/images/Real-time-queries-38c7e2bc6c2069a82fa10849a212f911.png" width="1280" height="408" class="img_ev3q"></p>
<p>Imagine we want to search for a particular keyword within a particular time range, and then group and order the data by time interval to visualize it as a trend chart.</p>
<p>In Doris, this can be done with only 7 lines of SQL. However, in Elasticsearch, the same process requires 30 lines.</p>
<p>And it&apos;s not just about the code complexity. I believe many of you may find this relatable: The first attempt to learn Elasticsearch&apos;s DSL is quite challenging. And even after gaining familiarity with it, crafting a query often requires frequent reference to documentation and examples. Due to its inherent complexity, writing DSL queries from scratch remains a challenging task. In contrast, SQL is simple, clear, and highly structured. Most engineers can easily write a query like this without much effort.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-capabilities">Query capabilities<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#query-capabilities" class="hash-link" aria-label="Direct link to Query capabilities" title="Direct link to Query capabilities">&#x200B;</a></h3>
<p><strong>Elasticsearch</strong> is good at searching. As its name suggests, it was built for search. But beyond search and aggregation queries, it doesn&apos;t support complex analytical queries, such as multi-table JOIN.</p>
<p><strong>Apache Doris</strong> is a general-purpose data warehouse. It provides strong support for complex analytics, including multi-table JOIN, UDF, subquery, window function, logic view, materialized view, and data lakehouse. And Doris has been improving its searching capabilities since version 2.0. We have introduced inverted index and full-text search, so it is getting increasingly competitive in this area.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="search">Search<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#search" class="hash-link" aria-label="Direct link to Search" title="Direct link to Search">&#x200B;</a></h4>
<p>While this article focuses on real-time analytics scenarios, we have chosen not to overlook <strong>Elasticsearch&#x2019;s core strength</strong>: its search capabilities.</p>
<p>Elasticsearch, renowned for its search performance, leverages the <strong>Apache Lucene library</strong> under the hood. It provides two primary indexing structures:</p>
<ul>
<li><strong>Inverted indexes</strong> for text fields.</li>
<li><strong>BKD-Tree indexes</strong> for numeric, date, and geospatial data.</li>
</ul>
<p>Elasticsearch supports the following search paradigms:</p>
<ol>
<li><strong>Exact Matching</strong>:  equality or range queries for numeric, date, or non-tokenized string fields (keyword), powered by <strong>BKD-Tree indexes</strong> (numeric/date) or <strong>non-tokenized inverted indexes</strong> (exact term matches).</li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/full-text-queries.html" target="_blank" rel="noopener noreferrer">Full-Text Search</a></strong>:  keyword, phrase, or multi-term matching. During ingestion, text is split into tokens using a configurable tokenizer. Queries match tokens, phrases, or combinations (e.g., <code>&quot;quick brown fox&quot;</code>).  Elasticsearch supports some advanced full-text search features, such as relevance scoring, auto-completion, spell-checking, and search suggestions.</li>
<li><strong>Vector Search based on ANN index.</strong></li>
</ol>
<p><strong>Doris</strong> also supports a rich set of indexes to accelerate queries, including <strong>prefix-sorted indexes</strong>,  <strong>ZoneMap indexes</strong>,  <strong>BloomFilter indexes and N-Gram BloomFilter indexes</strong>.</p>
<p>Starting from version 2.0, Doris has added <strong>inverted indexes</strong> and BKD-Tree indexes to support <strong>exact matching</strong> and full-text search. <strong>Vector search</strong> is currently under development and is expected to be available within the next six months.</p>
<p>There are some <strong>differences between the indexes of Apache Doris and Elasticsearch</strong>:</p>
<ol>
<li><strong><a href="https://doris.apache.org/docs/3.0/table-design/index/index-overview" target="_blank" rel="noopener noreferrer">Diverse indexing strategies</a></strong>: Doris does not rely solely on inverted indexes for query acceleration. It offers different indexes for different scenarios. <strong>ZoneMap</strong>, BloomFilter, and <strong>N-Gram BloomFilter indexes</strong> are <strong>skip indexes</strong> that accelerate analytical queries by skipping non-matching data blocks based on <code>WHERE</code> conditions. The <strong>N-Gram BloomFilter index</strong> is specifically optimized for <code>LIKE</code>-style fuzzy string matching. Inverted index and Prefix-sorted indexes are point query indexes that speed up point queries by locating which rows satisfy the WHERE conditions through the index and directly read those rows.</li>
<li><strong>Performance centric design</strong>: Doris prioritizes <strong>speed and efficiency</strong> over advanced search features. To achieve faster index building and query performance (see the Query Performance section in the following), it omits certain complex functionalities of inverted indexes at present, such as relevance scoring, auto-completion, spell-checking, and search suggestions. Since there are more critical in document or web search scenarios, which are not Doris&#x2019; primary focus on real-time analytics.</li>
</ol>
<p>For <strong>exact matching</strong> and <strong>common full-text search</strong> requirements, such as term, range, phrase, multi-field matching, Doris is fully capable and reliable in most use cases. For <strong>complex search needs</strong> (e.g., relevance scoring, auto-completion, spell-checking, or search suggestions), <strong>Elasticsearch</strong> remains the more suitable choice.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">&#x200B;</a></h4>
<p>Both <strong>Elasticsearch</strong> and <strong>Doris</strong> support a wide range of aggregation operators, including:</p>
<ul>
<li><strong>Basic aggregations</strong>: <code>MIN</code>, <code>MAX</code>, <code>COUNT</code>, <code>SUM</code>, <code>AVG</code>.</li>
<li><strong>Advanced aggregations</strong>: <code>PERCENTILE</code> (quantiles), <code>HISTOGRAM</code> (bucketed distributions).</li>
<li><strong>Aggregation modes</strong>: Global aggregation, key-based grouping (e.g., <code>GROUP BY</code>).</li>
</ul>
<p>However, their approaches to aggregation analysis differ significantly in the following aspects:</p>
<p><strong>1. Query syntax and usability:</strong> Doris uses <strong>standard SQL syntax</strong> (<code>GROUP BY</code> clauses + aggregation functions), making it intuitive for analysts and developers familiar with SQL. <strong>Elasticsearch</strong> relies on a <strong>custom Domain-Specific Language (DSL)</strong> with concepts like <code>metric agg</code>, <code>bucket agg</code>, and <code>pipeline agg</code>. Complexity increases with nested or multi-layered aggregations, requiring steeper learning curves.</p>
<p><strong>2. Result accuracy:</strong> Elasticsearch outputs inaccurate approximate result for many aggregation types by default. Aggregations (e.g., <code>terms</code> agg) are executed per shard, with each shard returning only its top results (e.g., top 10 buckets). These partial results are merged globally, leading to potentially inaccurate final outputs. As a serious OLAP database, Doris ensures exact results by processing full datasets without approximations.</p>
<p><strong>3. Query Performance:</strong> Doris demonstrates <strong>significant performance advantages over Elasticsearch</strong> in aggregation-heavy OLAP workloads like those on ClickBench (see more in the Query performance section bellow).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="join">JOIN<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#join" class="hash-link" aria-label="Direct link to JOIN" title="Direct link to JOIN">&#x200B;</a></h4>
<p><strong>Elasticsearch</strong> does not support JOIN, making it unable to execute common benchmarks like TPC-H or TPC-DS. Since JOINs are critical in data analysis, Elasticsearch provides some complex <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/joining-queries.html" target="_blank" rel="noopener noreferrer">workarounds</a> with significant limitations:</p>
<ol>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/parent-join.html" target="_blank" rel="noopener noreferrer">Parent-child</a></strong> relationships and has_child / has_parent queries: Simulate JOINs by establishing parent-child relationships within a single index. Child documents store the parent document&#x2019;s ID. <code>has_child</code> queries first find matching child documents, then retrieve their parent documents via the stored parent IDs. <code>has_parent</code> queries reverse this logic.  It&apos;s complex and Elasticsearch explicitly warns against equating this approach to database-style JOINs.
<blockquote>
<p>We don&#x2019;t recommend using multiple levels of relations to replicate a relational model. Each level of relation adds an overhead at query time in terms of memory and computation. For better search performance, denormalize your data instead.</p>
</blockquote>
</li>
<li><strong><a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.17/query-dsl-terms-query.html#query-dsl-terms-lookup" target="_blank" rel="noopener noreferrer">Terms lookup</a></strong>:  Similar to an IN-subquery by fetching a value list from one index and using it in a <code>terms</code> query on another.  It&apos;s only suitable for large-table-to-small-table JOINs (e.g., filtering a large dataset using a small reference list), but performs very poorly for large-table-to-large-table JOINs due to scalability issues.</li>
</ol>
<p><strong>Doris</strong> provides comprehensive support for <a href="https://doris.apache.org/docs/3.0/query-data/join/" target="_blank" rel="noopener noreferrer">JOIN</a> operations, including:</p>
<ul>
<li>INNER JOIN</li>
<li>CROSS JOIN</li>
<li>LEFT / RIGHT / FULL OUTER JOIN</li>
<li>LEFT / RIGHT SEMI JOIN</li>
<li>LEFT / RIGHT ANTI JOIN</li>
</ul>
<p>Further more, <strong>Doris&#x2019; query optimizer</strong> adaptively selects optimal execution plans for JOIN operations based on data characteristics and statistics, including:</p>
<ul>
<li><strong>Small-large table JOIN</strong>:
<ul>
<li><strong>Broadcast JOIN</strong>: The smaller table is broadcast to all nodes for local joins.</li>
</ul>
</li>
<li><strong>Large-large table JOIN</strong>:
<ul>
<li><strong>Bucket Shuffle JOIN</strong>: Used when the left table&#x2019;s bucketing distribution aligns with the JOIN key.</li>
<li><strong>Colocate JOIN</strong>: Applied when both the left and right tables share identical bucketing distributions with the  JOIN keys.</li>
<li><strong>Runtime Filter</strong>: Reduces data scanned in the left table by pushing down predicates from the right table using runtime-generated filters.</li>
</ul>
</li>
</ul>
<p>This intelligent optimization ensures efficient JOIN execution across diverse data scales and distributions, including <a href="https://doris.apache.org/docs/3.0/benchmark/tpch/" target="_blank" rel="noopener noreferrer">TPC-H</a> and <a href="https://doris.apache.org/docs/3.0/benchmark/tpcds" target="_blank" rel="noopener noreferrer">TPC-DS</a> benchmarks.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h4>
<p>Data warehouses addresses the need for fast data analysis, while data lakes are good at data storage and management. The integration of them, known as &quot;<a href="https://doris.apache.org/docs/3.0/lakehouse/lakehouse-overview" target="_blank" rel="noopener noreferrer">lakehouse</a>&quot;, is to facilitate the seamless integration and free flow of data between the data lake and data warehouse. It enables users to leverage the analytic capabilities of the data warehouse while harnessing the data management power of the data lake.</p>
<p><img decoding="async" loading="lazy" alt="lakehouse.png" src="https://doris.apache.org/assets/images/lakehouse-e089ec3a90a1b6725e8f08d96d45c328.png" width="1280" height="640" class="img_ev3q"></p>
<p>Apache Doris can work as a data lakehouse with its <a href="https://doris.apache.org/docs/3.0/lakehouse/lakehouse-overview#multi-catalog" target="_blank" rel="noopener noreferrer">Multi Catalog</a> feature. It can access databases and data lakes including Apache Hive, Apache Iceberg, Apache Hudi, Apache Paimon, LakeSoul, Elasticsearch, MySQL, Oracle, and SQLServer. It also supports Apache Ranger for privilege management.</p>
<p>Elasticsearch does not support querying external data, and of course, it does not support lakehouse either.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-performance">Query performance<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#query-performance" class="hash-link" aria-label="Direct link to Query performance" title="Direct link to Query performance">&#x200B;</a></h3>
<p><strong>Apache Doris</strong> has been extensively optimized for multiple scenarios, so it can deliver high performance in many use cases. For example, Doris can achieve tens of thousands of QPS for high-concurrency point queries, and it delivers industry-leading performance in aggregation analysis on a global scale.</p>
<p><strong>Elasticsearch</strong> is good at point queries (retrieving just a small amount of data). However, it might struggle with complex analytical workloads.</p>
<p><a href="https://elasticsearch-benchmarks.elastic.co/" target="_blank" rel="noopener noreferrer">Elasticsearch httplogs</a> and the Microsoft Azure <a href="https://gigaom.com/report/log-data-analytics-testing/" target="_blank" rel="noopener noreferrer">logsbench</a> are benchmarks for log storage and search. Both tests show that Doris is about 3 - 4 times faster than Elasticsearch in data writing, but only uses 1/6 - 1/4 of the storage space that Elasticsearch uses. Then for data queries, Doris is more than 2 times faster than Elasticsearch.</p>
<p><img decoding="async" loading="lazy" alt="Query performance.png" src="https://doris.apache.org/assets/images/Query-performance-0fd762e5e1d85f0a4ecd6f1bfeccb93e.png" width="1280" height="565" class="img_ev3q"></p>
<p><a href="https://benchmark.clickhouse.com/#eyJzeXN0ZW0iOnsiQWxsb3lEQiI6ZmFsc2UsIkF0aGVuYSAocGFydGl0aW9uZWQpIjpmYWxzZSwiQXRoZW5hIChzaW5nbGUpIjpmYWxzZSwiQXVyb3JhIGZvciBNeVNRTCI6ZmFsc2UsIkF1cm9yYSBmb3IgUG9zdGdyZVNRTCI6ZmFsc2UsIkJ5Q29uaXR5IjpmYWxzZSwiQnl0ZUhvdXNlIjpmYWxzZSwiY2hEQiI6ZmFsc2UsIkNpdHVzIjpmYWxzZSwiQ2xpY2tIb3VzZSBDbG91ZCAoYXdzKSI6ZmFsc2UsIkNsaWNrSG91c2UgQ2xvdWQgKGdjcCkiOmZhbHNlLCJDbGlja0hvdXNlIChkYXRhIGxha2UsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKGRhdGEgbGFrZSwgc2luZ2xlKSI6ZmFsc2UsIkNsaWNrSG91c2UgKFBhcnF1ZXQsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKFBhcnF1ZXQsIHNpbmdsZSkiOmZhbHNlLCJDbGlja0hvdXNlICh3ZWIpIjpmYWxzZSwiQ2xpY2tIb3VzZSI6ZmFsc2UsIkNsaWNrSG91c2UgKHR1bmVkKSI6ZmFsc2UsIkNsaWNrSG91c2UgKHR1bmVkLCBtZW1vcnkpIjpmYWxzZSwiQ3JhdGVEQiI6ZmFsc2UsIkRhdGFiZW5kIjpmYWxzZSwiRGF0YUZ1c2lvbiAoUGFycXVldCwgcGFydGl0aW9uZWQpIjpmYWxzZSwiRGF0YUZ1c2lvbiAoUGFycXVldCwgc2luZ2xlKSI6ZmFsc2UsIkFwYWNoZSBEb3JpcyI6dHJ1ZSwiRHJ1aWQiOmZhbHNlLCJEdWNrREIgKFBhcnF1ZXQsIHBhcnRpdGlvbmVkKSI6ZmFsc2UsIkR1Y2tEQiI6ZmFsc2UsIkVsYXN0aWNzZWFyY2giOnRydWUsIkVsYXN0aWNzZWFyY2ggKHR1bmVkKSI6dHJ1ZSwiR2xhcmVEQiI6ZmFsc2UsIkdyZWVucGx1bSI6ZmFsc2UsIkhlYXZ5QUkiOmZhbHNlLCJIeWRyYSI6ZmFsc2UsIkluZm9icmlnaHQiOmZhbHNlLCJLaW5ldGljYSI6ZmFsc2UsIk1hcmlhREIgQ29sdW1uU3RvcmUiOmZhbHNlLCJNYXJpYURCIjpmYWxzZSwiTW9uZXREQiI6ZmFsc2UsIk1vbmdvREIiOmZhbHNlLCJNb3RoZXJkdWNrIjpmYWxzZSwiTXlTUUwgKE15SVNBTSkiOmZhbHNlLCJNeVNRTCI6ZmFsc2UsIk94bGEuY29tIjpmYWxzZSwiUGFyYWRlREIiOmZhbHNlLCJQaW5vdCI6ZmFsc2UsIlBvc3RncmVTUUwgKHR1bmVkKSI6ZmFsc2UsIlBvc3RncmVTUUwiOmZhbHNlLCJRdWVzdERCIChwYXJ0aXRpb25lZCkiOmZhbHNlLCJRdWVzdERCIjpmYWxzZSwiUmVkc2hpZnQiOmZhbHNlLCJTZWxlY3REQiI6ZmFsc2UsIlNpbmdsZVN0b3JlIjpmYWxzZSwiU25vd2ZsYWtlIjpmYWxzZSwiU1FMaXRlIjpmYWxzZSwiU3RhclJvY2tzIjpmYWxzZSwiVGFibGVzcGFjZSI6ZmFsc2UsIlRpbWVzY2FsZURCIChjb21wcmVzc2lvbikiOmZhbHNlLCJUaW1lc2NhbGVEQiI6ZmFsc2UsIlVtYnJhIjpmYWxzZX0sInR5cGUiOnsiQyI6dHJ1ZSwiY29sdW1uLW9yaWVudGVkIjp0cnVlLCJQb3N0Z3JlU1FMIGNvbXBhdGlibGUiOnRydWUsIm1hbmFnZWQiOnRydWUsImdjcCI6dHJ1ZSwic3RhdGVsZXNzIjp0cnVlLCJKYXZhIjp0cnVlLCJDKysiOnRydWUsIk15U1FMIGNvbXBhdGlibGUiOnRydWUsInJvdy1vcmllbnRlZCI6dHJ1ZSwiQ2xpY2tIb3VzZSBkZXJpdmF0aXZlIjp0cnVlLCJlbWJlZGRlZCI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiYXdzIjp0cnVlLCJSdXN0Ijp0cnVlLCJzZWFyY2giOnRydWUsImRvY3VtZW50Ijp0cnVlLCJhbmFseXRpY2FsIjp0cnVlLCJzb21ld2hhdCBQb3N0Z3JlU1FMIGNvbXBhdGlibGUiOnRydWUsInRpbWUtc2VyaWVzIjp0cnVlfSwibWFjaGluZSI6eyIxNiB2Q1BVIDEyOEdCIjp0cnVlLCI4IHZDUFUgNjRHQiI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiMTZhY3UiOnRydWUsImM2YS40eGxhcmdlLCA1MDBnYiBncDIiOnRydWUsIkwiOnRydWUsIk0iOnRydWUsIlMiOnRydWUsIlhTIjp0cnVlLCJjNmEubWV0YWwsIDUwMGdiIGdwMiI6ZmFsc2UsIjE5MkdCIjp0cnVlLCIyNEdCIjp0cnVlLCIzNjBHQiI6dHJ1ZSwiNDhHQiI6dHJ1ZSwiNzIwR0IiOnRydWUsIjk2R0IiOnRydWUsIjE0MzBHQiI6dHJ1ZSwiZGV2Ijp0cnVlLCI3MDhHQiI6dHJ1ZSwiYzVuLjR4bGFyZ2UsIDUwMGdiIGdwMiI6dHJ1ZSwiYzUuNHhsYXJnZSwgNTAwZ2IgZ3AyIjp0cnVlLCJjNmEuNHhsYXJnZSwgMTUwMGdiIGdwMiI6dHJ1ZSwiY2xvdWQiOnRydWUsImRjMi44eGxhcmdlIjp0cnVlLCJyYTMuMTZ4bGFyZ2UiOnRydWUsInJhMy40eGxhcmdlIjp0cnVlLCJyYTMueGxwbHVzIjp0cnVlLCJTMiI6dHJ1ZSwiUzI0Ijp0cnVlLCIyWEwiOnRydWUsIjNYTCI6dHJ1ZSwiNFhMIjp0cnVlLCJYTCI6dHJ1ZSwiTDEgLSAxNkNQVSAzMkdCIjp0cnVlfSwiY2x1c3Rlcl9zaXplIjp7IjEiOnRydWUsIjIiOnRydWUsIjQiOnRydWUsIjgiOnRydWUsIjE2Ijp0cnVlLCIzMiI6dHJ1ZSwiNjQiOnRydWUsIjEyOCI6dHJ1ZSwic2VydmVybGVzcyI6dHJ1ZSwiZGVkaWNhdGVkIjp0cnVlLCJ1bmRlZmluZWQiOnRydWV9LCJtZXRyaWMiOiJob3QiLCJxdWVyaWVzIjpbdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZSx0cnVlLHRydWUsdHJ1ZV19" target="_blank" rel="noopener noreferrer">ClickBench</a> is a benchmark created and maintained by the ClickHouse team to evaluate the performance of analytical databases. It results show that Apache Doris delivers <strong>out-of-the-box</strong> query performance <strong>21 times faster</strong> than Elasticsearch and <strong>6 times faster</strong> than a fine-tuned Elasticsearch.</p>
<p><img decoding="async" loading="lazy" alt="Query performance-2.png" src="https://doris.apache.org/assets/images/Query-performance-2-503b2bd7a3f7cf5a014e80a23c0ecc05.png" width="1280" height="80" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-summary">Comparison Summary<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#comparison-summary" class="hash-link" aria-label="Direct link to Comparison Summary" title="Direct link to Comparison Summary">&#x200B;</a></h2>
<p>In summary, Doris follows Apache License 2.0, which is a highly open license to ensure that Doris remains truly open and will continue to uphold such openness in the future.</p>
<p>Secondly, Doris supports both compute-storage coupled and decoupled mode, while Elasticsearch only supports the former, which enable more powerful elasticity and resource isolation.</p>
<p>Thirdly, Doris provides high performance in data ingestion. It is usually 3~5 times faster than Elasticsearch.</p>
<p>In terms of storage, compared to Elasticsearch, Doris can reduce storage costs by 70% or more. It is also 10 times faster than Elasticsearch in data updates.</p>
<p>As for data queries, Doris outperforms Elasticsearch by a lot. It also provides analytic capabilities that Elasticsearch does have, including multi-table JOIN, materialized views, and data lakehouse.</p>
<p><img decoding="async" loading="lazy" alt="comparisons.png" src="https://doris.apache.org/assets/images/comparisons-0a1ad658b623b841d29f70af1a2a7de2.png" width="1280" height="964" class="img_ev3q">
<img decoding="async" loading="lazy" alt="comparisons-2.png" src="https://doris.apache.org/assets/images/comparisons-2-7fa21a175b6d96706dc1cd697bdf853e.png" width="1280" height="1192" class="img_ev3q">
<img decoding="async" loading="lazy" alt="comparisons-3.png" src="https://doris.apache.org/assets/images/comparisons-3-d8740a99961c6701ceffe829263059a1.png" width="1280" height="1240" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">&#x200B;</a></h2>
<p>Many users have replaced Elasticsearch with Apache Doris in their production environments and received exciting results. I will introduce some user stories from the fields of observability, cyber security, and real-time business analysis.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="observability">Observability<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#observability" class="hash-link" aria-label="Direct link to Observability" title="Direct link to Observability">&#x200B;</a></h3>
<p><strong>User A: a world-famous short video provider</strong></p>
<ul>
<li>Daily incremental data: 800 billion rows (500 TB)</li>
<li>Average write throughput: 10 million row/s (60GB/s)</li>
<li>Peak write throughput: 30 million row/s (90GB/s)</li>
</ul>
<p>Apache Doris supports logging and tracing data storage for this tech giant and meets the data import performance requirements for nearly all use cases within the company.</p>
<p><img decoding="async" loading="lazy" alt="Observability.png" src="https://doris.apache.org/assets/images/Observability-0c354100d26ffddcecd95d82d8b66bb1.png" width="1280" height="328" class="img_ev3q"></p>
<p><strong>User B: NetEase - one of the World&apos;s Highest-Yielding Game Companies</strong></p>
<ul>
<li>Replacing Elasticsearch with Apache Doris for log analysis: reducing storage consumption by 2/3 and achieving 10X query performance</li>
<li>Replacing InfluxDB with Apache Doris for time-series data analysis: saving 50% of server resources and reducing storage consumption by 67%</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Observability-2.png" src="https://doris.apache.org/assets/images/Observability-2-c178019ccf2ae7a409f4afaac4ae3a3e.png" width="1280" height="365" class="img_ev3q"></p>
<p><strong>User C: an observability platform provider</strong></p>
<p>Apache Doris offers a special data type, <a href="https://doris.apache.org/blog/variant-in-apache-doris-2.1" target="_blank" rel="noopener noreferrer">VARIANT</a>, to handle semi-structured data in log and tracing, reducing costs by 70% and delivering 2~3 times faster full-text search performance compared to the Elasticsearch-based solution.</p>
<p><img decoding="async" loading="lazy" alt="Observability-3.png" src="https://doris.apache.org/assets/images/Observability-3-484559d17c7b3238e62b3aa8c2f052f5.png" width="1280" height="346" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cyber-security">Cyber security<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#cyber-security" class="hash-link" aria-label="Direct link to Cyber security" title="Direct link to Cyber security">&#x200B;</a></h3>
<p><strong>User A: QAX - a listed company &amp; leading cyber security leader</strong></p>
<p>The Doris-based security logging solution uses 40% less storage space, delivers 2X faster write performance, and supports full-text search, aggregation analysis, and multi-table JOIN capabilities in one database system.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security.png" src="https://doris.apache.org/assets/images/Cyber-security-c3b176bbfbb20b970106efda6ff1e3db.png" width="1280" height="377" class="img_ev3q"></p>
<p><strong>User B: a payment platform with nearly 600 million registered users</strong></p>
<p>As a unified security data storage solution, Apache Doris delivers 4X faster write speeds, 3X better query performance, and saves 50% storage space compared to the previous architecture with diverse tech stacks using Elasticsearch, Hive and Presto.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security-2.png" src="https://doris.apache.org/assets/images/Cyber-security-2-c3ec4307fe9b2078fd5d5f087f7b9920.png" width="1280" height="379" class="img_ev3q"></p>
<p><strong>User C: a leading cyber security solution provider</strong></p>
<p>Compared to Elasticsearch, Doris delivers 2 times faster write speeds, 4 times better query performance, and a 4 times data compression ratio.</p>
<p><img decoding="async" loading="lazy" alt="Cyber security-3.png" src="https://doris.apache.org/assets/images/Cyber-security-3-c9030ffacacc789a948e29ba021e2182.png" width="1280" height="694" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="business-analysis">Business analysis<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#business-analysis" class="hash-link" aria-label="Direct link to Business analysis" title="Direct link to Business analysis">&#x200B;</a></h3>
<p><strong>User A: a world-leading live e-commerce company</strong></p>
<p>The user previously relied on Elasticsearch to handle online queries for their live stream detail pages, but they faced big challenges in cost and concurrency. After migrating to Apache Doris, they achieve:</p>
<ul>
<li>3 times faster real-time writes: 30w/s -&gt; 100w/s</li>
<li>4 times higher query concurrency: 500QPS -&gt; 2000QPS</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Business analysis.png" src="https://doris.apache.org/assets/images/Business-analysis-12d34ba8931fd3b43354a25d9f93b008.png" width="1280" height="375" class="img_ev3q"></p>
<p><strong>User B: Tencent Music Entertainment</strong></p>
<p>Previously, TME content library used both Elasticsearch and ClickHouse to meet their needs for data searching and analysis, but managing two separate systems was complex and inefficient. With Doris, they are able to unify the two systems into one single platform to support both data searching and analysis. The new architecture delivers 4X faster write speeds, reduces storage costs by 80%, and supports complex analytical operations.</p>
<p><img decoding="async" loading="lazy" alt="Business analysis-2.png" src="https://doris.apache.org/assets/images/Business-analysis-2-8ccd357c1664ebc65a8aa6bc62b5bbf6.png" width="1280" height="253" class="img_ev3q"></p>
<p><strong>User C: a web browser provider with 600 million users</strong></p>
<p>After migrating to Apache Doris for a unified solution for log storage and report analysis, the company doubled its aggregation analysis efficiency, reduced storage consumption by 60%, and cut SQL development time by half.</p>
<p><img decoding="async" loading="lazy" alt="Business analysis-3.png" src="https://doris.apache.org/assets/images/comparisons-3-d8740a99961c6701ceffe829263059a1.png" width="1280" height="1240" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="taking-apache-doris-to-the-next-level">Taking Apache Doris to the next level<a href="https://doris.apache.org/blog/why-apache-doris-is-best-alternatives-for-real-time-analytics#taking-apache-doris-to-the-next-level" class="hash-link" aria-label="Direct link to Taking Apache Doris to the next level" title="Direct link to Taking Apache Doris to the next level">&#x200B;</a></h2>
<p><img decoding="async" loading="lazy" alt="Taking Apache Doris to the next level.png" src="https://doris.apache.org/assets/images/Taking-Apache-Doris-to-the-next-level-3f01e8665550da6623b1bf7e20ff9b9e.png" width="1280" height="586" class="img_ev3q"></p>
<p>For the Apache Doris community developers, the path to making Doris good enough to replace Elasticsearch wasn&apos;t easy. In 2022, we started adding inverted index capabilities to Doris. At that time, this decision was met with skepticism. Many viewed inverted indexes as a feature exclusive to Elasticsearch, a domain few in the industry dared to venture into. Nevertheless, we went with it, and today we can confidently say that we have succeeded.</p>
<p>In 2022, we developed this feature from the ground up, and after a year of dedicated effort, we open-sourced it. Initially, we had only one user, QAX, who was willing to test and adopt the feature. We are deeply grateful to them for their early support during this pivotal stage.</p>
<p>By 2023, the value of Doris with inverted indexes became increasingly evident, leading to broader adoption by about 10 companies.</p>
<p>The growth momentum has continued, and as of 2024, we are experiencing rapid expansion, with over 100 companies now leveraging Doris to replace Elasticsearch.</p>
<p>Looking ahead, I am very much looking forward to what 2025 will bring. This progress, advancing from the ground up to such significant milestones, has been made possible by the incredible support from the Doris community users and developers. We encourage everyone to join the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2zlwvmzon-NIb2rz50rIhcflGAFpYjDQ" target="_blank" rel="noopener noreferrer">Apache Doris Slack community</a> and join the dedicated channel <a href="https://apachedoriscommunity.slack.com/archives/C08CQKX20R5" target="_blank" rel="noopener noreferrer">#elasticsearch-to-doris</a>, where you can receive technical assistance, stay updated with the latest news about Doris, and engage with more Doris developers and users.</p>
<p>More on Apache Doris:</p>
<ul>
<li><a href="https://doris.apache.org/blog/apache-doris-for-log-and-time-series-data-analysis-in-netease" target="_blank" rel="noopener noreferrer">Apache Doris for log and time series data analysis in NetEase, why not Elasticsearch and InfluxDB?</a></li>
<li><a href="https://doris.apache.org/blog/from-elasticsearch-to-apache-doris-upgrading-an-observability-platform" target="_blank" rel="noopener noreferrer">From Elasticsearch to Apache Doris: upgrading an observability platform</a></li>
<li><a href="https://doris.apache.org/blog/Log-Analysis-How-to-Digest-15-Billion-Logs-Per-Day-and-Keep-Big-Queries-Within-1-Second" target="_blank" rel="noopener noreferrer">Log Analysis: How to Digest 15 Billion Logs Per Day and Keep Big Queries Within 1 Second</a></li>
<li><a href="https://doris.apache.org/blog/Replacing-Apache-Hive-Elasticsearch-and-PostgreSQL-with-Apache-Doris" target="_blank" rel="noopener noreferrer">Replacing Apache Hive, Elasticsearch and PostgreSQL with Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/Building-A-Log-Analytics-Solution-10-Times-More-Cost-Effective-Than-Elasticsearch" target="_blank" rel="noopener noreferrer">Log Analysis: Elasticsearch VS Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/inverted-index-accelerates-text-searches-by-40-time-apache-doris" target="_blank" rel="noopener noreferrer">A Deep Dive into Inverted Index in Apache Doris</a></li>
<li><a href="https://doris.apache.org/blog/variant-in-apache-doris-2.1" target="_blank" rel="noopener noreferrer">VARIANT in Apache Doris 2.1.0: a new data type 8 times faster than JSON for semi-structured data analysis</a></li>
</ul>
<p>Connect with me on <a href="https://www.linkedin.com/in/kang-xiao-441740316/" target="_blank" rel="noopener noreferrer">Linkedin</a></p>
<p>Apache Doris on <a href="https://github.com/apache/doris" target="_blank" rel="noopener noreferrer">GitHub</a></p>
<p>Apache Doris <a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Website</a></p></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Slash your cost by 90% with Apache Doris Compute-Storage Decoupled Mode]]></title>
            <link>https://doris.apache.org/blog/doris-compute-storage-decoupled</link>
            <guid>https://doris.apache.org/blog/doris-compute-storage-decoupled</guid>
            <pubDate>Fri, 21 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris compute-storage decoupled mode achieves 90% cost reduction and provides elasticity and workload isolation, while maintaining high performance in data ingestion and queries.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Slash your cost by 90% with Apache Doris Compute-Storage Decoupled Mode</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-03-21T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">March 21, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>In the age of data-driven decision-making, the exponential growth of data volume and the ever-evolving demands for analytics pose great challenges. Data streams in from diverse sources (such as application logs, network interactions, and mobile devices), spanning structured, semi-structured, and unstructured formats. This diversity places pressure on storage and analytical systems. Meanwhile, the surge in demand for real-time analytics and exploratory queries requires systems to deliver millisecond-level responsiveness while achieving optimal cost efficiency and elastic scalability.</p>
<p>Apache Doris emerged in the era of integrated storage and computation, built on a classic <strong>Shared Nothing</strong> architecture. In this design, storage and computation are co-located on <strong>Backend (BE) nodes</strong>, leveraging an <strong>MPP (Massively Parallel Processing)</strong> distributed computing model. This architecture delivers key advantages, including high availability, simplified deployment, seamless horizontal scalability, and exceptional real-time analytical performance.</p>
<p>For real-time analytics and small-scale data processing, Apache Doris stands out with <strong>predictable, stable low-latency performance</strong>, making it an indispensable solution. However, when scaling to large-scale data processing, it encounters certain challenges, primarily in:</p>
<ul>
<li><strong>Relatively high costs &amp; low elasticity:</strong> Balancing storage and compute resources remains a big challenge. Storage capacity must be sufficient to accommodate all data, while compute resources need to handle query workloads efficiently. However, dynamically scaling clusters is often time-consuming, prompting enterprises to over-provision resources to ensure stability. This approach simplifies operations but leads to resource waste and increased costs.</li>
<li><strong>Limited workload isolation:</strong> Since Apache Doris 2.0, Workload Groups provide soft isolation, while Resource Groups offer a degree of hard isolation. However, neither mechanism ensures complete physical isolation, which can impact performance in multi-tenant or resource-intensive environments.</li>
<li><strong>Operational complexity:</strong> Managing an OLAP system with built-in distributed storage requires not only overseeing compute nodes but also ensuring efficient storage administration. Storage management is inherently complex, and misconfigurations or improper operations can lead to data loss, making maintenance highly demanding.</li>
</ul>
<blockquote>
<p>Even so, in the absence of stable and large-scale storage support, a integrated storage-compute architecture remains the optimal choice.</p>
</blockquote>
<p>As cloud infrastructure matures, enterprises increasingly seek <strong>deeper Apache Doris integration with public clouds, private clouds, and Kubernetes (K8s) container platforms</strong> to unlock greater elasticity and flexibility. Public clouds offer mature object storage with on-demand compute resources, eliminating the need for pre-allocated space, while private clouds leverage technologies like K8s and MinIO to build scalable resource platforms. <strong>This evolution in cloud infrastructure has also accelerated Apache Doris&#x2019; transition to a storage-compute decoupled architecture, enabling lower costs, high elasticity, and enhanced workload isolation.</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apache-doris-compute-storage-decoupled-mode">Apache Doris Compute-Storage Decoupled Mode<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#apache-doris-compute-storage-decoupled-mode" class="hash-link" aria-label="Direct link to Apache Doris Compute-Storage Decoupled Mode" title="Direct link to Apache Doris Compute-Storage Decoupled Mode">&#x200B;</a></h2>
<p>Since <a href="https://doris.apache.org/blog/release-note-3.0.0" target="_blank" rel="noopener noreferrer">version 3.0</a>, Apache Doris has supported both the compute-storage decoupled mode and the compute-storage coupled mode.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-compute-storage-decoupled">01 Compute-Storage Decoupled<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#01-compute-storage-decoupled" class="hash-link" aria-label="Direct link to 01 Compute-Storage Decoupled" title="Direct link to 01 Compute-Storage Decoupled">&#x200B;</a></h3>
<p>In the compute-storage decoupled mode, Apache Doris adopts a three-tier architecture consisting of three layers: shared storage, compute groups, and meta data service:</p>
<p><img decoding="async" loading="lazy" alt="compute-storage-decoupled.jpg" src="https://doris.apache.org/assets/images/compute-storage-decoupled-2d3232ea831640a90da2fda54c82051f.jpg" width="2560" height="1672" class="img_ev3q"></p>
<p><strong>Shared Storage Layer</strong></p>
<p>Data is persisted in the shared storage layer, allowing compute nodes to access and share data seamlessly. This design enhances compute node flexibility and reduces operational overhead. Leveraging mature and reliable shared storage results in ultra-low storage costs and high data reliability. Whether using public cloud object storage or enterprise-managed shared storage, this approach greatly reduces the maintenance complexity of Apache Doris.</p>
<p><strong>Compute Groups</strong></p>
<p>The compute layer consists of multiple compute groups responsible for executing query plans. Each query is executed within a single compute group, ensuring isolation and scalability. Compute nodes are stateless, utilizing local disks as high-speed caches to accelerate queries while sharing the same data and metadata services. Each compute group operates independently, supporting on-demand scaling, and local caches remain isolated to ensure workload separation and performance consistency.</p>
<p><strong>Meta Data Service</strong></p>
<p>The meta data layer manages system meta data, including databases, tables, schemas, rowset meta data, and transaction information, with support for horizontal scaling. Future iterations of Apache Doris&#x2019; compute-storage decoupled mode will introduce stateless Frontend (FE) nodes, where memory consumption is decoupled from cluster size. This evolution will eliminate memory bottlenecks, allowing FE nodes to operate with minimal memory requirements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-architecture-design">02 Architecture Design<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#02-architecture-design" class="hash-link" aria-label="Direct link to 02 Architecture Design" title="Direct link to 02 Architecture Design">&#x200B;</a></h3>
<p>Traditional compute-storage decoupling approaches typically store both data and meta data in shared storage while centralizing transaction management on a single FE node. However, this design introduces several challenges:</p>
<ul>
<li><strong>Write performance bottlenecks</strong>: The two-phase commit protocol, driven by FE Master, incurs high latency and low throughput.</li>
<li><strong>Small file proliferation</strong>: Frequent meta data writes generate excessive small files, leading to system instability and inflated storage costs.</li>
<li><strong>Scalability constraints</strong>: Since FE nodes manage meta data in memory, an increasing number of Tablets amplifies memory pressure, eventually causing write bottlenecks.</li>
<li><strong>Data deletion risks</strong>: Relying on delta computation with timeout-based mechanisms for deletion introduces challenges in synchronizing writes and deletions. As a result, there is a risk of unintended data loss due to misalignment between ongoing writes and scheduled deletions.</li>
</ul>
<p>Compared to traditional approaches, <strong>Apache Doris</strong> effectively addresses these challenges through <strong>a shared meta data service</strong>:</p>
<ul>
<li><strong>Real-time ingestion</strong>: The meta data service provides a globally consistent view, enabling low-latency, high-throughput writes. Benchmarks show that the Apache Doris compute-storage decoupled mode achieves <strong>100X higher</strong> performance than other solutions at 50 concurrent writes and <strong>11X higher</strong> performance at 500 concurrent writes.</li>
<li><strong>Optimized small file management</strong>: Data is written to shared storage, while meta data is handled by the meta data service. This effectively reduces small file overheads. Tests indicate that the Apache Doris compute-storage decoupled mode generates only <strong>1/2 the number of write files</strong> compared to other industry solutions.</li>
<li><strong>Enhanced scalability</strong>: In future versions of Apache Doris, FE metadata will be moved to the meta data service to eliminate cluster scaling limitations and ensure seamless expansion.</li>
<li><strong>Reliable data deletion</strong>: Doris employs a forward deletion mechanism based on a globally consistent view. This ensures mutual exclusion between writes and deletions, thus eliminating the risk of accidental data loss.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-what-makes-it-stand-out">03 What makes it stand out<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#03-what-makes-it-stand-out" class="hash-link" aria-label="Direct link to 03 What makes it stand out" title="Direct link to 03 What makes it stand out">&#x200B;</a></h3>
<p>The Apache Doris compute-storage decoupled architecture provide values for users in three aspects: cost efficiency, elasticity, and workload isolation.</p>
<p><strong>Firstly, it brings a 90% cost reduction compared to the compute-storage coupled mode.</strong></p>
<ul>
<li><strong>Pay-as-you-go</strong>: Unlike traditional coupled architectures, there&#x2019;s no need to pre-provision compute and storage resources. Storage costs scale with actual usage, while compute resources can be dynamically adjusted based on demand.</li>
<li><strong>Single-replica storage</strong>: Instead of maintaining three replicas in costly block storage, data is stored as a single replica in low-cost object storage, with hot data cached in block storage for performance. This dramatically reduces storage footprint and hardware costs. For example, S3 costs only 25% to 50% of AWS EBS.</li>
<li><strong>Lower resource consumption</strong>: In compute-storage decoupled mode, compaction operations only process a single data replica, thus largely reducing resource usage compared to multi-replica environments.</li>
</ul>
<p><strong>Secondly, with a stateless compute node design, Doris enables on-demand resource scaling to meet fluctuating workloads efficiently.</strong></p>
<ul>
<li><strong>Elastic auto-scaling</strong>: Compute resources can be dynamically scaled to accommodate traffic spikes or workload variations. When demand increases, Doris can rapidly scale out compute nodes; when demand drops, resources scale down automatically, avoiding unnecessary costs.</li>
<li><strong>Fine-grained compute resource allocation</strong>: Doris allows compute nodes to be strategically assigned to specific compute groups based on workload requirements. For example, high-performance nodes handle complex queries and high-concurrency workloads, while standard nodes manage lightweight queries and infrequent requests.</li>
</ul>
<p><strong>Thirdly, Doris provides efficient resource scheduling and workload isolation mechanisms.</strong></p>
<ul>
<li><strong>Cross-business isolation</strong>: Different business units can be assigned dedicated compute groups with physical isolation, so workloads operate on dedicated resources without interference.</li>
<li><strong>Offline workload isolation</strong>: Large-scale batch processing tasks can be segregated into dedicated compute groups, so users can leverage low-cost resources for offline data processing without impacting real-time business performance.</li>
<li><strong>Read-write isolation</strong>: Doris allows dedicated compute groups for read and write operations to ensure consistent query response times even under high write loads.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking-and-comparison">Benchmarking and comparison<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#benchmarking-and-comparison" class="hash-link" aria-label="Direct link to Benchmarking and comparison" title="Direct link to Benchmarking and comparison">&#x200B;</a></h2>
<p>To provide a clear evaluation of the compute-storage decoupled architecture of Apache Doris, we conducted a series of benchmark tests across multiple dimensions, including data ingestion, query performance, and resource cost efficiency.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="01-ingestion-performance">01 Ingestion performance<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#01-ingestion-performance" class="hash-link" aria-label="Direct link to 01 Ingestion performance" title="Direct link to 01 Ingestion performance">&#x200B;</a></h3>
<p><strong>High-concurrency ingestion</strong></p>
<p>We compared Apache Doris&apos; coupled and decoupled modes with other mainstream solutions under the same compute resources. The tests measured real-time ingestion performance under two levels of concurrency:</p>
<ul>
<li><strong>50 concurrent writes</strong>: Ingesting <strong>250 files</strong>, each containing <strong>20,000 rows</strong>.</li>
<li><strong>500 concurrent writes</strong>: Ingesting <strong>10,000 files</strong>, each containing <strong>500 rows</strong>.</li>
</ul>
<p><strong>Test results:</strong></p>
<ul>
<li>At 50 concurrent writes, Doris&apos; compute-storage decoupled mode performed on par with the coupled mode while achieving <strong>100X the write performance</strong> of other industry compute-storage decoupled solutions.</li>
<li>At 500 concurrent writes, Doris&apos; decoupled mode experienced a slight performance drop compared to the coupled mode, yet still maintained an <strong>11X advantage</strong> over other compute-storage decoupled architectures.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="high-concurrency-ingestion.jpg" src="https://doris.apache.org/assets/images/high-concurrency-ingestion-d5dd1a2bf593d5d956899f9061faafff.jpg" width="2560" height="1696" class="img_ev3q"></p>
<p><strong>Batch data ingestion</strong></p>
<p>To evaluate batch data ingestion efficiency, we conducted tests using <strong>TPC-H 1TB</strong> and <strong>TPC-DS 1TB</strong> datasets, comparing the compute-storage coupled and decoupled modes of Apache Doris. Data was loaded using S3 Load. Under default configurations, multiple tables were ingested sequentially, and the total ingestion time was measured for comparison.</p>
<p>Hardware configuration:</p>
<ul>
<li>Cluster size: 4 compute instances (1 FE, 3 BE)</li>
<li>CPU: 48 cores per instance</li>
<li>Memory: 192GB per instance</li>
<li>Network Bandwidth: 21 Gbps</li>
<li>Storage: Enhanced SSD</li>
</ul>
<p><img decoding="async" loading="lazy" alt="batch-data-ingestion.jpg" src="https://doris.apache.org/assets/images/batch-data-ingestion-31be0ce398e88a036d547d4f118dd0fe.jpg" width="2560" height="1724" class="img_ev3q"></p>
<p>As is shown, even when using a single replica in both architectures, the compute-storage decoupled mode outperforms the coupled mode in batch data ingestion by <strong>20.05%</strong> and <strong>27.98%</strong> in the two benchmarks, respectively. <em>(In real-world deployments, the coupled mode typically adopts a three-replica strategy. This further amplifies the write performance gains of the decoupled mode.)</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-query-performance">02 Query Performance<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#02-query-performance" class="hash-link" aria-label="Direct link to 02 Query Performance" title="Direct link to 02 Query Performance">&#x200B;</a></h3>
<p>In the compute-storage decoupled mode, Apache Doris leverages a multi-tier caching mechanism to accelerate queries. It improves overall query efficiency by speeding up data access and minimizing reliance on shared storage. The cache hierarchy includes:</p>
<ul>
<li><strong>Doris Page Cache</strong>: In-memory caching of decompressed data.</li>
<li><strong>Linux Page Cache</strong>: In-memory caching of compressed data.</li>
<li><strong>Local Disk Cache</strong>: Persistent caching of compressed data.</li>
</ul>
<p>Hardware configuration:</p>
<ul>
<li>Cluster size: 4 compute instances (1 FE, 3 BE)</li>
<li>CPU: 48 cores per instance</li>
<li>Memory: 192GB per instance</li>
<li>Network Bandwidth: 21 Gbps</li>
<li>Storage: Enhanced SSD</li>
</ul>
<p>We conducted performance benchmarking under different caching scenarios in both compute-storage coupled and decoupled modes. Using the TPC-DS 1TB dataset, the test results are as follows:</p>
<p><img decoding="async" loading="lazy" alt="query-performance.jpg" src="https://doris.apache.org/assets/images/query-performance-ab1378fa622ca786bab45122d1fdb148.jpg" width="2560" height="1750" class="img_ev3q"></p>
<ul>
<li><strong>Full cache hit</strong>: We execute the query twice and measure the runtime of the second execution, ensuring that all data is preloaded into the cache. Query performance in compute-storage decoupled mode matches that of the coupled architecture with no performance degradation.</li>
<li><strong>Partial cache hit</strong> (This scenario best reflects real-world usage.): Before the test begins, all caches are cleared, and we measure the runtime of the first execution while data is gradually loaded into the cache. Compared to the coupled architecture, query performance remains nearly identical, with an overall performance overhead of about 10%.</li>
<li><strong>No cache hit</strong>: All caches are cleared before each SQL execution, ensuring that every query runs without cached data. Compared to the coupled architecture, query performance sees an approximate 35% degradation.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="03-resource-cost">03 Resource Cost<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#03-resource-cost" class="hash-link" aria-label="Direct link to 03 Resource Cost" title="Direct link to 03 Resource Cost">&#x200B;</a></h3>
<p><strong>Operational cost for online workloads</strong></p>
<p>Taking a real-world enterprise workload as an example, we compare the cost differences between compute-storage coupled and decoupled modes in Apache Doris.</p>
<ul>
<li><strong>Compute-storage coupled mode</strong>: The dataset in Doris has a size of 100TB per replica, resulting in a total of 300TB with three replicas. To prevent frequent scaling operations from impacting business stability, disk usage is maintained at about 50%. Thus, <strong>the monthly resource cost amounts to $36,962.7</strong> (as detailed below).</li>
</ul>
<p><img decoding="async" loading="lazy" alt="operational-cost-for-online-workloads.jpg" src="https://doris.apache.org/assets/images/operational-cost-for-online-workloads-b35a29cc9978a97e61ee1bbf9b4eefd7.jpg" width="2560" height="794" class="img_ev3q"></p>
<ul>
<li><strong>Compute-storage decoupled mode</strong>: With the same data scale, adopting the compute-storage decoupled model only requires storing a single replica in object storage, while hot data is cached on local disks. As shown below, the monthly resource cost is reduced to <strong>$22,212.65</strong>, achieving a 40% cost savings.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="compute-storage-decoupled-mode.jpg" src="https://doris.apache.org/assets/images/compute-storage-decoupled-mode-4adafd0d76ba5c1b2be6ca48e7ff5783.jpg" width="2954" height="840" class="img_ev3q"></p>
<p><strong>Historical data cost</strong></p>
<p>For example, with 200TB of historical data, the resource utilization under both the compute-storage coupled and decoupled modes is shown below. The coupled model incurs a monthly cost of $48,851.10, whereas the decoupled model reduces the cost to just $4,502.40&#x2014;<strong>cutting expenses by over 90%</strong>.</p>
<p><img decoding="async" loading="lazy" alt="historical-data-cost.jpg" src="https://doris.apache.org/assets/images/historical-data-cost-de9a66084e736214e67a80a659fcc278.jpg" width="3220" height="794" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&apos;s next<a href="https://doris.apache.org/blog/doris-compute-storage-decoupled#whats-next" class="hash-link" aria-label="Direct link to What&apos;s next" title="Direct link to What&apos;s next">&#x200B;</a></h2>
<p>Powered by compute-storage decoupling, Apache Doris excels in real-time analytics, lakehouse analytics, observability and log storage &amp; analysis. Looking ahead, Apache Doris will continue to enhance its capabilities in this mode. We will introduce new features such as snapshots, time travel, and Cross-Cluster Replication (CCR) support, and achieve stateless FE to further improve system stability and usability.</p>
<p>If you&apos;re interested in Apache Doris&apos; compute-storage decoupled mode and its future development, we invite you to join the <a href="https://apachedoriscommunity.slack.com/archives/C08HZUZ37KJ" target="_blank" rel="noopener noreferrer">#compute-storage-decoupled</a> channel in the Apache Doris Slack community, where you can connect with core developers and users. We look forward to your thoughts and contributions!</p>
<p><a href="https://www.linkedin.com/events/exploringapachedoriscompute-sto7308127084457902080/comments/" target="_blank" rel="noopener noreferrer">Join us live on March 27</a> for more insights into the Apache Doris compute-storage decoupled mode!</p></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.4 Released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.4</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.4</guid>
            <pubDate>Fri, 28 Feb 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community members, the Apache Doris 3.0.4 version was officially released on February 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Storage Efficiency, Compute-Storage Separation, Query Optimizer and Asynchronous Materialized Views, and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.4 Released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-02-28T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">February 28, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.4 version was officially released on February 02, 2025, this version further enhances the performance and stability of the system.</p>
<ul>
<li>
<p><a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-3.0.4#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li>
<p>In the Audit log, the <code>force</code> flag is retained for <code>drop table</code> and <code>drop database</code> statements.  <a href="https://github.com/apache/doris/pull/43227" target="_blank" rel="noopener noreferrer">#43227</a></p>
</li>
<li>
<p>When exporting data to Parquet/ORC formats, the <code>bitmap</code>, <code>quantile_state</code>, and <code>hll</code> types are exported in Binary format. Additionally, support has been added for exporting <code>jsonb</code> and <code>variant</code> types, which are exported as <code>string</code>. <a href="https://github.com/apache/doris/pull/44041" target="_blank" rel="noopener noreferrer">#44041</a></p>
<ul>
<li>For more information, please refer to documentation: <a href="https://doris.apache.org/docs/3.0/data-operate/export/export-overview" target="_blank" rel="noopener noreferrer">Export Overview - Apache Doris</a></li>
</ul>
</li>
<li>
<p>When querying a data source with case-insensitive table names (such as Hive) through External Catalog, in previous versions, you can use any case to query the table name, but in version 3.0.4, Doris&apos;s own table name case sensitivity policy will be strictly followed.</p>
</li>
<li>
<p>The Hudi JNI Scanner has been replaced from Spark API to Hadoop API to enhance compatibility. Users can switch by setting the session variable <code>set hudi_jni_scanner=spark/hadoop</code>. <a href="https://github.com/apache/doris/pull/44396" target="_blank" rel="noopener noreferrer">#44396</a></p>
</li>
<li>
<p>The use of <code>auto bucket</code> in Colocate tables is prohibited.  <a href="https://github.com/apache/doris/pull/44396" target="_blank" rel="noopener noreferrer">#44396</a></p>
</li>
<li>
<p>Paimon cache has been added to the Catalog, eliminating real-time data queries.  <a href="https://github.com/apache/doris/pull/44911" target="_blank" rel="noopener noreferrer">#44911 </a></p>
</li>
<li>
<p>The default value of <code>max_broker_concurrency</code> has been increased to improve performance for large-scale data imports with Broker Load. <a href="https://github.com/apache/doris/pull/44929" target="_blank" rel="noopener noreferrer">#44929</a></p>
</li>
<li>
<p>The default value of the <code>storage medium</code> for Auto Partition partitions has been changed to the attribute value of the current table&apos;s <code>storage medium</code>, rather than using the system default value. <a href="https://github.com/apache/doris/pull/45955" target="_blank" rel="noopener noreferrer">#45955</a></p>
</li>
<li>
<p>Column updates are prohibited during Schema Change execution for Key columns. <a href="https://github.com/apache/doris/pull/46347" target="_blank" rel="noopener noreferrer">#46347</a></p>
</li>
<li>
<p>For Key columns containing auto-increment columns, support has been added to allow column updates without providing the auto-increment column.  <a href="https://github.com/apache/doris/pull/44528" target="_blank" rel="noopener noreferrer">#44528</a></p>
</li>
<li>
<p>The FE ID generator strategy has been switched to a time-based approach, and IDs no longer start from 10000. <a href="https://github.com/apache/doris/pull/44790" target="_blank" rel="noopener noreferrer">#44790</a></p>
</li>
<li>
<p>In the compute-storage separation mode, the default stale rowset recycling delay for Compaction has been reduced to 1800 seconds to decrease the recycling interval. This may cause large queries to fail in extreme scenarios, and adjustments can be made as needed. <a href="https://github.com/apache/doris/pull/45460" target="_blank" rel="noopener noreferrer">#45460</a></p>
</li>
<li>
<p>The <code>show cache hotspot</code> statement has been disabled in compute-storage separation mode, and direct access to system tables is required. <a href="https://github.com/apache/doris/pull/47332" target="_blank" rel="noopener noreferrer">#47332</a></p>
</li>
<li>
<p>Deleting the system-created <code>admin</code> user is prohibited. <a href="https://github.com/apache/doris/pull/44751" target="_blank" rel="noopener noreferrer">#44751</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.4#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.4#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Optimized the issue of Routine Load tasks frequently timing out due to a small <code>max_match_interval</code> setting. <a href="https://github.com/apache/doris/pull/46292" target="_blank" rel="noopener noreferrer">#46292</a></li>
<li>Improved performance for Broker Load when importing multiple compressed files. <a href="https://github.com/apache/doris/pull/43975" target="_blank" rel="noopener noreferrer">#43975</a></li>
<li>Increased the default value of <code>webserver_num_workers</code> to enhance Stream Load performance. <a href="https://github.com/apache/doris/pull/46593" target="_blank" rel="noopener noreferrer">#46593</a></li>
<li>Optimized the load imbalance issue for Routine Load import tasks during BE node scaling. <a href="https://github.com/apache/doris/pull/44798" target="_blank" rel="noopener noreferrer">#44798</a></li>
<li>Improved the use of Routine Load thread pools to prevent timeouts from affecting queries. <a href="https://github.com/apache/doris/pull/45039" target="_blank" rel="noopener noreferrer">#45039</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-separation">Compute-Storage Separation<a href="https://doris.apache.org/blog/release-note-3.0.4#compute-storage-separation" class="hash-link" aria-label="Direct link to Compute-Storage Separation" title="Direct link to Compute-Storage Separation">&#x200B;</a></h3>
<ul>
<li>Enhanced the stability and observability of the Meta-service. <a href="https://github.com/apache/doris/pull/44036" target="_blank" rel="noopener noreferrer">#44036</a>, <a href="https://github.com/apache/doris/pull/45617" target="_blank" rel="noopener noreferrer">#45617</a>, <a href="https://github.com/apache/doris/pull/45255" target="_blank" rel="noopener noreferrer">#45255</a>, <a href="https://github.com/apache/doris/pull/45068" target="_blank" rel="noopener noreferrer">#45068</a></li>
<li>Optimized File Cache by adding an early eviction strategy, reducing lock time, and improving query performance. <a href="https://github.com/apache/doris/pull/47473" target="_blank" rel="noopener noreferrer">#47473</a>, <a href="https://github.com/apache/doris/pull/45678" target="_blank" rel="noopener noreferrer">#45678</a>, <a href="https://github.com/apache/doris/pull/47472" target="_blank" rel="noopener noreferrer">#47472</a></li>
<li>Improved initialization checks and queue transitions for File Cache to enhance stability. <a href="https://github.com/apache/doris/pull/44004" target="_blank" rel="noopener noreferrer">#44004</a>, <a href="https://github.com/apache/doris/pull/44429" target="_blank" rel="noopener noreferrer">#44429</a>, <a href="https://github.com/apache/doris/pull/45057" target="_blank" rel="noopener noreferrer">#45057</a>, <a href="https://github.com/apache/doris/pull/47229" target="_blank" rel="noopener noreferrer">#47229</a></li>
<li>Increased the speed of HDFS data recycling. <a href="https://github.com/apache/doris/pull/46393" target="_blank" rel="noopener noreferrer">#46393</a></li>
<li>Optimized performance issues when the FE acquires compute groups during ultra-high-frequency imports.  <a href="https://github.com/apache/doris/pull/47203" target="_blank" rel="noopener noreferrer">#47203</a></li>
<li>Improved several import-related parameters for primary key tables in compute-storage separation to enhance the stability of real-time high-concurrency imports. <a href="https://github.com/apache/doris/pull/47295" target="_blank" rel="noopener noreferrer">#47295</a>, <a href="https://github.com/apache/doris/pull/46750" target="_blank" rel="noopener noreferrer">#46750</a>, <a href="https://github.com/apache/doris/pull/46365" target="_blank" rel="noopener noreferrer">#46365</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.4#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Supported reading Hive tables in JSON format. <a href="https://github.com/apache/doris/pull/46393" target="_blank" rel="noopener noreferrer">#43469</a></p>
<ul>
<li>For more information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/file-formats/text#json" target="_blank" rel="noopener noreferrer">Text/CSV/JSON - Apache Doris</a></li>
</ul>
</li>
<li>
<p>Introduced the session variable <code>enable_text_validate_utf8</code> to skip UTF-8 encoding checks for CSV formats.  <a href="https://github.com/apache/doris/pull/45537" target="_blank" rel="noopener noreferrer">#45537</a></p>
<ul>
<li>For more information, please refer to documentation: <a href="https://doris.apache.org/docs/dev/lakehouse/file-formats/text#character-set" target="_blank" rel="noopener noreferrer">Text/CSV/JSON - Apache Doris</a></li>
</ul>
</li>
<li>
<p>Updated the Hudi version to 0.15 and optimized query planning performance for Hudi tables.</p>
</li>
<li>
<p>Improved read performance for MaxCompute partitioned tables.  <a href="https://github.com/apache/doris/pull/45148" target="_blank" rel="noopener noreferrer">#45148</a></p>
</li>
<li>
<p>Optimized performance for Parquet file delayed materialization under high filter rates.  <a href="https://github.com/apache/doris/pull/46183" target="_blank" rel="noopener noreferrer">#46183</a></p>
</li>
<li>
<p>Supported delayed materialization for complex Parquet types. <a href="https://github.com/apache/doris/pull/44098" target="_blank" rel="noopener noreferrer">#44098</a></p>
</li>
<li>
<p>Optimized predicate pushdown logic for ORC types, supporting more predicate conditions for index filtering. <a href="https://github.com/apache/doris/pull/43255" target="_blank" rel="noopener noreferrer">#43255</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.4#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Supported more scenarios for aggregate roll-up rewriting.  <a href="https://github.com/apache/doris/pull/44412" target="_blank" rel="noopener noreferrer">#44412</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.4#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Improved partition pruning performance. <a href="https://github.com/apache/doris/pull/46261" target="_blank" rel="noopener noreferrer">#46261</a></li>
<li>Added rules to eliminate <code>group by</code> keys based on data characteristics.  <a href="https://github.com/apache/doris/pull/43391" target="_blank" rel="noopener noreferrer">#43391</a></li>
<li>Adaptively adjusted the wait time for Runtime Filters based on the target table size. <a href="https://github.com/apache/doris/pull/42640" target="_blank" rel="noopener noreferrer">#42640</a></li>
<li>Improved the ability to push down aggregations in joins to fit more scenarios. <a href="https://github.com/apache/doris/pull/43856" target="_blank" rel="noopener noreferrer">#43856</a>, <a href="https://github.com/apache/doris/pull/43380" target="_blank" rel="noopener noreferrer">#43380</a></li>
<li>Improved Limit pushdown for aggregations to fit more scenarios. <a href="https://github.com/apache/doris/pull/44042" target="_blank" rel="noopener noreferrer">#44042</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-3.0.4#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Optimized startup scripts for FE, BE, and MS processes to provide clearer output. <a href="https://github.com/apache/doris/pull/45610" target="_blank" rel="noopener noreferrer">#45610</a>, <a href="https://github.com/apache/doris/pull/45490" target="_blank" rel="noopener noreferrer">#45490</a>, <a href="https://github.com/apache/doris/pull/45883" target="_blank" rel="noopener noreferrer">#45883</a></li>
<li>The case sensitivity of table names in <code>show tables</code> now matches MySQL behavior. <a href="https://github.com/apache/doris/pull/46030" target="_blank" rel="noopener noreferrer">#46030</a></li>
<li><code>show index</code> now supports arbitrary target table types. <a href="https://github.com/apache/doris/pull/45861" target="_blank" rel="noopener noreferrer">#45861</a></li>
<li><code>information_schema.columns</code> now supports displaying default values. <a href="https://github.com/apache/doris/pull/44849" target="_blank" rel="noopener noreferrer">#44849</a></li>
<li><code>information_schema.views</code> now supports displaying view definitions. <a href="https://github.com/apache/doris/pull/45857" target="_blank" rel="noopener noreferrer">#45857</a></li>
<li>Supported the MySQL protocol <code>COM_RESET_CONNECTION</code> command. <a href="https://github.com/apache/doris/pull/44747" target="_blank" rel="noopener noreferrer">#44747</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.4#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.4#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed potential memory errors during the import process for aggregate table models.  <a href="https://github.com/apache/doris/pull/46997" target="_blank" rel="noopener noreferrer">#46997</a></li>
<li>Resolved the issue of Routine Load offset loss during FE master node restarts in compute-storage separation mode. <a href="https://github.com/apache/doris/pull/46566" target="_blank" rel="noopener noreferrer">#46566</a></li>
<li>Fixed memory leaks in FE Observer nodes during batch import scenarios in compute-storage mode. <a href="https://github.com/apache/doris/pull/47244" target="_blank" rel="noopener noreferrer">#47244</a></li>
<li>Resolved the issue of Cumulative Point rollback during Full Compaction with Order Data Compaction. <a href="https://github.com/apache/doris/pull/44359" target="_blank" rel="noopener noreferrer">#44359</a></li>
<li>Fixed the issue where Delete operations could temporarily prevent Tablet Compaction scheduling. <a href="https://github.com/apache/doris/pull/43466" target="_blank" rel="noopener noreferrer">#43466</a></li>
<li>Resolved incorrect Tablet states after Schema Change in multi-compute-cluster scenarios. <a href="https://github.com/apache/doris/pull/45821" target="_blank" rel="noopener noreferrer">#45821</a></li>
<li>Fixed the potential NPE error when performing Column Rename Schema Change on primary key tables with <code>sequence_type</code>. <a href="https://github.com/apache/doris/pull/46906" target="_blank" rel="noopener noreferrer">#46906</a></li>
<li><strong>Data Correctness</strong>: Fixed correctness issues for primary key tables when importing partial column updates containing DELETE SIGN columns. <a href="https://github.com/apache/doris/pull/46194" target="_blank" rel="noopener noreferrer">#46194</a></li>
<li>Resolved potential memory leaks in FE when Publish tasks for primary key tables were continuously stuck. <a href="https://github.com/apache/doris/pull/44846" target="_blank" rel="noopener noreferrer">#44846</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.4#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where File Cache size could exceed the table data size. <a href="https://github.com/apache/doris/pull/46561" target="_blank" rel="noopener noreferrer">#46561</a>, <a href="https://github.com/apache/doris/pull/46390" target="_blank" rel="noopener noreferrer">#46390</a></li>
<li>Resolved upload failures at the 5MB boundary during data uploads.  <a href="https://github.com/apache/doris/pull/47333" target="_blank" rel="noopener noreferrer">#47333</a></li>
<li>Enhanced robustness by adding more parameter checks for several <code>alter</code> operations in Storage Vault.  <a href="https://github.com/apache/doris/pull/45155" target="_blank" rel="noopener noreferrer">#45155</a>, <a href="https://github.com/apache/doris/pull/45156" target="_blank" rel="noopener noreferrer">#45156</a>, <a href="https://github.com/apache/doris/pull/46625" target="_blank" rel="noopener noreferrer">#46625</a>, <a href="https://github.com/apache/doris/pull/47078" target="_blank" rel="noopener noreferrer">#47078</a>, <a href="https://github.com/apache/doris/pull/45685" target="_blank" rel="noopener noreferrer">#45685</a>, <a href="https://github.com/apache/doris/pull/46779" target="_blank" rel="noopener noreferrer">#46779</a></li>
<li>Resolved issues with data recycling failures or slow recycling due to improper Storage Vault configurations. <a href="https://github.com/apache/doris/pull/46798" target="_blank" rel="noopener noreferrer">#46798</a>, <a href="https://github.com/apache/doris/pull/47536" target="_blank" rel="noopener noreferrer">#47536</a>, <a href="https://github.com/apache/doris/pull/47475" target="_blank" rel="noopener noreferrer">#47475</a>, <a href="https://github.com/apache/doris/pull/47324" target="_blank" rel="noopener noreferrer">#47324</a>, <a href="https://github.com/apache/doris/pull/45072" target="_blank" rel="noopener noreferrer">#45072</a></li>
<li>Fixed the issue where data recycling could stall, preventing timely recycling.  <a href="https://github.com/apache/doris/pull/45760" target="_blank" rel="noopener noreferrer">#45760</a></li>
<li>Resolved incorrect retries for MTTM-230 errors in compute-storage separation mode.  <a href="https://github.com/apache/doris/pull/47370" target="_blank" rel="noopener noreferrer">#47370</a>, <a href="https://github.com/apache/doris/pull/47326" target="_blank" rel="noopener noreferrer">#47326</a></li>
<li>Fixed the issue where Group Commit WAL was not fully replayed during BE decommissioning in compute-storage separation mode.  <a href="https://github.com/apache/doris/pull/47187" target="_blank" rel="noopener noreferrer">#47187</a></li>
<li>Resolved the issue where Tablet Meta exceeding 2GB rendered MS unavailable.  <a href="https://github.com/apache/doris/pull/44780" target="_blank" rel="noopener noreferrer">#44780</a></li>
<li><strong>Data Correctness</strong>: Fixed two duplicate Key issues in primary key tables in compute-storage separation mode. <a href="https://github.com/apache/doris/pull/46039" target="_blank" rel="noopener noreferrer">#46039</a>, <a href="https://github.com/apache/doris/pull/44975" target="_blank" rel="noopener noreferrer">#44975</a></li>
<li>Resolved the issue where Base Compaction could continuously fail due to large Delete Bitmaps in primary key tables during high-frequency real-time imports.  <a href="https://github.com/apache/doris/pull/46969" target="_blank" rel="noopener noreferrer">#46969</a></li>
<li>Modified incorrect retry logic for Schema Change in primary key tables in compute-storage separation mode to enhance robustness. <a href="https://github.com/apache/doris/pull/46748" target="_blank" rel="noopener noreferrer">#46748</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.4#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hive">Hive<a href="https://doris.apache.org/blog/release-note-3.0.4#hive" class="hash-link" aria-label="Direct link to Hive" title="Direct link to Hive">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where Hive views created by Spark could not be queried.  <a href="https://github.com/apache/doris/pull/43553" target="_blank" rel="noopener noreferrer">#43553</a></li>
<li>Resolved the issue where certain Hive Transaction tables could not be read correctly. <a href="https://github.com/apache/doris/pull/45753" target="_blank" rel="noopener noreferrer">#45753</a></li>
<li>Fixed the issue where partition pruning failed for Hive tables with special characters in partitions.  <a href="https://github.com/apache/doris/pull/42906" target="_blank" rel="noopener noreferrer">#42906</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iceberg">Iceberg<a href="https://doris.apache.org/blog/release-note-3.0.4#iceberg" class="hash-link" aria-label="Direct link to Iceberg" title="Direct link to Iceberg">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where Iceberg tables could not be created in Kerberos authentication environments.  <a href="https://github.com/apache/doris/pull/43445" target="_blank" rel="noopener noreferrer">#43445</a></li>
<li>Resolved the issue where <code>count(*)</code> queries were inaccurate for Iceberg tables with dangling deletes. <a href="https://github.com/apache/doris/pull/44039" target="_blank" rel="noopener noreferrer">#44039</a></li>
<li>Fixed the issue where query errors occurred due to mismatched column names in Iceberg tables. <a href="https://github.com/apache/doris/pull/44470" target="_blank" rel="noopener noreferrer">#44470</a></li>
<li>Resolved the issue where Iceberg tables could not be read after partition modifications. <a href="https://github.com/apache/doris/pull/45367" target="_blank" rel="noopener noreferrer">#45367</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="paimon">Paimon<a href="https://doris.apache.org/blog/release-note-3.0.4#paimon" class="hash-link" aria-label="Direct link to Paimon" title="Direct link to Paimon">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where Paimon Catalog could not access Alibaba Cloud OSS-HDFS.  <a href="https://github.com/apache/doris/pull/42585" target="_blank" rel="noopener noreferrer">#42585</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hudi">Hudi<a href="https://doris.apache.org/blog/release-note-3.0.4#hudi" class="hash-link" aria-label="Direct link to Hudi" title="Direct link to Hudi">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where partition pruning failed for Hudi tables in certain scenarios.  <a href="https://github.com/apache/doris/pull/44669" target="_blank" rel="noopener noreferrer">#44669</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jdbc">JDBC<a href="https://doris.apache.org/blog/release-note-3.0.4#jdbc" class="hash-link" aria-label="Direct link to JDBC" title="Direct link to JDBC">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where tables could not be retrieved using JDBC Catalog after enabling case-insensitive table names.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="maxcompute">MaxCompute<a href="https://doris.apache.org/blog/release-note-3.0.4#maxcompute" class="hash-link" aria-label="Direct link to MaxCompute" title="Direct link to MaxCompute">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where partition pruning failed for MaxCompute tables in certain scenarios. <a href="https://github.com/apache/doris/pull/44508" target="_blank" rel="noopener noreferrer">#44508</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="others-1">Others<a href="https://doris.apache.org/blog/release-note-3.0.4#others-1" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h4>
<ul>
<li>Fixed the issue where export tasks caused memory leaks in FE. <a href="https://github.com/apache/doris/pull/44019" target="_blank" rel="noopener noreferrer">#44019</a></li>
<li>Resolved the issue where S3 object storage could not be accessed via HTTPS protocol. <a href="https://github.com/apache/doris/pull/44242" target="_blank" rel="noopener noreferrer">#44242</a></li>
<li>Fixed the issue where Kerberos authentication tickets could not be automatically refreshed.  <a href="https://github.com/apache/doris/pull/44916" target="_blank" rel="noopener noreferrer">#44916</a></li>
<li>Resolved the issue where reading Hadoop Block compressed format files failed. <a href="https://github.com/apache/doris/pull/45289" target="_blank" rel="noopener noreferrer">#45289</a></li>
<li>When querying ORC format data, CHAR type predicates are no longer pushed down to avoid potential result errors. <a href="https://github.com/apache/doris/pull/45484" target="_blank" rel="noopener noreferrer">#45484</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.4#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where transparent query rewriting could lead to planning or result errors in extreme scenarios.  <a href="https://github.com/apache/doris/pull/44575" target="_blank" rel="noopener noreferrer">#44575</a>, <a href="https://github.com/apache/doris/pull/45744" target="_blank" rel="noopener noreferrer">#45744</a></li>
<li>Resolved the issue where multiple build tasks could be generated during asynchronous materialized view scheduling in extreme scenarios. <a href="https://github.com/apache/doris/pull/46020" target="_blank" rel="noopener noreferrer">#46020</a>, <a href="https://github.com/apache/doris/pull/46280" target="_blank" rel="noopener noreferrer">#46280</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.4#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where some expression rewrites could produce incorrect expressions. <a href="https://github.com/apache/doris/pull/44770" target="_blank" rel="noopener noreferrer">#44770</a>, <a href="https://github.com/apache/doris/pull/44920" target="_blank" rel="noopener noreferrer">#44920</a>, <a href="https://github.com/apache/doris/pull/45922" target="_blank" rel="noopener noreferrer">#45922</a>, <a href="https://github.com/apache/doris/pull/45596" target="_blank" rel="noopener noreferrer">#45596</a></li>
<li>Resolved occasional incorrect results from SQL Cache. <a href="https://github.com/apache/doris/pull/44782" target="_blank" rel="noopener noreferrer">#44782</a>, <a href="https://github.com/apache/doris/pull/44631" target="_blank" rel="noopener noreferrer">#44631</a>, <a href="https://github.com/apache/doris/pull/46443" target="_blank" rel="noopener noreferrer">#46443</a>, <a href="https://github.com/apache/doris/pull/47266" target="_blank" rel="noopener noreferrer">#47266</a></li>
<li>Fixed the issue where limit pushdown for aggregation operators could produce incorrect results in some scenarios. <a href="https://github.com/apache/doris/pull/45369" target="_blank" rel="noopener noreferrer">#45369</a></li>
<li>Resolved the issue where delayed materialization optimization could produce incorrect execution plans in some scenarios. <a href="https://github.com/apache/doris/pull/45693" target="_blank" rel="noopener noreferrer">#45693</a>, <a href="https://github.com/apache/doris/pull/46551" target="_blank" rel="noopener noreferrer">#46551</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.4#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where regular expressions and <code>like</code> functions produced incorrect results with special characters. <a href="https://github.com/apache/doris/pull/44547" target="_blank" rel="noopener noreferrer">#44547</a></li>
<li>Resolved the issue where SQL Cache results could be incorrect when switching databases. <a href="https://github.com/apache/doris/pull/44782" target="_blank" rel="noopener noreferrer">#44782</a></li>
<li>Fixed a series of Arrow Flight-related issues. <a href="https://github.com/apache/doris/pull/45023" target="_blank" rel="noopener noreferrer">#45023</a>, <a href="https://github.com/apache/doris/pull/43929" target="_blank" rel="noopener noreferrer">#43929</a></li>
<li>Resolved the issue where results were incorrect when the Hash table for HashJoin exceeded 4GB in some cases. <a href="https://github.com/apache/doris/pull/46461" target="_blank" rel="noopener noreferrer">#46461</a></li>
<li>Fixed the overflow issue of the <code>convert_to</code> function with Chinese characters. <a href="https://github.com/apache/doris/pull/46405" target="_blank" rel="noopener noreferrer">#46405</a></li>
<li>Resolved the issue where results could be incorrect in extreme scenarios when <code>group by</code> was used with Limit. <a href="https://github.com/apache/doris/pull/47844" target="_blank" rel="noopener noreferrer">#47844</a></li>
<li>Fixed the issue where results could be incorrect when accessing certain system tables. <a href="https://github.com/apache/doris/pull/47498" target="_blank" rel="noopener noreferrer">#47498</a></li>
<li>Resolved the issue where the <code>percentile</code> function could cause system crashes. <a href="https://github.com/apache/doris/pull/47068" target="_blank" rel="noopener noreferrer">#47068</a></li>
<li>Fixed the performance degradation issue for single-table queries with Limit. <a href="https://github.com/apache/doris/pull/46090" target="_blank" rel="noopener noreferrer">#46090</a></li>
<li>Resolved the issue where <code>StDistanceSphere</code> and <code>StAngleSphere</code> functions caused system crashes. <a href="https://github.com/apache/doris/pull/45508" target="_blank" rel="noopener noreferrer">#45508</a></li>
<li>Fixed the issue where <code>map_agg</code> results were incorrect. <a href="https://github.com/apache/doris/pull/40454" target="_blank" rel="noopener noreferrer">#40454</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.4#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bloomfilter-index">BloomFilter Index<a href="https://doris.apache.org/blog/release-note-3.0.4#bloomfilter-index" class="hash-link" aria-label="Direct link to BloomFilter Index" title="Direct link to BloomFilter Index">&#x200B;</a></h4>
<ul>
<li>Fixed the exception caused by large parameters in BloomFilter Index. <a href="https://github.com/apache/doris/pull/45780" target="_blank" rel="noopener noreferrer">#45780</a></li>
<li>Resolved the issue of high memory usage during BloomFilter Index writes. <a href="https://github.com/apache/doris/pull/45833" target="_blank" rel="noopener noreferrer">#45833</a></li>
<li>Fixed the issue where BloomFilter Index was not correctly deleted when columns were dropped. <a href="https://github.com/apache/doris/pull/44361" target="_blank" rel="noopener noreferrer">#44361</a>, <a href="https://github.com/apache/doris/pull/43378" target="_blank" rel="noopener noreferrer">#43378</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-3.0.4#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h4>
<ul>
<li>Fixed the occasional crash during inverted index construction. <a href="https://github.com/apache/doris/pull/43246" target="_blank" rel="noopener noreferrer">#43246</a></li>
<li>Resolved the issue where words with zero occurrences occupied space during inverted index merging. <a href="https://github.com/apache/doris/pull/43113" target="_blank" rel="noopener noreferrer">#43113</a></li>
<li>Prevented abnormal large values in Index Size statistics. <a href="https://github.com/apache/doris/pull/46549" target="_blank" rel="noopener noreferrer">#46549</a></li>
<li>Fixed the issue with inverted indexes for VARIANT type fields. <a href="https://github.com/apache/doris/pull/43375" target="_blank" rel="noopener noreferrer">#43375</a></li>
<li>Optimized local cache locality for inverted indexes to improve cache hit rates. <a href="https://github.com/apache/doris/pull/46518" target="_blank" rel="noopener noreferrer">#46518</a></li>
<li>Added the metric <code>NumInvertedIndexRemoteIOTotal</code> to query profiles for remote storage reads of inverted indexes. <a href="https://github.com/apache/doris/pull/45675" target="_blank" rel="noopener noreferrer">#45675</a>, <a href="https://github.com/apache/doris/pull/44863" target="_blank" rel="noopener noreferrer">#44863</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="others-2">Others<a href="https://doris.apache.org/blog/release-note-3.0.4#others-2" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h4>
<ul>
<li>Fixed the crash issue of the <code>ipv6_cidr_to_range</code> function with special NULL data. <a href="https://github.com/apache/doris/pull/44700" target="_blank" rel="noopener noreferrer">#44700</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions">Permissions<a href="https://doris.apache.org/blog/release-note-3.0.4#permissions" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>When granting <code>CREATE_PRIV</code>, the existence of the corresponding resource is no longer checked. <a href="https://github.com/apache/doris/pull/45125" target="_blank" rel="noopener noreferrer">#45125</a></li>
<li>Fixed the issue where queries on views with permissions could fail due to missing permissions for referenced tables in extreme scenarios. <a href="https://github.com/apache/doris/pull/44621" target="_blank" rel="noopener noreferrer">#44621</a></li>
<li>Resolved the issue where permission checks for <code>use db</code> did not distinguish between internal and external Catalogs. <a href="https://github.com/apache/doris/pull/45720" target="_blank" rel="noopener noreferrer">#45720</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.8 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.8</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.8</guid>
            <pubDate>Fri, 24 Jan 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[This version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Query Optimizer and Execution Engine, Storage Management, and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.8 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2025-01-24T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">January 24, 2025</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear Community, <strong>Apache Doris version 2.1.8 was officially released on January 24, 2025.</strong> This version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Query Optimizer and Execution Engine, Storage Management, and more.</p>
<ul>
<li>
<p><a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href="https://github.com/apache/doris/releases/tag/2.1.8-rc01" target="_blank" rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-2.1.8#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<ul>
<li>When querying a data source with case-insensitive table names (such as Hive) through External Catalog, in previous versions, you can use any case to query the table name, but in version 2.1.8, Doris&apos;s own table name case sensitivity policy will be strictly followed.</li>
<li>Add the environment variable <code>SKIP_CHECK_ULIMIT</code> to skip the ulimit value verification check within the BE process. This is only available to applications in the Docker quick start scenario. <a href="https://github.com/apache/doris/pull/45267" target="_blank" rel="noopener noreferrer">#45267</a></li>
<li>Add the <code>enable_cooldown_replica_affinity</code> session variable to control the selection of replica affinity for queries under cold - hot separation.</li>
<li>In FE, add the configurations <code>restore_job_compressed_serialization</code> and <code>backup_job_compressed_serialization</code> to solve the OOM problem of FE during backup and restore operations when the number of db tablets is extremely large. By default, these configurations are disabled, and once enabled, they cannot be downgraded.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-2.1.8#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<ul>
<li>The Arrow flight protocol supports accessing BE through a load - balancing device. <a href="https://github.com/apache/doris/pull/43281" target="_blank" rel="noopener noreferrer">#43281</a></li>
<li>Now lambda expressions support capturing external columns (#45186).<a href="https://github.com/apache/doris/pull/45186" target="_blank" rel="noopener noreferrer">#45186</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.8#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.8#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Update the Hudi version to 0.15. And optimize the query planning performance of Hudi tables.</li>
<li>Optimize the read performance of MaxCompute partitioned tables. <a href="https://github.com/apache/doris/pull/45148" target="_blank" rel="noopener noreferrer">#45148</a></li>
<li>Support the session variable <code>enable_text_validate_utf8</code>, which can ignore the UTF8 encoding detection in CSV format. <a href="https://github.com/apache/doris/pull/45537" target="_blank" rel="noopener noreferrer">#45537</a></li>
<li>Optimize the performance of Parquet file lazy materialization under high - filtering - rate conditions. <a href="https://github.com/apache/doris/pull/46183" target="_blank" rel="noopener noreferrer">#46183</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-2.1.8#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Now it supports manually refreshing partitions that do not exist in an asynchronous materialized view <a href="https://github.com/apache/doris/pull/45290" target="_blank" rel="noopener noreferrer">#45290</a>.</li>
<li>Optimize the performance of transparent rewrite planning <a href="https://github.com/apache/doris/pull/44786" target="_blank" rel="noopener noreferrer">#44786</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.8#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Improve the adaptive ability of runtime filters <a href="https://github.com/apache/doris/pull/42640" target="_blank" rel="noopener noreferrer">#42640</a>.</li>
<li>Add the ability to generate original column filter conditions from filter conditions on <code>max/min</code> aggregate function columns <a href="https://github.com/apache/doris/pull/39252" target="_blank" rel="noopener noreferrer">#39252</a></li>
<li>Add the ability to extract single - side filter conditions from join predicates <a href="https://github.com/apache/doris/pull/38479" target="_blank" rel="noopener noreferrer">#38479</a>.</li>
<li>Optimize the ability of predicate derivation on set operators to better generate filter predicates <a href="https://github.com/apache/doris/pull/39450" target="_blank" rel="noopener noreferrer">#39450</a>.</li>
<li>Optimize the exception handling ability of statistic information collection and usage to avoid generating unexpected execution plans when collection exceptions occur. <a href="https://github.com/apache/doris/pull/43009" target="_blank" rel="noopener noreferrer">#43009</a> <a href="https://github.com/apache/doris/pull/43776" target="_blank" rel="noopener noreferrer">#43776</a> <a href="https://github.com/apache/doris/pull/43865" target="_blank" rel="noopener noreferrer">#43865</a> <a href="https://github.com/apache/doris/pull/42104" target="_blank" rel="noopener noreferrer">#42104</a> <a href="https://github.com/apache/doris/pull/42399" target="_blank" rel="noopener noreferrer">#42399</a> <a href="https://github.com/apache/doris/pull/41729" target="_blank" rel="noopener noreferrer">#41729</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.8#query-execution-engine" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Optimize the execution of queries with <code>limit</code> to end faster and avoid unnecessary data scanning <a href="https://github.com/apache/doris/pull/44255" target="_blank" rel="noopener noreferrer">#44255</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.8#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>CCR supports more comprehensive operations, such as <code>rename table</code>, <code>rename column</code>, <code>modify comment</code>, <code>drop view</code>, <code>drop rollup</code>, etc.</li>
<li>Improve the accuracy of the broker load import progress and the performance when importing multiple compressed files.</li>
<li>Improve the routine load timeout strategy and thread - pool usage to prevent routine load timeout failures and impacts on queries.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.8#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>The Docker quick - start image supports starting without setting environment parameters. Add the environment variable <code>SKIP_CHECK_ULIMIT</code> to skip the <code>start_be.sh</code> script and the swap, <code>max_map_count</code>, ulimit - related verification checks within the BE process. This is only applicable to applications in the Docker quick - start scenario.  <a href="https://github.com/apache/doris/pull/45269" target="_blank" rel="noopener noreferrer">#45269</a></li>
<li>Add the new LDAP configuration <code>ldap_group_filter</code> for custom group filtering. <a href="https://github.com/apache/doris/pull/43292" target="_blank" rel="noopener noreferrer">#43292</a></li>
<li>Optimize performance when using ranger. <a href="https://github.com/apache/doris/pull/41207" target="_blank" rel="noopener noreferrer">#41207</a></li>
<li>Fix the inaccurate statistics of <code>scan bytes</code> in the audit log. <a href="https://github.com/apache/doris/pull/45167" target="_blank" rel="noopener noreferrer">#45167</a></li>
<li>Now, the default values of columns can be correctly displayed in the <code>COLUMNS</code> system table. <a href="https://github.com/apache/doris/pull/44849" target="_blank" rel="noopener noreferrer">#44849</a></li>
<li>Now, the definition of views can be correctly displayed in the <code>VIEWS</code> system table. <a href="https://github.com/apache/doris/pull/45857" target="_blank" rel="noopener noreferrer">#45857</a></li>
<li>Now, the <code>admin</code> user cannot be deleted. <a href="https://github.com/apache/doris/pull/44751" target="_blank" rel="noopener noreferrer">#44751</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-2.1.8#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.8#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hive">Hive<a href="https://doris.apache.org/blog/release-note-2.1.8#hive" class="hash-link" aria-label="Direct link to Hive" title="Direct link to Hive">&#x200B;</a></h4>
<ul>
<li>Fix the problem of being unable to query Hive views created by Spark. <a href="https://github.com/apache/doris/pull/43553" target="_blank" rel="noopener noreferrer">#43553</a></li>
<li>Fix the problem of being unable to correctly read some Hive Transaction tables. <a href="https://github.com/apache/doris/pull/45753" target="_blank" rel="noopener noreferrer">#45753</a></li>
<li>Fix the problem of incorrect partition pruning when Hive table partitions contain special characters. <a href="https://github.com/apache/doris/pull/42906" target="_blank" rel="noopener noreferrer">#42906</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iceberg">Iceberg<a href="https://doris.apache.org/blog/release-note-2.1.8#iceberg" class="hash-link" aria-label="Direct link to Iceberg" title="Direct link to Iceberg">&#x200B;</a></h4>
<ul>
<li>Fix the problem of being unable to create Iceberg tables in a Kerberos - authenticated environment. <a href="https://github.com/apache/doris/pull/43445" target="_blank" rel="noopener noreferrer">#43445</a></li>
<li>Fix the problem of inaccurate <code>count(*)</code> queries when there are dangling deletes in Iceberg tables in some cases. <a href="https://github.com/apache/doris/pull/44039" target="_blank" rel="noopener noreferrer">#44039</a></li>
<li>Fix the problem of query errors due to column name mismatches in Iceberg tables in some cases . <a href="https://github.com/apache/doris/pull/44470" target="_blank" rel="noopener noreferrer">#44470</a></li>
<li>Fix the problem of being unable to read Iceberg tables when their partitions are modified in some cases .<a href="https://github.com/apache/doris/pull/45367" target="_blank" rel="noopener noreferrer">#45367</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="paimon">Paimon<a href="https://doris.apache.org/blog/release-note-2.1.8#paimon" class="hash-link" aria-label="Direct link to Paimon" title="Direct link to Paimon">&#x200B;</a></h4>
<ul>
<li>Fix the problem that the Paimon Catalog cannot access Alibaba Cloud OSS - HDFS. <a href="https://github.com/apache/doris/pull/42585" target="_blank" rel="noopener noreferrer">#42585</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hudi">Hudi<a href="https://doris.apache.org/blog/release-note-2.1.8#hudi" class="hash-link" aria-label="Direct link to Hudi" title="Direct link to Hudi">&#x200B;</a></h4>
<ul>
<li>Fix the problem of ineffective partition pruning in Hudi tables in some cases. <a href="https://github.com/apache/doris/pull/44669" target="_blank" rel="noopener noreferrer">#44669</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jdbc">JDBC<a href="https://doris.apache.org/blog/release-note-2.1.8#jdbc" class="hash-link" aria-label="Direct link to JDBC" title="Direct link to JDBC">&#x200B;</a></h4>
<ul>
<li>Fix the problem of being unable to obtain tables using the JDBC Catalog after enabling the case insensitive table name feature in some cases.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="maxcompute">MaxCompute<a href="https://doris.apache.org/blog/release-note-2.1.8#maxcompute" class="hash-link" aria-label="Direct link to MaxCompute" title="Direct link to MaxCompute">&#x200B;</a></h4>
<ul>
<li>Fix the problem of ineffective partition pruning in MaxCompute tables in some cases<a href="https://github.com/apache/doris/pull/44508" target="_blank" rel="noopener noreferrer">#44508</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="others-1">Others<a href="https://doris.apache.org/blog/release-note-2.1.8#others-1" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h4>
<ul>
<li>Fix the problem of FE memory leaks caused by EXPORT tasks in some cases.<a href="https://github.com/apache/doris/pull/44019" target="_blank" rel="noopener noreferrer">#44019</a></li>
<li>Fix the problem of being unable to access S3 object storage using the https protocol in some cases <a href="https://github.com/apache/doris/pull/44242" target="_blank" rel="noopener noreferrer">#44242</a>.</li>
<li>Fix the problem of the inability to automatically refresh Kerberos authentication tickets in some cases  <a href="https://github.com/apache/doris/pull/44916" target="_blank" rel="noopener noreferrer">#44916</a></li>
<li>Fix the problem of errors when reading Hadoop Block compressed format files in some cases. <a href="https://github.com/apache/doris/pull/45289" target="_blank" rel="noopener noreferrer">#45289</a></li>
<li>When querying ORC - formatted data, no longer push down CHAR - type predicates to avoid possible result errors. <a href="https://github.com/apache/doris/pull/45484" target="_blank" rel="noopener noreferrer">#45484</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-2.1.8#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fix the problem that when there is a CTE in the materialized view definition, it cannot be refreshed <a href="https://github.com/apache/doris/pull/44857" target="_blank" rel="noopener noreferrer">#44857</a>.</li>
<li>Fix the problem that when columns are added to the base table, the asynchronous materialized view cannot hit the transparent rewrite. <a href="https://github.com/apache/doris/pull/44867" target="_blank" rel="noopener noreferrer">#44867</a></li>
<li>Fix the problem that when the same filter predicate is included in different positions in a query, the transparent rewrite fails. <a href="https://github.com/apache/doris/pull/44575" target="_blank" rel="noopener noreferrer">#44575</a></li>
<li>Fix the problem that when column aliases are used in filter predicates or join predicates, the transparent rewrite cannot be performed. <a href="https://github.com/apache/doris/pull/44779" target="_blank" rel="noopener noreferrer">#44779</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inverted-index">Inverted Index<a href="https://doris.apache.org/blog/release-note-2.1.8#inverted-index" class="hash-link" aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">&#x200B;</a></h3>
<ul>
<li>Fix the problem of abnormal handling of inverted index compaction. <a href="https://github.com/apache/doris/pull/45773" target="_blank" rel="noopener noreferrer">#45773</a></li>
<li>Fix the problem that inverted index construction fails due to lock - waiting timeout. <a href="https://github.com/apache/doris/pull/43589" target="_blank" rel="noopener noreferrer">#43589</a></li>
<li>Fix the problem of inverted index write crashes in abnormal situations. <a href="https://github.com/apache/doris/pull/46075" target="_blank" rel="noopener noreferrer">#46075</a></li>
<li>Fix the null - pointer problem of the <code>match</code> function with special parameters. <a href="https://github.com/apache/doris/pull/45774" target="_blank" rel="noopener noreferrer">#45774</a></li>
<li>Fix problems related to the variant inverted index and disable the use of the index v1 format for variants <a href="https://github.com/apache/doris/pull/43971" target="_blank" rel="noopener noreferrer">#43971</a> <a href="https://github.com/apache/doris/pull/45179/" target="_blank" rel="noopener noreferrer">#45179</a></li>
<li>Fix the problem of crashes when setting <code>gram_size = 65535</code> for the ngram bloomfilter index <a href="https://github.com/apache/doris/pull/43654" target="_blank" rel="noopener noreferrer">#43654</a></li>
<li>Fix the problem of incorrect calculation of DATE and DATETIME for the bloomfilter index <a href="https://github.com/apache/doris/pull/43622" target="_blank" rel="noopener noreferrer">#43622</a></li>
<li>Fix the problem that dropping a column does not automatically drop the bloomfilter index <a href="https://github.com/apache/doris/pull/44478" target="_blank" rel="noopener noreferrer">#44478</a></li>
<li>Reduce the memory footprint when writing the bloomfilter index <a href="https://github.com/apache/doris/pull/46047" target="_blank" rel="noopener noreferrer">#46047</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structure-data">Semi-Structure Data<a href="https://doris.apache.org/blog/release-note-2.1.8#semi-structure-data" class="hash-link" aria-label="Direct link to Semi-Structure Data" title="Direct link to Semi-Structure Data">&#x200B;</a></h3>
<ul>
<li>Optimize memory usage and reduce the memory consumption of the <code>variant</code> data type <a href="https://github.com/apache/doris/pull/43349" target="_blank" rel="noopener noreferrer">#43349</a> <a href="https://github.com/apache/doris/pull/44585" target="_blank" rel="noopener noreferrer">#44585</a> <a href="https://github.com/apache/doris/pull/45734" target="_blank" rel="noopener noreferrer">#45734</a></li>
<li>Optimize the performance of <code>variant</code> schema copy. <a href="https://github.com/apache/doris/pull/45731" target="_blank" rel="noopener noreferrer">#45731</a></li>
<li>Do not use <code>variant</code> as a key when automatically inferring tablet keys. <a href="https://github.com/apache/doris/pull/44736" target="_blank" rel="noopener noreferrer">#44736</a></li>
<li>Fix the problem of changing <code>variant</code> from <code>NOT NULL</code> to <code>NULL</code> <a href="https://github.com/apache/doris/pull/45734" target="_blank" rel="noopener noreferrer">#45734</a></li>
<li>Fix the problem of incorrect type inference of lambda functions. <a href="https://github.com/apache/doris/pull/45798" target="_blank" rel="noopener noreferrer">#45798</a></li>
<li>Fix the coredump problem at the boundary conditions of the <code>ipv6_cidr_to_range</code> function <a href="https://github.com/apache/doris/pull/46252" target="_blank" rel="noopener noreferrer">#46252</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.8#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fix the potential deadlock problem caused by mutual exclusion of table read locks and optimize the lock - using logic <a href="https://github.com/apache/doris/pull/45045" target="_blank" rel="noopener noreferrer">#45045</a> <a href="https://github.com/apache/doris/pull/43376" target="_blank" rel="noopener noreferrer">#43376</a> <a href="https://github.com/apache/doris/pull/44164" target="_blank" rel="noopener noreferrer">#44164</a> <a href="https://github.com/apache/doris/pull/44967" target="_blank" rel="noopener noreferrer">#44967</a> <a href="https://github.com/apache/doris/pull/45995" target="_blank" rel="noopener noreferrer">#45995</a>.</li>
<li>Fix the problem that the SQL Cache function incorrectly uses constant folding, resulting in incorrect results when using functions containing time formats . <a href="https://github.com/apache/doris/pull/44631" target="_blank" rel="noopener noreferrer">#44631</a></li>
<li>Fix the problem of incorrect optimization of comparison expressions in edge cases, which may lead to incorrect results. <a href="https://github.com/apache/doris/pull/44054" target="_blank" rel="noopener noreferrer">#44054</a> <a href="https://github.com/apache/doris/pull/44725" target="_blank" rel="noopener noreferrer">#44725</a> <a href="https://github.com/apache/doris/pull/44922" target="_blank" rel="noopener noreferrer">#44922</a> <a href="https://github.com/apache/doris/pull/45735" target="_blank" rel="noopener noreferrer">#45735</a> <a href="https://github.com/apache/doris/pull/45868" target="_blank" rel="noopener noreferrer">#45868</a></li>
<li>Fix the problem of incorrect audit logs for high - concurrent point queries <a href="https://github.com/apache/doris/pull/43345" target="_blank" rel="noopener noreferrer"> #43345 </a><a href="https://github.com/apache/doris/pull/44588" target="_blank" rel="noopener noreferrer">#44588</a></li>
<li>Fix the problem of continuous error reporting after an exception occurs in high - concurrent point queries <a href="https://github.com/apache/doris/pull/44582" target="_blank" rel="noopener noreferrer">#44582</a></li>
<li>Fix the problem of incorrectly prepared statements for some fields.<a href="https://github.com/apache/doris/pull/45732" target="_blank" rel="noopener noreferrer">#45732 </a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-engine-1">Query Execution Engine<a href="https://doris.apache.org/blog/release-note-2.1.8#query-execution-engine-1" class="hash-link" aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">&#x200B;</a></h3>
<ul>
<li>Fix the problem of incorrect results of regular expressions and <code>like</code> functions for special characters. <a href="https://github.com/apache/doris/pull/44547" target="_blank" rel="noopener noreferrer">#44547</a></li>
<li>Fix the problem that the SQL Cache may have incorrect results when switching databases. <a href="https://github.com/apache/doris/pull/44782" target="_blank" rel="noopener noreferrer">#44782</a></li>
<li>Fix the problem of incorrect results of the <code>cut_ipv6</code> function. <a href="https://github.com/apache/doris/pull/43921" target="_blank" rel="noopener noreferrer">#43921</a></li>
<li>Fix the problem of casting from numeric types to bool types. <a href="https://github.com/apache/doris/pull/46275" target="_blank" rel="noopener noreferrer">#46275</a></li>
<li>Fix a series of problems related to arrow flight. <a href="https://github.com/apache/doris/pull/45661" target="_blank" rel="noopener noreferrer">#45661</a> <a href="https://github.com/apache/doris/pull/45023" target="_blank" rel="noopener noreferrer">#45023</a> <a href="https://github.com/apache/doris/pull/43960" target="_blank" rel="noopener noreferrer">#43960</a> <a href="https://github.com/apache/doris/pull/43929" target="_blank" rel="noopener noreferrer">#43929</a></li>
<li>Fix the problem of incorrect results in some cases when the hash table of hash join exceeds 4G. <a href="https://github.com/apache/doris/pull/46461/files" target="_blank" rel="noopener noreferrer">#46461</a></li>
<li>Fix the overflow problem of the <code>convert_to</code> function for Chinese characters. <a href="https://github.com/apache/doris/pull/46405" target="_blank" rel="noopener noreferrer">#46505</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.8#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Fix the problem that high - concurrent DDL may cause FE startup failure.</li>
<li>Fix the problem that auto - increment columns may have duplicate values.</li>
<li>Fix the problem that routine load cannot use the newly expanded BE during expansion.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permission-management">Permission Management<a href="https://doris.apache.org/blog/release-note-2.1.8#permission-management" class="hash-link" aria-label="Direct link to Permission Management" title="Direct link to Permission Management">&#x200B;</a></h3>
<ul>
<li>Fix the problem of frequent access to the Ranger service when using Ranger as the authentication plugin <a href="https://github.com/apache/doris/pull/45645" target="_blank" rel="noopener noreferrer">#45645</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others-2">Others<a href="https://doris.apache.org/blog/release-note-2.1.8#others-2" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fix the potential memory leak problem when <code>enable_jvm_monitor=true</code> is enabled on the BE side <a href="https://github.com/apache/doris/pull/44311" target="_blank" rel="noopener noreferrer">#44311</a>.</li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.3 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.3</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.3</guid>
            <pubDate>Mon, 02 Dec 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community members, the Apache Doris 3.0.3 version was officially released on December 02, 2024, this version further enhances the performance and stability of the system.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.3 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-12-02T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">December 2, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.3 version was officially released on December 02, 2024, this version further enhances the performance and stability of the system.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavioral-changes">Behavioral Changes<a href="https://doris.apache.org/blog/release-note-3.0.3#behavioral-changes" class="hash-link" aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">&#x200B;</a></h2>
<ul>
<li>Prohibited column updates on MOW tables with synchronous materialized views. <a href="https://github.com/apache/doris/pull/40190" target="_blank" rel="noopener noreferrer">#40190</a></li>
<li>Adjusted the default parameters of RoutineLoad to improve import efficiency. <a href="https://github.com/apache/doris/pull/42968" target="_blank" rel="noopener noreferrer">#42968</a></li>
<li>When StreamLoad fails, the return value of LoadedRows is adjusted to 0. <a href="https://github.com/apache/doris/pull/41946" target="_blank" rel="noopener noreferrer">#41946</a> <a href="https://github.com/apache/doris/pull/42291" target="_blank" rel="noopener noreferrer">#42291</a></li>
<li>Adjusted the default memory limit of Segment cache to 5%. <a href="https://github.com/apache/doris/pull/42308" target="_blank" rel="noopener noreferrer">#42308</a> <a href="https://github.com/apache/doris/pull/42436" target="_blank" rel="noopener noreferrer">#42436</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.3#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<ul>
<li>
<p>Introduced the session variable <code>enable_cooldown_replica_affinity</code> to control the affinity of cold and hot tiered replicas. <a href="https://github.com/apache/doris/pull/42677" target="_blank" rel="noopener noreferrer">#42677</a></p>
</li>
<li>
<p>Added <code>table$partition</code> syntax for querying partition information of Hive tables. <a href="https://github.com/apache/doris/pull/40774" target="_blank" rel="noopener noreferrer">#40774</a></p>
<ul>
<li><a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/hive" target="_blank" rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
<li>
<p>Supported creation of Hive tables in Text format. <a href="https://github.com/apache/doris/pull/41860" target="_blank" rel="noopener noreferrer">#41860</a> <a href="https://github.com/apache/doris/pull/42175" target="_blank" rel="noopener noreferrer">#42175</a></p>
<ul>
<li><a href="https://doris.apache.org/zh-CN/docs/3.0/lakehouse/datalake-building/hive-build#table" target="_blank" rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.3#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Introduced new materialized view attribute <code>use_for_rewrite</code>. When <code>use_for_rewrite</code> is set to false, the materialized view does not participate in transparent rewriting. <a href="https://github.com/apache/doris/pull/40332" target="_blank" rel="noopener noreferrer">#40332</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.3#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Supported correlated non-aggregate subqueries. <a href="https://github.com/apache/doris/pull/42236" target="_blank" rel="noopener noreferrer">#42236</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.3#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Added functions <code>ngram_search</code>, <code>normal_cdf</code>, <code>to_iso8601</code>, <code>from_iso8601_date</code>, <code>SESSION_USER()</code>, <code>last_query_id</code>. <a href="https://github.com/apache/doris/pull/38226" target="_blank" rel="noopener noreferrer">#38226</a> <a href="https://github.com/apache/doris/pull/40695" target="_blank" rel="noopener noreferrer">#40695</a> <a href="https://github.com/apache/doris/pull/41075" target="_blank" rel="noopener noreferrer">#41075</a> <a href="https://github.com/apache/doris/pull/41600" target="_blank" rel="noopener noreferrer">#41600</a> <a href="https://github.com/apache/doris/pull/39575" target="_blank" rel="noopener noreferrer">#39575</a> <a href="https://github.com/apache/doris/pull/40739" target="_blank" rel="noopener noreferrer">#40739</a></li>
<li>The <code>aes_encrypt</code> and <code>aes_decrypt</code> functions support GCM mode. <a href="https://github.com/apache/doris/pull/40004" target="_blank" rel="noopener noreferrer">#40004</a></li>
<li>Profile outputs the changed session variable values. <a href="https://github.com/apache/doris/pull/41016" target="_blank" rel="noopener noreferrer">#41016</a> <a href="https://github.com/apache/doris/pull/41318" target="_blank" rel="noopener noreferrer">#41318</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.3#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li>Added array functions <code>array_match_all</code> and <code>array_match_any</code>. <a href="https://github.com/apache/doris/pull/40605" target="_blank" rel="noopener noreferrer">#40605</a> <a href="https://github.com/apache/doris/pull/43514" target="_blank" rel="noopener noreferrer">#43514</a></li>
<li>The array function <code>array_agg</code> supports nesting ARRAY/MAP/STRUCT within ARRAY. <a href="https://github.com/apache/doris/pull/42009" target="_blank" rel="noopener noreferrer">#42009</a></li>
<li>Added approximate aggregate statistical functions <code>approx_top_k</code> and <code>approx_top_sum</code>. <a href="https://github.com/apache/doris/pull/44082" target="_blank" rel="noopener noreferrer">#44082</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.3#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.3#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Supported <code>bitmap_empty</code> as the default value. <a href="https://github.com/apache/doris/pull/40364" target="_blank" rel="noopener noreferrer">#40364</a></li>
<li>Introduced the session variable <code>insert_timeout</code> to control the timeout of DELETE statements. <a href="https://github.com/apache/doris/pull/41063" target="_blank" rel="noopener noreferrer">#41063</a></li>
<li>Improved some error message prompts. <a href="https://github.com/apache/doris/pull/41048" target="_blank" rel="noopener noreferrer">#41048</a> <a href="https://github.com/apache/doris/pull/39631" target="_blank" rel="noopener noreferrer">#39631</a></li>
<li>Improved the priority scheduling of replica repair. <a href="https://github.com/apache/doris/pull/41076" target="_blank" rel="noopener noreferrer">#41076</a></li>
<li>Enhanced the robustness of timezone handling when creating tables. <a href="https://github.com/apache/doris/pull/41926" target="_blank" rel="noopener noreferrer">#41926</a> <a href="https://github.com/apache/doris/pull/42389" target="_blank" rel="noopener noreferrer">#42389</a></li>
<li>Checked the validity of partition expressions when creating tables. <a href="https://github.com/apache/doris/pull/40158" target="_blank" rel="noopener noreferrer">#40158</a></li>
<li>Supported Unicode-encoded column names in DELETE operations. <a href="https://github.com/apache/doris/pull/39381" target="_blank" rel="noopener noreferrer">#39381</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.3#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Supported ARM architecture deployment in storage and compute separation mode. <a href="https://github.com/apache/doris/pull/42467" target="_blank" rel="noopener noreferrer">#42467</a> <a href="https://github.com/apache/doris/pull/43377" target="_blank" rel="noopener noreferrer">#43377</a></li>
<li>Optimized the eviction strategy and lock competition of file cache, improving hit rate and high concurrency point query performance. <a href="https://github.com/apache/doris/pull/42451" target="_blank" rel="noopener noreferrer">#42451</a> <a href="https://github.com/apache/doris/pull/43201" target="_blank" rel="noopener noreferrer">#43201</a> <a href="https://github.com/apache/doris/pull/41818" target="_blank" rel="noopener noreferrer">#41818</a> <a href="https://github.com/apache/doris/pull/43401" target="_blank" rel="noopener noreferrer">#43401</a></li>
<li>S3 storage vault supported <code>use_path_style</code>, solving the problem of using custom domain names for object storage. <a href="https://github.com/apache/doris/pull/43060" target="_blank" rel="noopener noreferrer">#43060</a> <a href="https://github.com/apache/doris/pull/43343" target="_blank" rel="noopener noreferrer">#43343</a> <a href="https://github.com/apache/doris/pull/43330" target="_blank" rel="noopener noreferrer">#43330</a></li>
<li>Optimized storage and compute separation configuration and deployment, preventing misoperations in different modes. <a href="https://github.com/apache/doris/pull/43381" target="_blank" rel="noopener noreferrer">#43381</a> <a href="https://github.com/apache/doris/pull/43522" target="_blank" rel="noopener noreferrer">#43522</a> <a href="https://github.com/apache/doris/pull/43434" target="_blank" rel="noopener noreferrer">#43434</a> <a href="https://github.com/apache/doris/pull/40764" target="_blank" rel="noopener noreferrer">#40764</a> <a href="https://github.com/apache/doris/pull/43891" target="_blank" rel="noopener noreferrer">#43891</a></li>
<li>Optimized observability and provided an interface for deleting specified segment file cache. <a href="https://github.com/apache/doris/pull/38489" target="_blank" rel="noopener noreferrer">#38489</a> <a href="https://github.com/apache/doris/pull/42896" target="_blank" rel="noopener noreferrer">#42896</a> <a href="https://github.com/apache/doris/pull/41037" target="_blank" rel="noopener noreferrer">#41037</a> <a href="https://github.com/apache/doris/pull/43412" target="_blank" rel="noopener noreferrer">#43412</a></li>
<li>Optimized Meta-service operation and maintenance interface: RPC rate limiting and tablet metadata correction. <a href="https://github.com/apache/doris/pull/42413" target="_blank" rel="noopener noreferrer">#42413</a> <a href="https://github.com/apache/doris/pull/43884" target="_blank" rel="noopener noreferrer">#43884</a> <a href="https://github.com/apache/doris/pull/41782" target="_blank" rel="noopener noreferrer">#41782</a> <a href="https://github.com/apache/doris/pull/43460" target="_blank" rel="noopener noreferrer">#43460</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.3#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Paimon Catalog supported Alibaba Cloud DLF and OSS-HDFS storage. <a href="https://github.com/apache/doris/pull/41247" target="_blank" rel="noopener noreferrer">#41247</a> <a href="https://github.com/apache/doris/pull/42585" target="_blank" rel="noopener noreferrer">#42585</a></p>
<ul>
<li>View <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/paimon" target="_blank" rel="noopener noreferrer">Documentation</a></li>
</ul>
</li>
<li>
<p>Supported reading of Hive tables in OpenCSV format. <a href="https://github.com/apache/doris/pull/42257" target="_blank" rel="noopener noreferrer">#42257</a> <a href="https://github.com/apache/doris/pull/42942" target="_blank" rel="noopener noreferrer">#42942</a></p>
</li>
<li>
<p>Optimized the performance of accessing the <code>information_schema.columns</code> table in External Catalog. <a href="https://github.com/apache/doris/pull/41659" target="_blank" rel="noopener noreferrer">#41659</a> <a href="https://github.com/apache/doris/pull/41962" target="_blank" rel="noopener noreferrer">#41962</a></p>
</li>
<li>
<p>Used the new MaxCompute open storage API to access MaxCompute data sources. <a href="https://github.com/apache/doris/pull/41614" target="_blank" rel="noopener noreferrer">#41614</a></p>
</li>
<li>
<p>Optimized the scheduling policy of the JNI part of Paimon tables, making scan tasks more balanced. <a href="https://github.com/apache/doris/pull/43310" target="_blank" rel="noopener noreferrer">#43310</a></p>
</li>
<li>
<p>Optimized the read performance of small ORC files. <a href="https://github.com/apache/doris/pull/42004" target="_blank" rel="noopener noreferrer">#42004</a> <a href="https://github.com/apache/doris/pull/43467" target="_blank" rel="noopener noreferrer">#43467</a></p>
</li>
<li>
<p>Supported reading of parquet files in brotli compressed format. <a href="https://github.com/apache/doris/pull/42177" target="_blank" rel="noopener noreferrer">#42177</a></p>
</li>
<li>
<p>Added <code>file_cache_statistics</code> table under the <code>information_schema</code> library to view metadata cache statistics. <a href="https://github.com/apache/doris/pull/42160" target="_blank" rel="noopener noreferrer">#42160</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.3#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Optimization: When queries only differ in comments, the same SQL Cache can be reused. <a href="https://github.com/apache/doris/pull/40049" target="_blank" rel="noopener noreferrer">#40049</a></li>
<li>Optimization: Improved the stability of statistical information when data is frequently updated. <a href="https://github.com/apache/doris/pull/43865" target="_blank" rel="noopener noreferrer">#43865</a> <a href="https://github.com/apache/doris/pull/39788" target="_blank" rel="noopener noreferrer">#39788</a> <a href="https://github.com/apache/doris/pull/43009" target="_blank" rel="noopener noreferrer">#43009</a> <a href="https://github.com/apache/doris/pull/40457" target="_blank" rel="noopener noreferrer">#40457</a> <a href="https://github.com/apache/doris/pull/42409" target="_blank" rel="noopener noreferrer">#42409</a> <a href="https://github.com/apache/doris/pull/41894" target="_blank" rel="noopener noreferrer">#41894</a></li>
<li>Optimization: Enhanced the stability of constant folding. <a href="https://github.com/apache/doris/pull/42910" target="_blank" rel="noopener noreferrer">#42910</a> <a href="https://github.com/apache/doris/pull/41164" target="_blank" rel="noopener noreferrer">#41164</a> <a href="https://github.com/apache/doris/pull/39723" target="_blank" rel="noopener noreferrer">#39723</a> <a href="https://github.com/apache/doris/pull/41394" target="_blank" rel="noopener noreferrer">#41394</a> <a href="https://github.com/apache/doris/pull/42256" target="_blank" rel="noopener noreferrer">#42256</a> <a href="https://github.com/apache/doris/pull/40441" target="_blank" rel="noopener noreferrer">#40441</a></li>
<li>Optimization: Column pruning can generate better execution plans. <a href="https://github.com/apache/doris/pull/41719" target="_blank" rel="noopener noreferrer">#41719</a> <a href="https://github.com/apache/doris/pull/41548" target="_blank" rel="noopener noreferrer">#41548</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.3#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Optimized the memory usage of the sort operator. <a href="https://github.com/apache/doris/pull/39306" target="_blank" rel="noopener noreferrer">#39306</a></li>
<li>Optimized the performance of computations on ARM. <a href="https://github.com/apache/doris/pull/38888" target="_blank" rel="noopener noreferrer">#38888</a> <a href="https://github.com/apache/doris/pull/38759" target="_blank" rel="noopener noreferrer">#38759</a></li>
<li>Optimized the computational performance of a series of functions. <a href="https://github.com/apache/doris/pull/40366" target="_blank" rel="noopener noreferrer">#40366</a> <a href="https://github.com/apache/doris/pull/40821" target="_blank" rel="noopener noreferrer">#40821</a> <a href="https://github.com/apache/doris/pull/40670" target="_blank" rel="noopener noreferrer">#40670</a> <a href="https://github.com/apache/doris/pull/41206" target="_blank" rel="noopener noreferrer">#41206</a> <a href="https://github.com/apache/doris/pull/40162" target="_blank" rel="noopener noreferrer">#40162</a></li>
<li>Used SSE instructions to optimize the performance of the <code>match_ipv6_subnet</code> function. <a href="https://github.com/apache/doris/pull/38755" target="_blank" rel="noopener noreferrer">#38755</a></li>
<li>Supported automatic creation of new partitions during insert overwrite. <a href="https://github.com/apache/doris/pull/38628" target="_blank" rel="noopener noreferrer">#38628</a> <a href="https://github.com/apache/doris/pull/42645" target="_blank" rel="noopener noreferrer">#42645</a></li>
<li>Added the status of each PipelineTask in Profile. <a href="https://github.com/apache/doris/pull/42981" target="_blank" rel="noopener noreferrer">#42981</a></li>
<li>IP type supported runtime filter. <a href="https://github.com/apache/doris/pull/39985" target="_blank" rel="noopener noreferrer">#39985</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.3#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li>Output the real SQL of prepared statements in audit logs. <a href="https://github.com/apache/doris/pull/43321" target="_blank" rel="noopener noreferrer">#43321</a></li>
<li>The filebeat doris output plugin supports fault tolerance and progress reporting. <a href="https://github.com/apache/doris/pull/36355" target="_blank" rel="noopener noreferrer">#36355</a></li>
<li>Optimized the performance of inverted index queries. <a href="https://github.com/apache/doris/pull/41547" target="_blank" rel="noopener noreferrer">#41547</a> <a href="https://github.com/apache/doris/pull/41585" target="_blank" rel="noopener noreferrer">#41585</a> <a href="https://github.com/apache/doris/pull/41567" target="_blank" rel="noopener noreferrer">#41567</a> <a href="https://github.com/apache/doris/pull/41577" target="_blank" rel="noopener noreferrer">#41577</a> <a href="https://github.com/apache/doris/pull/42060" target="_blank" rel="noopener noreferrer">#42060</a> <a href="https://github.com/apache/doris/pull/42372" target="_blank" rel="noopener noreferrer">#42372</a></li>
<li>The array function <code>array overlaps</code> supports acceleration using inverted indexes. <a href="https://github.com/apache/doris/pull/41571" target="_blank" rel="noopener noreferrer">#41571</a></li>
<li>The IP function <code>is_ip_address_in_range</code> supports acceleration using inverted indexes. <a href="https://github.com/apache/doris/pull/41571" target="_blank" rel="noopener noreferrer">#41571</a></li>
<li>Optimized the CAST performance of the VARIANT data type. <a href="https://github.com/apache/doris/pull/41775" target="_blank" rel="noopener noreferrer">#41775</a> <a href="https://github.com/apache/doris/pull/42438" target="_blank" rel="noopener noreferrer">#42438</a> <a href="https://github.com/apache/doris/pull/43320" target="_blank" rel="noopener noreferrer">#43320</a></li>
<li>Optimized the CPU resource consumption of the Variant data type. <a href="https://github.com/apache/doris/pull/42856" target="_blank" rel="noopener noreferrer">#42856</a> <a href="https://github.com/apache/doris/pull/43062" target="_blank" rel="noopener noreferrer">#43062</a> <a href="https://github.com/apache/doris/pull/43634" target="_blank" rel="noopener noreferrer">#43634</a></li>
<li>Optimized the metadata and execution memory resource consumption of the Variant data type. <a href="https://github.com/apache/doris/pull/42448" target="_blank" rel="noopener noreferrer">#42448</a> <a href="https://github.com/apache/doris/pull/43326" target="_blank" rel="noopener noreferrer">#43326</a> <a href="https://github.com/apache/doris/pull/41482" target="_blank" rel="noopener noreferrer">#41482</a> <a href="https://github.com/apache/doris/pull/43093" target="_blank" rel="noopener noreferrer">#43093</a> <a href="https://github.com/apache/doris/pull/43567" target="_blank" rel="noopener noreferrer">#43567</a> <a href="https://github.com/apache/doris/pull/43620" target="_blank" rel="noopener noreferrer">#43620</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions">Permissions<a href="https://doris.apache.org/blog/release-note-3.0.3#permissions" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>Added a new configuration item <code>ldap_group_filter</code> in LDAP for custom group filtering. <a href="https://github.com/apache/doris/pull/43292" target="_blank" rel="noopener noreferrer">#43292</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="https://doris.apache.org/blog/release-note-3.0.3#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>Supported displaying connection count information by user in FE monitoring items. <a href="https://github.com/apache/doris/pull/39200" target="_blank" rel="noopener noreferrer">#39200</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.3#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.3#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed the issue with using IPv6 hostnames. <a href="https://github.com/apache/doris/pull/40074" target="_blank" rel="noopener noreferrer">#40074</a></li>
<li>Fixed the inaccurate display of broker/s3 load progress. <a href="https://github.com/apache/doris/pull/43535" target="_blank" rel="noopener noreferrer">#43535</a></li>
<li>Fixed the issue where queries might hang from FE. <a href="https://github.com/apache/doris/pull/41303" target="_blank" rel="noopener noreferrer">#41303</a> <a href="https://github.com/apache/doris/pull/42382" target="_blank" rel="noopener noreferrer">#42382</a></li>
<li>Fixed the issue of duplicate auto-increment IDs under exceptional circumstances. <a href="https://github.com/apache/doris/pull/43774" target="_blank" rel="noopener noreferrer">#43774</a>  <a href="https://github.com/apache/doris/pull/43983" target="_blank" rel="noopener noreferrer">#43983</a></li>
<li>Fixed occasional NPE issues with groupcommit. <a href="https://github.com/apache/doris/pull/43635" target="_blank" rel="noopener noreferrer">#43635</a></li>
<li>Fixed the inaccurate calculation of auto bucket. <a href="https://github.com/apache/doris/pull/41675" target="_blank" rel="noopener noreferrer">#41675</a> <a href="https://github.com/apache/doris/pull/41835" target="_blank" rel="noopener noreferrer">#41835</a></li>
<li>Fixed the issue where FE might not correctly plan multi-table flows after restart. <a href="https://github.com/apache/doris/pull/41677" target="_blank" rel="noopener noreferrer">#41677</a> <a href="https://github.com/apache/doris/pull/42290" target="_blank" rel="noopener noreferrer">#42290</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-1">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.3#compute-storage-decoupled-1" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed the issue that MOW primary key tables with large delete bitmaps might cause coredump. <a href="https://github.com/apache/doris/pull/43088" target="_blank" rel="noopener noreferrer">#43088</a> <a href="https://github.com/apache/doris/pull/43457" target="_blank" rel="noopener noreferrer">#43457</a> <a href="https://github.com/apache/doris/pull/43479" target="_blank" rel="noopener noreferrer">#43479</a> <a href="https://github.com/apache/doris/pull/43407" target="_blank" rel="noopener noreferrer">#43407</a> <a href="https://github.com/apache/doris/pull/43297" target="_blank" rel="noopener noreferrer">#43297</a> <a href="https://github.com/apache/doris/pull/43613" target="_blank" rel="noopener noreferrer">#43613</a> <a href="https://github.com/apache/doris/pull/43615" target="_blank" rel="noopener noreferrer">#43615</a> <a href="https://github.com/apache/doris/pull/43854" target="_blank" rel="noopener noreferrer">#43854</a> <a href="https://github.com/apache/doris/pull/43968" target="_blank" rel="noopener noreferrer">#43968</a> <a href="https://github.com/apache/doris/pull/44074" target="_blank" rel="noopener noreferrer">#44074</a> <a href="https://github.com/apache/doris/pull/41793" target="_blank" rel="noopener noreferrer">#41793</a> <a href="https://github.com/apache/doris/pull/42142" target="_blank" rel="noopener noreferrer">#42142</a></li>
<li>Fixed the issue that segment files, when being a multiple of 5MB, would fail to upload objects. <a href="https://github.com/apache/doris/pull/43254" target="_blank" rel="noopener noreferrer">#43254</a></li>
<li>Fixed the issue that the default retry policy of aws sdk did not take effect. <a href="https://github.com/apache/doris/pull/43575" target="_blank" rel="noopener noreferrer">#43575</a> <a href="https://github.com/apache/doris/pull/43648" target="_blank" rel="noopener noreferrer">#43648</a></li>
<li>Fixed the issue that altering storage vault could continue execution even when the wrong type was specified. <a href="https://github.com/apache/doris/pull/43489" target="_blank" rel="noopener noreferrer">#43489</a> <a href="https://github.com/apache/doris/pull/43352" target="_blank" rel="noopener noreferrer">#43352</a> <a href="https://github.com/apache/doris/pull/43495" target="_blank" rel="noopener noreferrer">#43495</a></li>
<li>Fixed the issue that tablet_id might be 0 during the delayed commit process of large transactions. <a href="https://github.com/apache/doris/pull/42043" target="_blank" rel="noopener noreferrer">#42043</a> <a href="https://github.com/apache/doris/pull/42905" target="_blank" rel="noopener noreferrer">#42905</a></li>
<li>Fixed the issue that constant folding RCP and FE forwarding SQL might not be executed in the expected computation group. <a href="https://github.com/apache/doris/pull/43110" target="_blank" rel="noopener noreferrer">#43110</a> <a href="https://github.com/apache/doris/pull/41819" target="_blank" rel="noopener noreferrer">#41819</a> <a href="https://github.com/apache/doris/pull/41846" target="_blank" rel="noopener noreferrer">#41846</a></li>
<li>Fixed the issue that meta-service did not strictly check instance_id upon receiving RPC. <a href="https://github.com/apache/doris/pull/43253" target="_blank" rel="noopener noreferrer">#43253</a> <a href="https://github.com/apache/doris/pull/43832" target="_blank" rel="noopener noreferrer">#43832</a></li>
<li>Fixed the issue that FE follower information_schema version did not update in time. <a href="https://github.com/apache/doris/pull/43496" target="_blank" rel="noopener noreferrer">#43496</a></li>
<li>Fixed the issue of atomicity in file cache rename and inaccurate metrics. <a href="https://github.com/apache/doris/pull/42869" target="_blank" rel="noopener noreferrer">#42869</a> <a href="https://github.com/apache/doris/pull/43504" target="_blank" rel="noopener noreferrer">#43504</a> <a href="https://github.com/apache/doris/pull/43220" target="_blank" rel="noopener noreferrer">#43220</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.3#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Prohibited implicit conversion predicates from being pushed down to JDBC data sources to avoid inconsistent query results. <a href="https://github.com/apache/doris/pull/42102" target="_blank" rel="noopener noreferrer">#42102</a></li>
<li>Fixed some read issues with high-version Hive transactional tables. <a href="https://github.com/apache/doris/pull/42226" target="_blank" rel="noopener noreferrer">#42226</a></li>
<li>Fixed the issue that the Export command might cause deadlocks. <a href="https://github.com/apache/doris/pull/43083" target="_blank" rel="noopener noreferrer">#43083</a> <a href="https://github.com/apache/doris/pull/43402" target="_blank" rel="noopener noreferrer">#43402</a></li>
<li>Fixed the issue of being unable to query Hive views created by Spark. <a href="https://github.com/apache/doris/pull/43552" target="_blank" rel="noopener noreferrer">#43552</a></li>
<li>Fixed the issue that Hive partition paths containing special characters led to incorrect partition pruning. <a href="https://github.com/apache/doris/pull/42906" target="_blank" rel="noopener noreferrer">#42906</a></li>
<li>Fixed the issue that Iceberg Catalog could not use AWS Glue. <a href="https://github.com/apache/doris/pull/41084" target="_blank" rel="noopener noreferrer">#41084</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.3#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed the issue that asynchronous materialized views might not refresh after the base table is rebuilt. <a href="https://github.com/apache/doris/pull/41762" target="_blank" rel="noopener noreferrer">#41762</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-2">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.3#query-optimizer-2" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed the issue that partition pruning results might be incorrect when using multi-column range partitioning. <a href="https://github.com/apache/doris/pull/43332" target="_blank" rel="noopener noreferrer">#43332</a></li>
<li>Fixed the issue of incorrect calculation results in some limit offset scenarios. <a href="https://github.com/apache/doris/pull/42576" target="_blank" rel="noopener noreferrer">#42576</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-2">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.3#query-execution-2" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed the issue that hash join with array types larger than 4G could cause BE Core. <a href="https://github.com/apache/doris/pull/43861" target="_blank" rel="noopener noreferrer">#43861</a></li>
<li>Fixed the issue that is null predicate operations might yield incorrect results in some scenarios. <a href="https://github.com/apache/doris/pull/43619" target="_blank" rel="noopener noreferrer">#43619</a></li>
<li>Fixed the issue that bitmap types might produce incorrect output results in hash join. <a href="https://github.com/apache/doris/pull/43718" target="_blank" rel="noopener noreferrer">#43718</a></li>
<li>Fixed some issues where function results were calculated incorrectly. <a href="https://github.com/apache/doris/pull/40710" target="_blank" rel="noopener noreferrer">#40710</a> <a href="https://github.com/apache/doris/pull/39358" target="_blank" rel="noopener noreferrer">#39358</a> <a href="https://github.com/apache/doris/pull/40929" target="_blank" rel="noopener noreferrer">#40929</a> <a href="https://github.com/apache/doris/pull/40869" target="_blank" rel="noopener noreferrer">#40869</a> <a href="https://github.com/apache/doris/pull/40285" target="_blank" rel="noopener noreferrer">#40285</a> <a href="https://github.com/apache/doris/pull/39891" target="_blank" rel="noopener noreferrer">#39891</a> <a href="https://github.com/apache/doris/pull/40530" target="_blank" rel="noopener noreferrer">#40530</a> <a href="https://github.com/apache/doris/pull/41948" target="_blank" rel="noopener noreferrer">#41948</a> <a href="https://github.com/apache/doris/pull/43588" target="_blank" rel="noopener noreferrer">#43588</a></li>
<li>Fixed some issues with JSON type parsing. <a href="https://github.com/apache/doris/pull/39937" target="_blank" rel="noopener noreferrer">#39937</a></li>
<li>Fixed issues with varchar and char types in runtime filter operations. <a href="https://github.com/apache/doris/pull/43758" target="_blank" rel="noopener noreferrer">#43758</a> <a href="https://github.com/apache/doris/pull/43919" target="_blank" rel="noopener noreferrer">#43919</a></li>
<li>Fixed some issues with the use of decimal256 in scalar and aggregate functions. <a href="https://github.com/apache/doris/pull/42136" target="_blank" rel="noopener noreferrer">#42136</a> <a href="https://github.com/apache/doris/pull/42356" target="_blank" rel="noopener noreferrer">#42356</a></li>
<li>Fixed the issue that arrow flight reported <code>Reach limit of connections</code> errors upon connection. <a href="https://github.com/apache/doris/pull/39127" target="_blank" rel="noopener noreferrer">#39127</a></li>
<li>Fixed the issue of incorrect memory usage statistics for BE in k8s environments. <a href="https://github.com/apache/doris/pull/41123" target="_blank" rel="noopener noreferrer">#41123</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-2">Semi-structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.3#semi-structured-data-management-2" class="hash-link" aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">&#x200B;</a></h3>
<ul>
<li>Adjusted the default values of <code>segment_cache_fd_percentage</code> and <code>inverted_index_fd_number_limit_percent</code>. <a href="https://github.com/apache/doris/pull/42224" target="_blank" rel="noopener noreferrer">#42224</a></li>
<li>logstash now supports group_commit. <a href="https://github.com/apache/doris/pull/40450" target="_blank" rel="noopener noreferrer">#40450</a></li>
<li>Fixed the issue of coredump when building index. <a href="https://github.com/apache/doris/pull/43246" target="_blank" rel="noopener noreferrer">#43246</a> <a href="https://github.com/apache/doris/pull/43298" target="_blank" rel="noopener noreferrer">#43298</a></li>
<li>Fixed issues with variant index. <a href="https://github.com/apache/doris/pull/43375" target="_blank" rel="noopener noreferrer">#43375</a> <a href="https://github.com/apache/doris/pull/43773" target="_blank" rel="noopener noreferrer">#43773</a></li>
<li>Fixed potential fd and memory leaks under abnormal compaction circumstances. <a href="https://github.com/apache/doris/pull/42374" target="_blank" rel="noopener noreferrer">#42374</a></li>
<li>Inverted index match null now correctly returns null instead of false. <a href="https://github.com/apache/doris/pull/41786" target="_blank" rel="noopener noreferrer">#41786</a></li>
<li>Fixed the issue of coredump when ngram bloomfilter index bf_size is set to 65536. <a href="https://github.com/apache/doris/pull/43645" target="_blank" rel="noopener noreferrer">#43645</a></li>
<li>Fixed the issue of potential coredump during complex data type JOINs. <a href="https://github.com/apache/doris/pull/40398" target="_blank" rel="noopener noreferrer">#40398</a></li>
<li>Fixed the issue of coredump with TVF JSON data. <a href="https://github.com/apache/doris/pull/43187" target="_blank" rel="noopener noreferrer">#43187</a></li>
<li>Fixed the precision issue of bloom filter calculations for dates and times. <a href="https://github.com/apache/doris/pull/43612" target="_blank" rel="noopener noreferrer">#43612</a></li>
<li>Fixed the issue of coredump with IPv6 type storage. <a href="https://github.com/apache/doris/pull/43251" target="_blank" rel="noopener noreferrer">#43251</a></li>
<li>Fixed the issue of coredump when using VARIANT type with light_schema_change disabled. <a href="https://github.com/apache/doris/pull/40908" target="_blank" rel="noopener noreferrer">#40908</a></li>
<li>Improved cache performance for high-concurrency point queries. <a href="https://github.com/apache/doris/pull/44077" target="_blank" rel="noopener noreferrer">#44077</a></li>
<li>Fixed the issue that bloom filter indexes were not synchronized when columns were deleted. <a href="https://github.com/apache/doris/pull/43378" target="_blank" rel="noopener noreferrer">#43378</a></li>
<li>Fixed instability issues with es catalog under special circumstances such as mixed array and scalar data. <a href="https://github.com/apache/doris/pull/40314" target="_blank" rel="noopener noreferrer">#40314</a> <a href="https://github.com/apache/doris/pull/40385" target="_blank" rel="noopener noreferrer">#40385</a> <a href="https://github.com/apache/doris/pull/43399" target="_blank" rel="noopener noreferrer">#43399</a> <a href="https://github.com/apache/doris/pull/40614" target="_blank" rel="noopener noreferrer">#40614</a></li>
<li>Fixed coredump issues caused by abnormal regular pattern matching. <a href="https://github.com/apache/doris/pull/43394" target="_blank" rel="noopener noreferrer">#43394</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions-1">Permissions<a href="https://doris.apache.org/blog/release-note-3.0.3#permissions-1" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>Fixed several issues where permissions were not properly restricted after authorization. <a href="https://github.com/apache/doris/pull/43193" target="_blank" rel="noopener noreferrer">#43193</a> <a href="https://github.com/apache/doris/pull/41723" target="_blank" rel="noopener noreferrer">#41723</a> <a href="https://github.com/apache/doris/pull/42107" target="_blank" rel="noopener noreferrer">#42107</a> <a href="https://github.com/apache/doris/pull/43306" target="_blank" rel="noopener noreferrer">#43306</a></li>
<li>Enhanced several permission checks. <a href="https://github.com/apache/doris/pull/40688" target="_blank" rel="noopener noreferrer">#40688</a> <a href="https://github.com/apache/doris/pull/40533" target="_blank" rel="noopener noreferrer">#40533</a> <a href="https://github.com/apache/doris/pull/41791" target="_blank" rel="noopener noreferrer">#41791</a> <a href="https://github.com/apache/doris/pull/42106" target="_blank" rel="noopener noreferrer">#42106</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-1">Other<a href="https://doris.apache.org/blog/release-note-3.0.3#other-1" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>
<p>Supplemented missing audit log fields in audit log tables and files. <a href="https://github.com/apache/doris/pull/43303" target="_blank" rel="noopener noreferrer">#43303</a></p>
<ul>
<li><a href="https://doris.apache.org/docs/3.0/admin-manual/system-tables/internal_schema/audit_log" target="_blank" rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Scaling Bitcoin data to billions of records with Apache Doris: our journey to auto-partitioning]]></title>
            <link>https://doris.apache.org/blog/ortege-studio-1-scaling-bitcoin-data-to-billions-of-records</link>
            <guid>https://doris.apache.org/blog/ortege-studio-1-scaling-bitcoin-data-to-billions-of-records</guid>
            <pubDate>Wed, 20 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[To power lightning-fast queries and ensure the Deep Dive dashboards deliver real-time insights, Ortege relies on Apache Doris. A crucial feature they embrace is Auto Partition.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practice</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Scaling Bitcoin data to billions of records with Apache Doris: our journey to auto-partitioning</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Justin Trollip</span></span><time datetime="2024-11-20T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">November 20, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Special Thanks</div><div class="admonitionContent_UjKb"><p>The Apache Doris community shares our deep appreciation for <a href="https://www.linkedin.com/in/justintrollip/" target="_blank" rel="noopener noreferrer">Justin Trollip</a>, Founder of <a href="https://www.ortege.ai/" target="_blank" rel="noopener noreferrer">Ortege AI</a>, for providing his hands-on experience in applying Auto Partition of Apache Doris to manage massive blockchain data. Justin is a passionate and visionary technologist and entrepreneur, and we are glad to have him join the Apache Doris user community and share his insights with us.</p></div></div>
<p>At Ortege, we&apos;re building the ultimate blockchain data platform, providing comprehensive and accessible insights to empower the crypto community. One of our biggest challenges is managing the sheer volume of data, especially for Bitcoin. Our bitcoin.outputs table alone contains over <strong>3 billion records</strong> and it&apos;s growing every day!</p>
<p>To power our lightning-fast queries and ensure Ortege Studio&apos;s Deep Dive dashboards deliver real-time insights, we rely on Apache Doris, a high-performance analytical database. A crucial feature we&apos;ve embraced is <strong>Doris&apos; auto-partitioning</strong>.</p>
<p><strong>From manual to automated:</strong></p>
<p>Initially, we manually defined partitions for our Bitcoin tables, meticulously crafting ranges based on block height. While this worked well for Bitcoin&apos;s relatively predictable growth, it became cumbersome for newer chains like Stacks, where data patterns are more dynamic.</p>
<p><strong>Enter Doris auto-partitioning:</strong></p>
<p>Doris&apos; auto-partitioning changed the game. It automatically creates partitions based on the data being ingested, eliminating the need for manual intervention. We can now define partition rules (e.g., partition by month based on the block timestamp) and let Doris handle the rest. This is a game-changer for:</p>
<ul>
<li><strong>Scalability:</strong> Effortlessly accommodate massive data growth without manual schema updates.</li>
<li><strong>Performance:</strong> Optimize query speed by ensuring data is distributed efficiently across partitions.</li>
<li><strong>Flexibility:</strong> Easily adapt to changing data patterns, especially for newer chains with less predictable growth.</li>
</ul>
<p><strong>A tailored approach:</strong></p>
<p>While auto-partitioning is perfect for many scenarios, we&apos;ve found that a hybrid approach works best for Bitcoin. We use auto-partitioning for recent data while manually managing partitions for historical data, balancing automation with fine-grained control.</p>
<p><strong>Lessons learned:</strong></p>
<p>Our experience with Doris auto-partitioning has taught us that:</p>
<ul>
<li><strong>Flexibility is key:</strong> Choose a data platform that can adapt to your specific needs and data characteristics.</li>
<li><strong>Automation is powerful:</strong> Leverage automation to streamline data management and focus on extracting insights.</li>
<li><strong>Performance matters:</strong> A high-performance database like Apache Doris is essential for handling the scale of blockchain data.</li>
</ul>
<p><strong>We&apos;re committed to providing the most comprehensive and accessible blockchain data platform, and Apache Doris&apos; auto-partitioning is a crucial part of that journey. Stay tuned as we continue to innovate and empower the crypto community with data-driven insights.</strong></p>
<p>This article was written by Justin Trollip and originally posted on <a href="https://www.linkedin.com/pulse/scaling-bitcoin-data-billions-records-apache-doris-our-journey-diknc/?trackingId=pSs7z3aeSguCbWyxTcew6w%3D%3D" target="_blank" rel="noopener noreferrer">Linkedin</a>.</p></div>]]></content:encoded>
            <category>Best Practice</category>
        </item>
        <item>
            <title><![CDATA[Fine-tuning Apache Doris for maximum performance and resilience: a deep dive into fe.conf]]></title>
            <link>https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience</link>
            <guid>https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience</guid>
            <pubDate>Wed, 20 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Ortege handles massive volumes of blockchain data to power its analytics platform, Ortege Studio. Apache Doris forms the backbone of its Lakehouse v2, enabling it to process billions of records and deliver real-time insights.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practice</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Fine-tuning Apache Doris for maximum performance and resilience: a deep dive into fe.conf</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Justin Trollip</span></span><time datetime="2024-11-20T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">November 20, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Special Thanks</div><div class="admonitionContent_UjKb"><p>This is the second contribution from Justin Trollip. He introduces the fe.conf setting optimization for higher performance and resilience in his case. He uses Apache Doris as the backbone of Ortege&apos;s lakehouse, which handles massive volumes of blockchain data. Previously, he also shared his experience in using Auto Partition of Doris.</p></div></div>
<p><strong><a href="https://www.linkedin.com/company/doris-apache/" target="_blank" rel="noopener noreferrer">Apache Doris</a></strong> is renowned for its speed and scalability as an MPP analytical database. But to unlock its full potential, especially in demanding blockchain data environments, careful configuration is key. Today, we&apos;ll explore the critical settings in Doris&apos; fe.conf file that directly impact performance and resilience, using our own configuration at Ortege as a real-world case study.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="orteges-lakehouse-v2-powered-by-doris">Ortege&apos;s Lakehouse v2: Powered by Doris<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#orteges-lakehouse-v2-powered-by-doris" class="hash-link" aria-label="Direct link to Ortege&apos;s Lakehouse v2: Powered by Doris" title="Direct link to Ortege&apos;s Lakehouse v2: Powered by Doris">&#x200B;</a></h2>
<p>At Ortege, we handle massive volumes of blockchain data to power our analytics platform, <strong><a href="https://app.ortege.ai/dashboard/list" target="_blank" rel="noopener noreferrer">Ortege Studio</a></strong>. Apache Doris forms the backbone of our <strong><a href="https://docs.ortege.ai/ortege-documentation/ortege-guides/ortege-lakehouse" target="_blank" rel="noopener noreferrer">Lakehouse v2</a></strong>, enabling us to process <strong>billions</strong> of records and deliver real-time insights. Our journey has involved continuous optimization and fine-tuning of Doris, and fe.conf plays a central role.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-areas-for-performance-and-resilience">Key Areas for Performance and Resilience:<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#key-areas-for-performance-and-resilience" class="hash-link" aria-label="Direct link to Key Areas for Performance and Resilience:" title="Direct link to Key Areas for Performance and Resilience:">&#x200B;</a></h2>
<p>Here are the crucial fe.conf settings we&apos;ve prioritized, along with areas where we&apos;re actively experimenting for further improvement:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-engine-optimization">Query Engine Optimization<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#query-engine-optimization" class="hash-link" aria-label="Direct link to Query Engine Optimization" title="Direct link to Query Engine Optimization">&#x200B;</a></h3>
<ul>
<li><code>default_max_query_instances</code>: This setting controls the maximum number of query instances allowed per user. We currently have it set to the default (-1 for unlimited), but we&apos;re considering setting a reasonable limit to prevent resource exhaustion from runaway queries, especially in multi-tenant scenarios.</li>
<li><code>max_query_retry_time</code> (Default: 3): While the default retry attempts provide some fault tolerance, increasing this value could improve query resilience in unstable network environments, but we need to carefully consider the potential impact on overall query latency.</li>
<li><code>enable_local_replica_selection</code> <strong>(set to <code>true</code>):</strong>  We have now enabled this feature to optimize query performance. In our deployment, FE and BE nodes are co-located, so this should reduce network overhead by preferentially using local replicas for queries.</li>
<li><code>rewrite_count_distinct_to_bitmap_hll</code> <strong>(Default: true):</strong> We&apos;ve kept this enabled to leverage bitmap and HLL optimizations for COUNT(DISTINCT) queries, which are common in our analytical workloads.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-and-export-management">Load and Export Management<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#load-and-export-management" class="hash-link" aria-label="Direct link to Load and Export Management" title="Direct link to Load and Export Management">&#x200B;</a></h3>
<ul>
<li><code>enable_pipeline_load</code> <strong>(Default: true),</strong> <code>enable_vectorized_load</code> <strong>(Default: true),</strong> <code>enable_new_load_scan_node</code> <strong>(Default: true):</strong> We&apos;ve enabled these settings to leverage the latest performance enhancements in Doris&apos; load process. Pipeline execution, vectorized loading, and the new scan node contribute to faster data ingestion.</li>
<li><code>max_running_txn_num_per_db</code> <strong>(Default: 1000):</strong> While the default concurrency limit is sufficient for our current needs, we&apos;re monitoring this closely as our data volume and user base grow. We might need to increase this limit to accommodate more concurrent load jobs without causing contention.</li>
<li><code>max_stream_load_timeout_second</code> <strong>(Default: 3 days):</strong> The default timeout is very generous. We&apos;re evaluating if a shorter timeout, balanced with potential retry mechanisms, could improve resource utilization and prevent long-running, potentially problematic stream loads.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-and-cluster-management">Metadata and Cluster Management<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#metadata-and-cluster-management" class="hash-link" aria-label="Direct link to Metadata and Cluster Management" title="Direct link to Metadata and Cluster Management">&#x200B;</a></h3>
<ul>
<li><code>meta_delay_toleration_second</code> <strong>(Default: 5 minutes):</strong> This setting controls how long non-master FE nodes tolerate metadata delays from the master. We might need to adjust this based on our network latency and the frequency of metadata updates.</li>
<li><code>disable_colocate_balance</code> <strong>(Default: false):</strong> We haven&apos;t disabled colocation balance, as it&apos;s crucial for maintaining optimal data distribution and query performance. However, we&apos;re exploring the implications of temporarily disabling it during specific maintenance operations or upgrades.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-optimization">Storage Optimization<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#storage-optimization" class="hash-link" aria-label="Direct link to Storage Optimization" title="Direct link to Storage Optimization">&#x200B;</a></h3>
<ul>
<li><code>storage_flood_stage_usage_percent</code> <strong>(Default: 95%)</strong>, storage_flood_stage_left_capacity_bytes <strong>(Default: 1GB):</strong> These settings control the thresholds at which Doris rejects write operations to prevent storage exhaustion. We&apos;re continuously monitoring disk space usage and adjusting these thresholds as needed to avoid disruptions.</li>
<li><code>storage_high_watermark_usage_percent</code> <strong>(Default: 85%)</strong>, storage_min_left_capacity_bytes <strong>(Default: 2GB):</strong> These parameters govern how Doris selects storage paths for data balancing. We&apos;re actively experimenting with these thresholds to find the optimal balance between data distribution and avoiding disk space issues.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-caching">Query Caching<a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#query-caching" class="hash-link" aria-label="Direct link to Query Caching" title="Direct link to Query Caching">&#x200B;</a></h3>
<ul>
<li><code>cache_enable_sql_mode</code> <strong>(set to</strong> <code>true</code><strong>):</strong> We&apos;ve enabled query caching to significantly speed up query responses, especially for our frequently accessed Deep Dive dashboards.</li>
<li><code>cache_result_max_row_count</code> <strong>(set to</strong> <code>20000</code><strong>):</strong> We increased the maximum number of rows that can be cached to accommodate the typical result set sizes of our dashboard queries.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-improvement"><strong>Continuous Improvement</strong><a href="https://doris.apache.org/blog/ortege-studio-2-fine-tuning-apache-doris-for-maximum-performance-and-resilience#continuous-improvement" class="hash-link" aria-label="Direct link to continuous-improvement" title="Direct link to continuous-improvement">&#x200B;</a></h2>
<p>Fine-tuning Doris is an ongoing process, and we&apos;re constantly exploring new configuration options and optimization strategies. By sharing our fe.conf learnings and areas for improvement, we hope to help others get the most out of this powerful analytical database.</p>
<p>This article was written by Justin Trollip and originally posted on <a href="https://www.linkedin.com/pulse/fine-tuning-apache-doris-maximum-performance-resilience-deep-dive-jiwac/?trackingId=jJ%2FO3s%2FHRGee3mxQ9LTnxQ%3D%3D" target="_blank" rel="noopener noreferrer">Linkedin</a>.</p></div>]]></content:encoded>
            <category>Best Practice</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.7 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.7</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.7</guid>
            <pubDate>Sun, 10 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This version brings continuous upgrades and improvements. Additionally, several fixes have been implemented in areas such as the  to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management, Query Optimizer and Permission Management.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.7 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-11-10T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">November 10, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community, <strong>Apache Doris version 2.1.7 was officially released on November 10, 2024.</strong> This version brings continuous upgrades and improvements. Additionally, several fixes have been implemented in areas such as the  to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management, Query Optimizer and Permission Management.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior changes<a href="https://doris.apache.org/blog/release-note-2.1.7#behavior-changes" class="hash-link" aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">&#x200B;</a></h2>
<ul>
<li>The following global variables will be forcibly set to the following default values:
<ul>
<li>enable_nereids_dml: true</li>
<li>enable_nereids_dml_with_pipeline: true</li>
<li>enable_nereids_planner: true</li>
<li>enable_fallback_to_original_planner: true</li>
<li>enable_pipeline_x_engine: true</li>
</ul>
</li>
<li>New columns have been added to the audit log. <a href="https://github.com/apache/doris/pull/42262" target="_blank" rel="noopener noreferrer">#42262</a>
<ul>
<li>For more information, please  refer to <a href="https://doris.apache.org/docs/admin-manual/audit-plugin/" target="_blank" rel="noopener noreferrer">docs</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New features<a href="https://doris.apache.org/blog/release-note-2.1.7#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.7#async-materialized-view" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>An asynchronous materialized view has added a property called <code>use_for_rewrite</code> to control whether it participates in transparent rewriting. <a href="https://github.com/apache/doris/pull/40332" target="_blank" rel="noopener noreferrer">#40332</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-2.1.7#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>The list of changed session variables is now output in the Profile. <a href="https://github.com/apache/doris/pull/41016" target="_blank" rel="noopener noreferrer">#41016</a></li>
<li>Support for <code>trim_in</code>, <code>ltrim_in</code>, and <code>rtrim_in</code> functions has been added. <a href="https://github.com/apache/doris/pull/42641" target="_blank" rel="noopener noreferrer">#42641</a> (Note: This is a duplicate mention, but I&apos;m including it as per your original list.)</li>
<li>Support for several URL functions (top_level_domain, first_significant_subdomain, cut_to_first_significant_subdomain) has been added. <a href="https://github.com/apache/doris/pull/42916" target="_blank" rel="noopener noreferrer">#42916</a></li>
<li>The <code>bit_set</code> function has been added. <a href="https://github.com/apache/doris/pull/42099" target="_blank" rel="noopener noreferrer">#42916</a></li>
<li>The <code>count_substrings</code> function has been added. <a href="https://github.com/apache/doris/pull/42055" target="_blank" rel="noopener noreferrer">#42055</a></li>
<li>The <code>translate</code> and <code>url_encode</code> functions have been added. <a href="https://github.com/apache/doris/pull/41051" target="_blank" rel="noopener noreferrer">#41051</a></li>
<li>The <code>normal_cdf</code>, <code>to_iso8601</code>, and <code>from_iso8601_date</code> functions have been added. <a href="https://github.com/apache/doris/pull/40695" target="_blank" rel="noopener noreferrer">#40695</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.7#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>The <code>information_schema.table_options</code> and <code>table_properties</code> system tables have been added, supporting the querying of attributes set during table creation. <a href="https://github.com/apache/doris/pull/34384" target="_blank" rel="noopener noreferrer">#34384</a></li>
<li>Support for <code>bitmap_empty</code> as a default value has been implemented. <a href="https://github.com/apache/doris/pull/40364" target="_blank" rel="noopener noreferrer">#40364</a></li>
<li>A new session variable <code>require_sequence_in_insert</code> has been introduced to control whether a sequence column must be provided when performing <code>INSERT INTO SELECT</code> writes to a unique key table. <a href="https://github.com/apache/doris/pull/41655" target="_blank" rel="noopener noreferrer">#41655</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.7#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Allow for generating flame graphs on the BE WebUI page.<a href="https://github.com/apache/doris/pull/41044" target="_blank" rel="noopener noreferrer">#41044</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.7#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.7#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Support for writing data to Hive text format tables. <a href="https://github.com/apache/doris/pull/40537" target="_blank" rel="noopener noreferrer">#40537</a>
<ul>
<li>For more information, please  refer to <a href="https://doris.apache.org/docs/lakehouse/datalake-building/hive-build" target="_blank" rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Access MaxCompute data using MaxCompute Open Storage API. <a href="https://github.com/apache/doris/pull/41610" target="_blank" rel="noopener noreferrer">#41610</a>
<ul>
<li>For more information, please  refer to <a href="https://doris.apache.org/docs/lakehouse/database/max-compute" target="_blank" rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Support for Paimon DLF Catalog. <a href="https://github.com/apache/doris/pull/41694" target="_blank" rel="noopener noreferrer">#41694</a>
<ul>
<li>For more information, please  refer to <a href="https://doris.apache.org/docs/lakehouse/datalake-analytics/paimon" target="_blank" rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Added <code>table$partitions</code> syntax to directly query Hive partition information.<a href="https://github.com/apache/doris/pull/41230" target="_blank" rel="noopener noreferrer">#41230</a>
<ul>
<li>For more information, please  refer to <a href="https://doris.apache.org/docs/lakehouse/datalake-analytics/hive" target="_blank" rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Support for reading Parquet files in brotli compression format.<a href="https://github.com/apache/doris/pull/42162" target="_blank" rel="noopener noreferrer">#42162</a></li>
<li>Support for reading DECIMAL 256 types in Parquet files. <a href="https://github.com/apache/doris/pull/42241" target="_blank" rel="noopener noreferrer">#42241</a></li>
<li>Support for reading Hive tables in OpenCsvSerde format.<a href="https://github.com/apache/doris/pull/42939" target="_blank" rel="noopener noreferrer">#42939</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view-1">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.7#async-materialized-view-1" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>Refined the granularity of lock holding during the build process for asynchronous materialized views. <a href="https://github.com/apache/doris/pull/40402" target="_blank" rel="noopener noreferrer">#40402</a> <a href="https://github.com/apache/doris/pull/41010" target="_blank" rel="noopener noreferrer">#41010</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query optimizer<a href="https://doris.apache.org/blog/release-note-2.1.7#query-optimizer" class="hash-link" aria-label="Direct link to Query optimizer" title="Direct link to Query optimizer">&#x200B;</a></h3>
<ul>
<li>Improved the accuracy of statistic information collection and usage in extreme cases to enhance planning stability. <a href="https://github.com/apache/doris/pull/40457" target="_blank" rel="noopener noreferrer">#40457</a></li>
<li>Runtime filters can now be generated in more scenarios to improve query performance. <a href="https://github.com/apache/doris/pull/40815" target="_blank" rel="noopener noreferrer">#40815</a></li>
<li>Enhanced constant folding capabilities for numerical, date, and string functions to boost query performance.  <a href="https://github.com/apache/doris/pull/40820" target="_blank" rel="noopener noreferrer">#40820</a></li>
<li>Optimized the column pruning algorithm to enhance query performance. <a href="https://github.com/apache/doris/pull/41548" target="_blank" rel="noopener noreferrer">#41548</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-2.1.7#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Supported parallel preparation to reduce the time consumed by short queries. <a href="https://github.com/apache/doris/pull/40270" target="_blank" rel="noopener noreferrer">#40270</a></li>
<li>Corrected the names of some counters in the profile to match the audit logs. <a href="https://github.com/apache/doris/pull/41993" target="_blank" rel="noopener noreferrer">#41993</a></li>
<li>Added new local shuffle rules to speed up certain queries. <a href="https://github.com/apache/doris/pull/40637" target="_blank" rel="noopener noreferrer">#40637</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.7#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>The <code>SHOW PARTITIONS</code> command now supports displaying the commit version. <a href="https://github.com/apache/doris/pull/28274" target="_blank" rel="noopener noreferrer">#28274</a></li>
<li>Checked for unreasonable partition expressions when creating tables. <a href="https://github.com/apache/doris/pull/40158" target="_blank" rel="noopener noreferrer">#40158</a></li>
<li>Optimized the scheduling logic when encountering EOF in Routine Load. <a href="https://github.com/apache/doris/pull/40509" target="_blank" rel="noopener noreferrer">#40509</a></li>
<li>Made Routine Load aware of schema changes. <a href="https://github.com/apache/doris/pull/40508" target="_blank" rel="noopener noreferrer">#40508</a></li>
<li>Improved the timeout logic for Routine Load tasks. <a href="https://github.com/apache/doris/pull/41135" target="_blank" rel="noopener noreferrer">#41135</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others-1">Others<a href="https://doris.apache.org/blog/release-note-2.1.7#others-1" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Allowed closing the built-in service port of BRPC via BE configuration. <a href="https://github.com/apache/doris/pull/41047" target="_blank" rel="noopener noreferrer">#41047</a></li>
<li>Fixed issues with missing fields and duplicate records in audit logs. <a href="https://github.com/apache/doris/pull/43015" target="_blank" rel="noopener noreferrer">#43015</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug fixes<a href="https://doris.apache.org/blog/release-note-2.1.7#bug-fixes" class="hash-link" aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.7#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Fixed the inconsistency in the behavior of INSERT OVERWRITE with Hive. <a href="https://github.com/apache/doris/pull/39840" target="_blank" rel="noopener noreferrer">#39840</a></li>
<li>Cleaned up temporarily created folders to address the issue of too many empty folders on HDFS.  <a href="https://github.com/apache/doris/pull/40424" target="_blank" rel="noopener noreferrer">#40424</a></li>
<li>Resolved memory leaks in FE caused by using the JDBC Catalog in some cases. <a href="https://github.com/apache/doris/pull/40923" target="_blank" rel="noopener noreferrer">#40923</a></li>
<li>Resolved memory leaks in BE caused by using the JDBC Catalog in some cases. <a href="https://github.com/apache/doris/pull/41266" target="_blank" rel="noopener noreferrer">#41266</a></li>
<li>Fixed errors in reading Snappy compressed formats in certain scenarios. <a href="https://github.com/apache/doris/pull/40862" target="_blank" rel="noopener noreferrer">#40862</a></li>
<li>Addressed potential FileSystem leaks on the FE side in certain scenarios. <a href="https://github.com/apache/doris/pull/41108" target="_blank" rel="noopener noreferrer">#41108</a></li>
<li>Resolved issues where using EXPLAIN VERBOSE to view external table execution plans could cause null pointer exceptions in some cases. [#41231] (<a href="https://github.com/apache/doris/pull/41231" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/41231</a>)</li>
<li>Fixed the inability to read tables in Paimon parquet format. <a href="https://github.com/apache/doris/pull/41487" target="_blank" rel="noopener noreferrer">#41487</a></li>
<li>Addressed performance issues introduced by compatibility changes in the JDBC Oracle Catalog.  <a href="https://github.com/apache/doris/pull/41407" target="_blank" rel="noopener noreferrer">#41407</a></li>
<li>Disabled predicate pushing down after implicit conversion to resolve incorrect query results in some cases with JDBC Catalog. <a href="https://github.com/apache/doris/pull/42242" target="_blank" rel="noopener noreferrer">#42242</a></li>
<li>Fixed issues with case-sensitive access to table names in the External Catalog. <a href="https://github.com/apache/doris/pull/42261" target="_blank" rel="noopener noreferrer">#42261</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view-2">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.7#async-materialized-view-2" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where user-specified start times were not effective. <a href="https://github.com/apache/doris/pull/39573" target="_blank" rel="noopener noreferrer">#39573</a></li>
<li>Resolved the issue of nested materialized views not refreshing. <a href="https://github.com/apache/doris/pull/40433" target="_blank" rel="noopener noreferrer">#40433</a></li>
<li>Fixed the issue where materialized views might not refresh after the base table was deleted and recreated.  <a href="https://github.com/apache/doris/pull/41762" target="_blank" rel="noopener noreferrer">#41762</a></li>
<li>Addressed issues where partition compensation rewrites could lead to incorrect results. <a href="https://github.com/apache/doris/pull/40803" target="_blank" rel="noopener noreferrer">#40803</a></li>
<li>Fixed potential errors in rewrite results when <code>sql_select_limit</code> was set. <a href="https://github.com/apache/doris/pull/40106" target="_blank" rel="noopener noreferrer">#40106</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-2.1.7#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>Fixed the issue of index file handle leaks. <a href="https://github.com/apache/doris/pull/41915" target="_blank" rel="noopener noreferrer">#41915</a></li>
<li>Addressed inaccuracies in the <code>count()</code> function of inverted indexes in special cases. (#41127)[<a href="https://github.com/apache/doris/pull/41127" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/41127</a>]</li>
<li>Fixed exceptions with variant when light schema change was not enabled. <a href="https://github.com/apache/doris/pull/40908" target="_blank" rel="noopener noreferrer">#40908</a></li>
<li>Resolved memory leaks when variant returns arrays. <a href="https://github.com/apache/doris/pull/41339" target="_blank" rel="noopener noreferrer">#41339</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query optimizer<a href="https://doris.apache.org/blog/release-note-2.1.7#query-optimizer-1" class="hash-link" aria-label="Direct link to Query optimizer" title="Direct link to Query optimizer">&#x200B;</a></h3>
<ul>
<li>Corrected potential errors in nullable calculations for filter conditions during external table queries, leading to execution exceptions. <a href="https://github.com/apache/doris/pull/41014" target="_blank" rel="noopener noreferrer">#41014</a></li>
<li>Fixed potential errors in optimizing range comparison expressions. <a href="https://github.com/apache/doris/pull/41356" target="_blank" rel="noopener noreferrer">#41356</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-2">Query Execution<a href="https://doris.apache.org/blog/release-note-2.1.7#query-execution-2" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>The match_regexp function could not correctly handle empty strings. <a href="https://github.com/apache/doris/pull/39503" target="_blank" rel="noopener noreferrer">#39503</a></li>
<li>Resolved issues where the scanner thread pool could become stuck in high-concurrency scenarios. <a href="https://github.com/apache/doris/pull/40495" target="_blank" rel="noopener noreferrer">#40495</a></li>
<li>Fixed errors in the results of the <code>data_floor</code> function. <a href="https://github.com/apache/doris/pull/41948" target="_blank" rel="noopener noreferrer">#41948</a></li>
<li>Addressed incorrect cancel messages in some scenarios. <a href="https://github.com/apache/doris/pull/41798" target="_blank" rel="noopener noreferrer">#41798</a></li>
<li>Fixed issues with excessive warning logs printed by arrow flight. <a href="https://github.com/apache/doris/pull/41770" target="_blank" rel="noopener noreferrer">#41770</a></li>
<li>Resolved issues where runtime filters failed to send in some scenarios. <a href="https://github.com/apache/doris/pull/41698" target="_blank" rel="noopener noreferrer">#41698</a></li>
<li>Fixed problems where some system table queries could not end normally or became stuck. <a href="https://github.com/apache/doris/pull/41592" target="_blank" rel="noopener noreferrer">#41592</a></li>
<li>Addressed incorrect results from window functions. ]<a href="https://github.com/apache/doris/pull/40761" target="_blank" rel="noopener noreferrer">#40761</a></li>
<li>Fixed issues where the encrypt and decrypt functions caused BE cores. <a href="https://github.com/apache/doris/pull/40726" target="_blank" rel="noopener noreferrer">#40726</a></li>
<li>Resolved errors in the results of the conv function. <a href="https://github.com/apache/doris/pull/40530" target="_blank" rel="noopener noreferrer">#40530</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-2">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.7#storage-management-2" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>Fixed import failures when Memtable migration was used in multi-replica scenarios with machine crashes.  <a href="https://github.com/apache/doris/pull/38003" target="_blank" rel="noopener noreferrer">#38003</a></li>
<li>Addressed inaccurate memory statistics during the Memtable flush phase during imports. <a href="https://github.com/apache/doris/pull/39536" target="_blank" rel="noopener noreferrer">#39536</a></li>
<li>Fixed fault tolerance issues with Memtable migration in multi-replica scenarios. <a href="https://github.com/apache/doris/pull/40477" target="_blank" rel="noopener noreferrer">#40477</a></li>
<li>Resolved inaccurate bvar statistics with Memtable migration. <a href="https://github.com/apache/doris/pull/40985" target="_blank" rel="noopener noreferrer">#40985</a></li>
<li>Fixed inaccurate progress reporting for S3 loads. <a href="https://github.com/apache/doris/pull/40987" target="_blank" rel="noopener noreferrer">#40987</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions">Permissions<a href="https://doris.apache.org/blog/release-note-2.1.7#permissions" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>Fixed permission issues related to show columns, show sync, and show data from db.table. <a href="https://github.com/apache/doris/pull/39726" target="_blank" rel="noopener noreferrer">#39726</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others-2">Others<a href="https://doris.apache.org/blog/release-note-2.1.7#others-2" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where the audit log plugin for version 2.0 could not be used in version 2.1. <a href="https://github.com/apache/doris/pull/41400" target="_blank" rel="noopener noreferrer">#41400</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[New milestone: Apache Doris 3.0 has been released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.0</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.0</guid>
            <pubDate>Tue, 15 Oct 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode inaddition to the compute-storage mode for cluster deployment. ]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">New milestone: Apache Doris 3.0 has been released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-10-15T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">October 15, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>We are excited to announce the release of Apache Doris 3.0!</p>
<p><strong>Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode in addition to the compute-storage coupled mode for cluster deployment. With the cloud-native architecture that decouples the computation and storage layers, users can achieve physical isolation between query loads across multiple compute clusters, as well as isolation between read and write loads. Additionally, users can take advantage of low-cost shared storage systems such as object storage or HDFS to significantly reduce storage costs.</strong></p>
<p>Version 3.0 marks a milestone in the evolution of Apache Doris towards a unified data lake and data warehouse architecture. This version introduces the ability to write data back to data lakes, allowing users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Apache Doris. With capabilities such as asynchronous materialized views, Apache Doris can serve as a unified data processing engine for enterprises, helping users better manage data across lakes, warehouses, and databases. Also, Apache Doris 3.0 introduces the Trino Connector. It allows users to quickly connect or adapt to more data sources, and leverage the high-performance compute engine of Doris to deliver faster query results than Trino.</p>
<p>Version 3.0 also enhances support for ETL batch processing scenarios, adding explicit transaction support for operations like <code>insert into select</code>, <code>delete</code> and <code>update</code>. The observability of query execution has also been improved.</p>
<p>In terms of performance, we have improved the framework capabilities, infrastructure, and rules of the query optimizer in version 3.0. This provides optimized performance, which has been proven by blind testing in more complex and diverse business scenarios.</p>
<p>The adaptive Runtime Filter computation method now accurately estimates filters based on data size during execution, delivering better performance under large data volumes and high loads. Additionally, asynchronous materialized view has been more stable and user-friendly in query acceleration and data modeling.</p>
<p><strong>During the development of version 3.0, over 200 contributors submitted nearly 5,000 optimizations</strong> and fixes to Apache Doris. Contributors from companies such as VeloDB, Baidu, Meituan, ByteDance, Tencent, Alibaba, Kwai, Huawei, and Tianyi Cloud actively collaborated with the community, contributing test cases from real-world use cases to help us improve Apache Doris. We extend our heartfelt thanks to all the contributors involved in the development, testing, and feedback process for this release.</p>
<ul>
<li>
<p><strong>GitHub</strong>: <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
<li>
<p><strong>Website</strong>: <a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-compute-storage-decoupled-mode">1. Compute-storage decoupled mode<a href="https://doris.apache.org/blog/release-note-3.0.0#1-compute-storage-decoupled-mode" class="hash-link" aria-label="Direct link to 1. Compute-storage decoupled mode" title="Direct link to 1. Compute-storage decoupled mode">&#x200B;</a></h2>
<p>Since V3.0, Apache Doris supports the compute-storage decoupled mode. Users can choose between it and the compute-storage coupled mode during cluster deployment.</p>
<p>In the compute-storage decoupled mode, the BE nodes no longer store the data, but instead, a shared storage layer (HDFS and object storage) is introduced as the shared data storage layer. The computing and storage resources can be scaled independently, bringing multiple benefits to users:</p>
<ul>
<li>
<p><strong>Workload isolation</strong>: Multiple compute clusters can share the same data, allowing users to isolate different business workloads or offline loads using separate compute clusters.</p>
</li>
<li>
<p><strong>Reduced storage costs</strong>: The full dataset is stored in the more cost-effective and highly reliable shared storage, with only hot data cached locally. Compared to the compute-storage coupled mode with three data replicas, the storage cost can be reduced by up to 90%.</p>
</li>
<li>
<p><strong>Elastic computing resources</strong>: Since no data is stored on the BE nodes, the computing resources can be scaled flexibly based on the load requirements. Users can scale in or out an individual compute cluster or increase/decrease the number of compute clusters. This also leads to cost savings.</p>
</li>
<li>
<p><strong>Improved system robustness</strong>: By storing the data in shared storage, Doris no longer needs to handle the complex logic of multi-replica consistency, thus simplifying distributed storage complexity and improving the overall system robustness.</p>
</li>
<li>
<p><strong>Flexible data sharing and cloning</strong>: The flexibility of the compute-storage decoupled mode extends beyond a single Doris cluster. Tables from one Doris cluster can be easily cloned to another Doris cluster, with just metadata replication.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-1-from-coupled-to-decoupled">1-1. From coupled to decoupled<a href="https://doris.apache.org/blog/release-note-3.0.0#1-1-from-coupled-to-decoupled" class="hash-link" aria-label="Direct link to 1-1. From coupled to decoupled" title="Direct link to 1-1. From coupled to decoupled">&#x200B;</a></h3>
<p>In the compute-storage coupled mode, the Apache Doris architecture consists of two main process types: Frontend (FE) and Backend (BE). The FE is primarily responsible for user request access, query parsing and planning, metadata management, and node management. The BE is responsible for data storage and query plan execution.</p>
<p>The BE nodes employ an MPP (Massively Parallel Processing) distributed computing architecture, leveraging a multi-replica consistency protocol to ensure high service availability and high data reliability.</p>
<p><img decoding="async" loading="lazy" alt="From coupled to decoupled" src="https://doris.apache.org/assets/images/storage-compute-decoupled-0c53e0b9a7c24a42e2dd2517680b0f5e.PNG" width="1280" height="612" class="img_ev3q"></p>
<p>The maturation of emerging cloud computing infrastructure, including public clouds, private clouds, and Kubernetes-based container platforms, has driven the need for cloud-native capabilities. Increasingly, users are seeking deeper integration between Apache Doris and cloud computing infrastructure to provide more elasticity.</p>
<p><strong>To address this need, the VeloDB team has designed and implemented a cloud-native version of Apache Doris that decouples compute and storage, known as VeloDB Cloud.  After extensive production testing and refinement across hundreds of enterprises over a long time, this cloud-native solution has now been contributed to the Apache Doris community, manifesting as the Apache Doris 3.0 in the compute-storage decoupled mode.</strong></p>
<p>In the compute-storage decoupled mode, the Apache Doris architecture consists of three layers:</p>
<ul>
<li><strong>Meta data layer</strong>: A new Meta Service module has been introduced to provide meta data services, such as processing database and table information, schemas, rowset meta, and transactions. The Meta Service is stateless and horizontally scalable. In V3.0, all of the BE&apos;s meta data and parts of the FE&apos;s meta data have been migrated to the Meta Service. We will finish the migration of the remains in future versions.</li>
<li><strong>Computation layer</strong>: The stateless BE nodes execute query plans and cache a portion of the data and tablet meta data locally to improve query performance. Multiple stateless BE nodes can be organized into a computing resource pool (i.e., compute cluster), and multiple compute clusters can share the same data and metadata service. The compute clusters can be elastically scaled by adding or removing nodes as needed.</li>
<li><strong>Shared storage layer</strong>: Data is persisted to the shared storage layer, which currently supports HDFS as well as various cloud-based object storage systems that are compatible with the S3 protocol, such as S3, OSS, GCS, Azure Blob, COS, BOS, and MinIO.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="From coupled to decoupled-2" src="https://doris.apache.org/assets/images/storage-compute-decoupled-2-82623382fce78f63315a2a07bb0e327a.JPEG" width="1280" height="692" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-2-design-highlight">1-2 Design highlight<a href="https://doris.apache.org/blog/release-note-3.0.0#1-2-design-highlight" class="hash-link" aria-label="Direct link to 1-2 Design highlight" title="Direct link to 1-2 Design highlight">&#x200B;</a></h3>
<p>The design of the compute-storage decoupled mode of Apache Doris highlights the transformation of the FE&apos;s in-memory metadata model into a shared metadata service. This approach offers a globally consistent state view, allowing any node to directly submit writes without needing to go through the FE for publishing. During write operations, data is stored in shared storage, while metadata is managed by the metadata service. <strong>This effectively controls the number of small files in shared storage. Meanwhile, the real-time write performance for individual tables is nearly on par with that in the compute-storage coupled mode. The system&apos;s overall write capacity is no longer limited by the processing power of a single FE node.</strong></p>
<p><img decoding="async" loading="lazy" alt="Design highlight" src="https://doris.apache.org/assets/images/design-hightlight-c14acd87500c4ada3740cb8fddfca025.PNG" width="1280" height="545" class="img_ev3q"></p>
<p>Based on the globally consistent state view, for data garbage collection, we have adopted a design approach for data deletion that is easier to prove correct and more efficient.</p>
<p>Specifically, data in the shared storage is incorporated into the globally consistent view offered by the shared meta data service. Whenever data is generated, we bind it to a separate, independent transaction. Similarly, for a meta data deletion operation, we also bind it to a separate, independent transaction. The purpose of this approach is to ensure that deletion and write operations cannot succeed together. The view records which data needs to be deleted, and the asynchronous deletion process can simply perform a forward deletion of the data based on the transaction records, without the need for reverse garbage collection.</p>
<p>As the tablet-related meta data in the FE is gradually migrated to the shared meta data service, the scalability of the Doris cluster will no longer be constrained by the memory capacity of a single FE node. Building upon the shared meta data service and the forward data deletion technique, we can conveniently expand functionality such as data sharing and lightweight cloning.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-3-comparison-with-alternative-solutions">1-3 Comparison with alternative solutions<a href="https://doris.apache.org/blog/release-note-3.0.0#1-3-comparison-with-alternative-solutions" class="hash-link" aria-label="Direct link to 1-3 Comparison with alternative solutions" title="Direct link to 1-3 Comparison with alternative solutions">&#x200B;</a></h3>
<p>Another design of decoupling compute and storage in the industry is to store the data and BE node meta data in a shared object storage or HDFS. However, this approach brings the following problems:</p>
<ul>
<li>
<p><strong>Inability to support real-time writes</strong>: During data writes, the data is mapped to tablets based on the partitioning and bucketing rules, generating segment files and rowset meta data. During the write process, a two-phase commit (Publish) is performed through the FE. When a BE node receives the Publish request, it then sets the rowset as visible. The Publish operation must not fail. If the rowset meta data is stored in the shared storage, the total small file data during the real-time write process would triple the size of the actual data files - one replica of data files, one for rowset meta data, and another for rowset meta data changes during Publish. The Publish operation is driven by a single FE node, so the write capacity of a single table or even the entire system is limited by the FE node&apos;s capabilities.</p>
<p><img decoding="async" loading="lazy" alt="Comparison with alternative solutions" src="https://doris.apache.org/assets/images/comparison-with-alternative-solutions-0b9bb94e642a30c74325b50b7e4a0856.png" width="1280" height="491" class="img_ev3q"></p>
<p>We compared the real-time data write performance of Apache Doris 3.0 with the above-described solution. We simulated 500 concurrent tasks writing 10,000 data files with 500 rows each, and 50 concurrent tasks writing 250 data files with 20,000 rows each, using the same computational resources.</p>
<p><strong>The results showed that at 50 concurrent tasks, the micro-batch write performances of Apache Doris in both compute-storage coupled and decoupled modes were almost identical, while the industry solution lagged behind Apache Doris by a factor of 100.</strong></p>
<p>At 500 concurrent tasks, the performance of Apache Doris in the compute-storage decoupled mode showed slight degradation, but it still maintained an 11X advantage over the industry solution. To ensure a fair test, Apache Doris did not enable the Group Commit feature (which the industry solution lacks). Enabling Group Commit would further enhance real-time write performance.</p>
<p><img decoding="async" loading="lazy" alt="Comparison with alternative solutions" src="https://doris.apache.org/assets/images/real-time-write-performance.-e3ac58a309c1bb48d6e54669cbedb92c.png" width="1280" height="734" class="img_ev3q"></p>
<p>Additionally, the industry solution also faces stability and cost issues in terms of real-time data ingestion:</p>
<ul>
<li>
<p>Stability concerns: A large number of small files can put pressure on the shared storage, especially HDFS, and introduce stability risks.</p>
</li>
<li>
<p>High object storage request costs: Some public cloud object storage services charge 10 times more for Put and Delete operations compared to Get operations. A large number of small files can lead to a significant increase in object storage request costs, which can even exceed the storage costs.</p>
</li>
</ul>
</li>
<li>
<p><strong>Limited scalability</strong>: Use cases of the compute-storage decoupled model often handles larger data storage sizes, since the FE (Frontend) meta data is entirely in-memory, when the number of tablets reaches a certain high level (e.g. tens of millions), the FE&apos;s memory pressure can become a bottleneck that limits the overall write throughput of the system.</p>
</li>
<li>
<p><strong>Potential data deletion logic issues</strong>: In the compute-storage decoupled architecture, data is stored with one single replica. Therefore, the data deletion logic is critical for the system&apos;s reliability. The conventional approach of cross-system data deletion by comparing the differences can be challenging. During the write process, there is no way to completely avoid deletion and write from succeeding together, which can lead to data loss. Additionally, when the storage system experiences anomalies, the input used for difference calculation may be incorrect, which potentially leads to unintended data deletion.</p>
</li>
<li>
<p><strong>Data sharing and lightweight cloning</strong>: The flexibility of the decoupled storage-compute architecture can enable future data sharing and lightweight data cloning, reducing the burden of enterprise data management. However, if each cluster has a separate FE, after cloning data across clusters, it becomes difficult to accurately determine which data is no longer referenced and can be safely deleted, as calculating cross-cluster references can easily lead to unintended data deletion.</p>
</li>
</ul>
<p>By evolving the FE&apos;s full in-memory meta data model into a shared meta data service, Apache Doris 3.0 avoids all the aforementioned issues.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-4-query-performance-comparison">1-4 Query performance comparison<a href="https://doris.apache.org/blog/release-note-3.0.0#1-4-query-performance-comparison" class="hash-link" aria-label="Direct link to 1-4 Query performance comparison" title="Direct link to 1-4 Query performance comparison">&#x200B;</a></h3>
<p>In the compute-storage decoupled mode, data needs to be read from the remote shared storage system, the main bottleneck has become the network bandwidth instead of the disk I/O in the compute-storage coupled mode.</p>
<p>To accelerate data access, Apache Doris has implemented a high-speed caching mechanism based on local disks, and provides two cache management policies: LRU (Least Recently Used) and TTL (Time-To-Live). The newly imported data is asynchronously written to the cache to accelerate the first-time access to the latest data. If the data required by a query is not in the cache, the system will read the data from the remote storage into memory and synchronously write it to the cache for subsequent queries.</p>
<p>In use cases involving multiple compute clusters, Apache Doris provides a cache preheating function. When a new compute cluster is established, users can choose to preheat specific data (such as tables or partitions) to further improve query efficiency.</p>
<p>In this context, we have conducted performance tests with different caching strategies in both the compute-storage coupled and decoupled modes, using the TPC-DS 1TB test dataset. The results are concluded as follows:</p>
<ul>
<li>
<p>When the cache is fully hit (i.e., all the data required for the query is loaded into the cache), <strong>the query performance of the compute-storage decoupled mode is on par with that of the compute-storage coupled mode</strong>.</p>
</li>
<li>
<p>When the cache is partially hit (i.e., the cache is cleared before the test, and data is gradually loaded into the cache during the test, with performance continuously improving), the query performance of the compute-storage decoupled mode is about 10% lower than that of the compute-storage coupled mode. This test scenario is the most similar to the real-life use cases.</p>
</li>
<li>
<p>When the cache is completely missed (i.e., the cache is cleared before every SQL execution, simulating an extreme case), the performance loss is around 35%. <strong>Even so, Apache Doris in the compute-storage decoupled mode delivers much higher performance than its alternative solutions.</strong></p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Query performance comparison" src="https://doris.apache.org/assets/images/query-performance-comparison-796eaa4e76522d5b967b4117c8f71963.png" width="1280" height="717" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-5-write-speed-comparison">1-5 Write speed comparison<a href="https://doris.apache.org/blog/release-note-3.0.0#1-5-write-speed-comparison" class="hash-link" aria-label="Direct link to 1-5 Write speed comparison" title="Direct link to 1-5 Write speed comparison">&#x200B;</a></h3>
<p>In terms of write performance, we have simulated two test cases under the same computing resources: batch import and high-concurrency real-time import. The comparison of write performance between the compute-storage coupled mode and the compute-storage decoupled mode is as follows:</p>
<ul>
<li>
<p><strong>Batch import</strong>: When importing the 1TB TPC-H and 1TB TPC-DS test datasets, <strong>the write performance of the compute-storage decoupled mode is 20.05% and 27.98% higher than the compute-storage coupled mode</strong>, respectively, under the single-replica configuration. During batch import, the segment file size is generally in the range of tens to hundreds of MB. In the compute-storage decoupled mode, the segment files are split into smaller files and concurrently uploaded to the object storage, which can result in higher throughput compared to writing to local disks. In real-life deployments, the compute-storage coupled mode typically uses three replicas, which means the write speed advantage of the compute-storage decoupled mode will be even more pronounced.</p>
</li>
<li>
<p><strong>High-concurrency real-time import</strong>: as described in the &quot;Comparison with alternative solutions&quot; section.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Write speed comparison" src="https://doris.apache.org/assets/images/write-speed-comparison-e450974dbcba7200a9afc3c7b48b7329.png" width="1280" height="772" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-6-tips-for-production-environment">1-6 Tips for production environment<a href="https://doris.apache.org/blog/release-note-3.0.0#1-6-tips-for-production-environment" class="hash-link" aria-label="Direct link to 1-6 Tips for production environment" title="Direct link to 1-6 Tips for production environment">&#x200B;</a></h3>
<ul>
<li>
<p><strong>Performance</strong>: For real-time data analysis, users can achieve query performance comparable to the compute-storage coupled mode by specifying a TTL (Time-To-Live) for the cache and writing newly ingested data into the cache. To prevent query jitter, users can cache the data generated by background tasks such as compaction and schema changes based on how frequently used the data is.</p>
</li>
<li>
<p><strong>Workload isolation</strong>: Users can achieve physical resource isolation for different business using multiple compute clusters. For workload isolation within a single compute cluster, users can utilize the Workload Group mechanism to limit and isolate resources for different queries.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-7-notes">1-7 Notes<a href="https://doris.apache.org/blog/release-note-3.0.0#1-7-notes" class="hash-link" aria-label="Direct link to 1-7 Notes" title="Direct link to 1-7 Notes">&#x200B;</a></h3>
<ul>
<li>
<p>Apache Doris 3.0 does not support the co-existence of the compute-storage coupled mode and the compute-storage decoupled mode. Users need to specify one of them during cluster deployment.</p>
</li>
<li>
<p>If users need the compute-storage coupled mode, following the <a href="https://doris.apache.org/docs/3.0/install/source-install/compilation-with-docker/" target="_blank" rel="noopener noreferrer">documentation</a> for its deployment and upgrade. We recommend using Doris Manager for quick deployment and cluster upgrades. However, the compute-storage decoupled mode does not yet support Doris Manager deployment and upgrade. We will continue iteration for better support in future versions.</p>
</li>
<li>
<p>Currently Apache Doris does not support in-place upgrade from V2.1 to the compute-storage decoupled mode of V3.0. For such purpose, users need to perform data migration using tools like X2Doris after deploying the compute-storage decoupled clusters. In the future, we will support migration without service interruption through the CCR (Change Data Capture) capability.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">info</div><div class="admonitionContent_UjKb"><p>See doc:
<a href="https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-data-lakehouse">2. Data lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.0#2-data-lakehouse" class="hash-link" aria-label="Direct link to 2. Data lakehouse" title="Direct link to 2. Data lakehouse">&#x200B;</a></h2>
<p>Apache Doris is positioned as a real-time data warehouse, but it is much more than that. In previous versions, we have consistently pushed beyond the boundaries of traditional data warehouse capabilities, advancing towards a unified data lakehouse. Version 3.0 marks a milestone in this journey, with its capabilities in the lakehouse architecture becoming fully mature. We believe that a unified lakehouse is identified by <strong>boundaryless data</strong> and <strong>lakehouse fusion</strong>:</p>
<p><strong>Boundaryless data: Apache Doris serves as a unified query processing engine, breaking down data barriers across different systems. It provides a consistent and ultra-fast analysis experience across all data sources, including data warehouses, data lakes, data streams, and local data files.</strong></p>
<ul>
<li>
<p><strong>Lakehouse query acceleration</strong>: Without the need to migrate data to Apache Doris, users can leverage Doris&#x2019; efficient query engine to directly query data stored in data lakes such as Iceberg, Hudi, Paimon, and offline data warehouses like Hive, thereby accelerating query analysis.</p>
</li>
<li>
<p><strong>Federated analysis</strong>: By extending its catalog and storage plugins, Apache Doris enhances its federated analysis capabilities, allowing users to perform unified analysis across multiple heterogeneous data sources without physically centralizing the data in a single storage system. This enables external table queries and federated joins between internal and external tables, breaking down data silos and providing globally consistent data insights.</p>
</li>
<li>
<p><strong>Data lake construction</strong>: Apache Doris introduces write-back functionality for Hive and Iceberg, allowing users to directly create Hive and Iceberg tables through Doris and write data into them. This allows users to write internal table data back to the offline lakehouse or process offline lakehouse data using Doris and save the results back into the lakehouse, simplifying and streamlining the data lake construction process.</p>
</li>
</ul>
<p><strong>Lakehouse fusion: As data lake architectures become increasingly complex, the costs of technology selection and maintenance rise for users. Achieving consistent fine-grained access control across multiple systems also becomes challenging, and real-time performance suffers. To address this, Apache Doris integrates core features of the data lake, transforming itself into a lightweight, efficient, native real-time lakehouse.</strong></p>
<ul>
<li>
<p><strong>Real-time data updates</strong>: Starting with version 1.2, Apache Doris enhanced the primary key model by introducing Merge-on-Write, supporting real-time updates. This feature allows high-frequency, real-time data updates based on primary key changes from upstream data sources.</p>
</li>
<li>
<p><strong>Data science and</strong> <strong>AI</strong> <strong>computation support</strong>: From version 2.1, Apache Doris, using the efficient Arrow Flight protocol, increased the openness of its storage system and its support for various compute loads, enabling data science and AI computations.</p>
</li>
<li>
<p><strong>Enhancements for semi-structured and unstructured Data</strong>: Apache Doris has introduced support for data types like Array, Map, Struct, JSON, and Variant, with plans to support vector indexing in the future.</p>
</li>
<li>
<p><strong>Improved resource efficiency by decoupling storage and compute</strong>: With version 3.0, Apache Doris supports a decoupled storage and compute mode, further improving resource efficiency and scalability.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-1-faster-queries-in-the-data-lakehouse">2-1 Faster queries in the data lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.0#2-1-faster-queries-in-the-data-lakehouse" class="hash-link" aria-label="Direct link to 2-1 Faster queries in the data lakehouse" title="Direct link to 2-1 Faster queries in the data lakehouse">&#x200B;</a></h3>
<p>TPC-H and TPC-DS benchmarking proves that Apache Doris achieves average query performance that is 3 to 5 times faster than Trino/Presto.</p>
<p>In V3.0, we have focused on optimizing query performance for production environments, including:</p>
<ul>
<li>
<p><strong>More granular task splitting strategy</strong>: By adjusting the consistent hashing algorithm and introducing a task sharding weighting mechanism, we ensure balanced query loads across all nodes.</p>
</li>
<li>
<p><strong>Scheduling optimizations for use cases with numerous partitions and files</strong>: For cases with a large number of files (over 1 million), we have largely reduced query latency (from 100 seconds to 10 seconds) and alleviated memory pressure on the Frontend (FE) by asynchronously and batch-fetching file shards.</p>
</li>
</ul>
<p>We will continue to specifically enhance query acceleration performance in real-world business scenarios, improve the actual user experience, and build an industry-leading lakehouse query acceleration engine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-2-federated-analysis-more-data-connectors">2-2 Federated analysis: more data connectors<a href="https://doris.apache.org/blog/release-note-3.0.0#2-2-federated-analysis-more-data-connectors" class="hash-link" aria-label="Direct link to 2-2 Federated analysis: more data connectors" title="Direct link to 2-2 Federated analysis: more data connectors">&#x200B;</a></h3>
<p>Previous versions of Apache Doris support connectors for over 10 mainstream data lakehouses, warehouses, and relational databases. In V3.0, we have introduced the Trino Connector compatibility framework, which expands the range of data sources that Apache Doris can connect to. With this framework, users can easily adapt their existing setups to access corresponding data sources using Doris and leverage its high-speed computing engine for data analysis.</p>
<p>Currently, Doris has completed adaptations for Delta Lake, Kudu, BigQuery, Kafka, TPCH, and TPCDS. We also encourage contributions from developers to prolong this list.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Note</div><div class="admonitionContent_UjKb"><p>See doc:</p><ul>
<li>
<p>Trino Connector: <a href="https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/</a></p>
</li>
<li>
<p>TPC-H: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/</a></p>
</li>
<li>
<p>TPC-DS: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/</a></p>
</li>
<li>
<p>Delta Lake: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/</a></p>
</li>
<li>
<p>Kudu: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/</a></p>
</li>
<li>
<p>BigQuery: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/</a></p>
</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-3-data-lake-building">2-3 Data lake building<a href="https://doris.apache.org/blog/release-note-3.0.0#2-3-data-lake-building" class="hash-link" aria-label="Direct link to 2-3 Data lake building" title="Direct link to 2-3 Data lake building">&#x200B;</a></h3>
<p>In V3.0, we have introduced data writeback functionality for Hive and Iceberg. This allows users to create Hive and Iceberg tables directly through Doris and write data into these tables, and enables users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Doris.</p>
<p>In future iterations, Apache Doris will further enhance support for data lake table formats and improve the openness of storage APIs.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Note</div><div class="admonitionContent_UjKb"><p>See doc: <a href="https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-upgraded-semi-structured-data-analysis-capabilities">3. Upgraded semi-structured data analysis capabilities<a href="https://doris.apache.org/blog/release-note-3.0.0#3-upgraded-semi-structured-data-analysis-capabilities" class="hash-link" aria-label="Direct link to 3. Upgraded semi-structured data analysis capabilities" title="Direct link to 3. Upgraded semi-structured data analysis capabilities">&#x200B;</a></h2>
<p>In versions 2.0 and 2.1, Apache Doris introduced some well-embraced features such as inverted index, NGram Bloom Filter, and Variant data type to support high-performance full-text search and multi-dimensional analysis. With them, the storage and processing of complex semi-structured data have been more flexible and efficient.</p>
<p>In V3.0, we have further enhanced the capabilities in this scenario.</p>
<p>After extensive testing in production environments, the Variant data type has gained sufficient stability and become the preferred choice for JSON data storage and analysis. In V3.0, we have made multiple optimizations to it:</p>
<ul>
<li>
<p>Support for indexing of the Variant data type to accelerate queries, including inverted index, Bloom Filter index, and the built-in ZoneMap index.</p>
</li>
<li>
<p>Support for flexible partial column updates for Unique Key tables containing the Variant data type.</p>
</li>
<li>
<p>Support for the use of the Variant data type in the compute-storage decoupled mode, with optimizations of its metadata storage.</p>
</li>
<li>
<p>Support for exporting the Variant data type to formats such as Parquet and CSV.</p>
</li>
</ul>
<p>The inverted index, introduced since V2.0, has reached a high level of maturity after more than a year of refinement and is now running in production environments of hundreds of enterprises. In V3.0, we have made multiple optimizations to the inverted index:</p>
<ul>
<li>
<p>After performance optimizations, including lock concurrency, Apache Doris outperforms Elasticsearch in key metrics such as query latency and concurrency in real-time reporting analysis.</p>
</li>
<li>
<p>Optimized index file in the compute-storage decoupled mode to reduce remote storage calls and decrease index query latency.</p>
</li>
<li>
<p>Support for the Array data type to accelerate the <code>array_contains</code> queries.</p>
</li>
<li>
<p>Enhanced the <code>match_phrase_*</code> functionality, including support for slop and phrase prefix matching <code>match_phrase_prefix</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-enhanced-etl-capabilities">4. Enhanced ETL capabilities<a href="https://doris.apache.org/blog/release-note-3.0.0#4-enhanced-etl-capabilities" class="hash-link" aria-label="Direct link to 4. Enhanced ETL capabilities" title="Direct link to 4. Enhanced ETL capabilities">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-1-transaction-improvements">4-1. Transaction improvements<a href="https://doris.apache.org/blog/release-note-3.0.0#4-1-transaction-improvements" class="hash-link" aria-label="Direct link to 4-1. Transaction improvements" title="Direct link to 4-1. Transaction improvements">&#x200B;</a></h3>
<p>Data processing in data warehouses often involves multiple data changes that need to be handled as a single transaction. V3.0 provides explicit transaction support for <code>insert into select</code>, <code>delete</code>, and <code>update</code> operations. Example cases include:</p>
<ul>
<li>
<p><strong>Transactional requirements</strong>: For example, when updating data within a time range, the typical approach is to first delete the data in that time range, and then insert the new data. Considering that the data might already be in service, there is a need to ensure that queries visit either the old data or the new data. Thus, it can be achieved by executing the <code>delete</code> and <code>insert into select</code> operations in a transaction.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">DELETE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">FROM</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">WHERE</span><span class="token plain"> date </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2024-07-01&quot;</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">AND</span><span class="token plain"> date </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2024-07-31&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Simplified the processing of failed tasks</strong>: For example, when two <code>insert into select</code> operations are executed within a single transaction, if any of the operations fail, it can be retried directly.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">WITH</span><span class="token plain"> </span><span class="token class-name">LABEL</span><span class="token plain"> label_etl_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table1 </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Note</div><div class="admonitionContent_UjKb"><p>See doc: <a href="https://doris.apache.org/docs/3.0/data-operate/transaction/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/data-operate/transaction/</a>
Currently, explicit transaction synchronization is not supported in Cross-Cluster Replication (CCR).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-2-improved-observability">4-2. Improved observability<a href="https://doris.apache.org/blog/release-note-3.0.0#4-2-improved-observability" class="hash-link" aria-label="Direct link to 4-2. Improved observability" title="Direct link to 4-2. Improved observability">&#x200B;</a></h3>
<ul>
<li>
<p><strong>Real-time profile retrieval</strong>: In previous versions, due to issues with the execution plan or the data, some complex queries might have high computational requirements, so developers can only access the query profile for performance analysis after the completion of the query. This makes it hard to promptly identify issues in query execution to guarantee stability of the production environment. Now, with the ability to retrieve real-time profiles, V3.0 allows users to monitor query execution as the query is running. It also allows them to better monitor the progress of each ETL job.</p>
</li>
<li>
<p><strong><code>backend_active_tasks</code> system table</strong>: The <code>backend_active_tasks</code> system table provides real-time resource consumption information for each query on each BE node. Users can analyze this system table using SQL to obtain the resource usage of each query, which helps identify large queries or abnormal workloads.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-asynchronous-materialized-view">5. Asynchronous materialized view<a href="https://doris.apache.org/blog/release-note-3.0.0#5-asynchronous-materialized-view" class="hash-link" aria-label="Direct link to 5. Asynchronous materialized view" title="Direct link to 5. Asynchronous materialized view">&#x200B;</a></h2>
<p>In V3.0, asynchronous materialized view is faster and more stable. It is also more user-friendly for query acceleration and data modeling scenarios. We have restructured the logic for transparent rewrite and expanded its capabilities, making it 2X faster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-1-refresh">5-1 Refresh<a href="https://doris.apache.org/blog/release-note-3.0.0#5-1-refresh" class="hash-link" aria-label="Direct link to 5-1 Refresh" title="Direct link to 5-1 Refresh">&#x200B;</a></h3>
<ul>
<li>
<p>Support for incremental update of materialized views by partitions and partition roll-ups on materialized views to allow refreshes at different granularities.</p>
</li>
<li>
<p>Support for nested materialized views, which is useful in data modeling scenarios.</p>
</li>
<li>
<p>Support for index creation and sort key specification in asynchronous materialized views, which will improve query performance after the materialized view is hit.</p>
</li>
<li>
<p>Higher usability of materialized view DDL with support for atomically replacing materialized views, allowing modifications to the materialized view definition SQL while keeping the materialized view available.</p>
</li>
<li>
<p>Support for non-deterministic functions in materialized views to better serve daily materialized view creation.</p>
</li>
<li>
<p>Support for trigger-based materialized view refresh, which ensures data consistency in data modeling with nested materialized views.</p>
</li>
<li>
<p>Support for a broader range of SQL patterns for building partitioned materialized views, making the incremental update capability available to more use cases.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-2-refresh-stability">5-2 Refresh stability<a href="https://doris.apache.org/blog/release-note-3.0.0#5-2-refresh-stability" class="hash-link" aria-label="Direct link to 5-2 Refresh stability" title="Direct link to 5-2 Refresh stability">&#x200B;</a></h3>
<ul>
<li>V3.0 supports specifying a Workload Group for building materialized views. This is to limit the resources used by the materialized view build process and ensure that sufficient resources remain available for ongoing queries.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-3-transparent-rewrite">5-3 Transparent rewrite<a href="https://doris.apache.org/blog/release-note-3.0.0#5-3-transparent-rewrite" class="hash-link" aria-label="Direct link to 5-3 Transparent rewrite" title="Direct link to 5-3 Transparent rewrite">&#x200B;</a></h3>
<ul>
<li>
<p>Support for transparent rewrite of more Join types, including derived Joins. Even when there is a mismatch of Join types between the query and materialized view, transparent rewrite can still be performed by compensating with additional predicates, as long as the materialized view can provide all the data needed for the query.</p>
</li>
<li>
<p>Support for more aggregate functions for roll-up as well as rewrite of multi-dimensional aggregations like GROUPING SETS, ROLLUP, and CUBE; support rewriting queries with aggregations when the materialized view does not contain aggregations, simplifying Join operations and expression computation.</p>
</li>
<li>
<p>Support for transparent rewrite of nested materialized views, enabling higher performance for complex queries.</p>
</li>
<li>
<p>For partially invalid partitioned materialized views, V3.0 supports <code>Union All</code> the base tables for data completion, expanding the applicability of partitioned materialized views.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-4-transparent-rewrite-performance">5-4 Transparent rewrite performance<a href="https://doris.apache.org/blog/release-note-3.0.0#5-4-transparent-rewrite-performance" class="hash-link" aria-label="Direct link to 5-4 Transparent rewrite performance" title="Direct link to 5-4 Transparent rewrite performance">&#x200B;</a></h3>
<ul>
<li>Continuous optimization has been done to improve the transparent rewrite performance, achieving 2X the speed compared to version 2.1.0.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">Note</div><div class="admonitionContent_UjKb"><p>See doc:</p><p><a href="https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view</a></p><p><a href="https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-performance-improvement">6. Performance improvement<a href="https://doris.apache.org/blog/release-note-3.0.0#6-performance-improvement" class="hash-link" aria-label="Direct link to 6. Performance improvement" title="Direct link to 6. Performance improvement">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-1-smarter-optimizer">6-1 Smarter optimizer<a href="https://doris.apache.org/blog/release-note-3.0.0#6-1-smarter-optimizer" class="hash-link" aria-label="Direct link to 6-1 Smarter optimizer" title="Direct link to 6-1 Smarter optimizer">&#x200B;</a></h3>
<p>In V3.0, the query optimizer has been enhanced in terms of framework capabilities, distributed plan support, optimizer infrastructure, and rule expansion. It provides better optimization capabilities for more complex and diverse business scenarios, with higher blind test performance for complex SQL:</p>
<ul>
<li>
<p><strong>Improved plan enumeration capability</strong>: The key structure Memo for plan enumeration has been restructured and normalized. This improves the efficiency of the Cascades framework in plan enumeration and the possibility of producing better plans. Additionally, it fixes incomplete column pruning during the Join Reorder process in older versions, which led to unnecessary overhead of the Join operator, thus improving the execution performance in the relevant scenarios.</p>
</li>
<li>
<p><strong>Improved distributed plan support</strong>: The distributed query plan has been enhanced to allow aggregation, join, and window function operations to more intelligently identify the data characteristics of intermediate computation results, avoiding ineffective data redistribution operations. Meanwhile, we have optimized the execution under the multi-replica continuous execution mode, making it more data cache-friendly.</p>
</li>
<li>
<p><strong>Improved optimizer infrastructure</strong>: V3 has fixed several issues in cost model and statistics information estimation. The fixes to the cost model are more adaptable to the evolution of the execution engine, making the execution plan more stable compared to previous versions.</p>
</li>
<li>
<p><strong>Enhanced Runtime Filter plan support</strong>: On the basis of Join Runtime Filter, V3.0 has expanded the capability of the TopN Runtime Filter to achieve better performance in use cases that involve a TopN operator.</p>
</li>
<li>
<p><strong>Enriched optimization rule library</strong>: Based on user feedback and internal testing results, we have introduced optimization rules such as Intersect Reorder to enrich the rule set of the optimizer.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-2-self-adaptive-runtime-filter">6-2 Self-adaptive Runtime Filter<a href="https://doris.apache.org/blog/release-note-3.0.0#6-2-self-adaptive-runtime-filter" class="hash-link" aria-label="Direct link to 6-2 Self-adaptive Runtime Filter" title="Direct link to 6-2 Self-adaptive Runtime Filter">&#x200B;</a></h3>
<p>In previous versions, the generation of Runtime Filter relies on manual setting by users based on statistical information. However, inaccurate settings in certain cases could lead to performance instability.</p>
<p>In V3.0, Doris implements a self-adaptive Runtime Filter calculation approach. It can estimate the Runtime Filter at runtime based on the data size with high accuracy, enabling better performance in use cases with large data volumes and high workloads.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-3-function-performance-optimization">6-3 Function performance optimization<a href="https://doris.apache.org/blog/release-note-3.0.0#6-3-function-performance-optimization" class="hash-link" aria-label="Direct link to 6-3 Function performance optimization" title="Direct link to 6-3 Function performance optimization">&#x200B;</a></h3>
<ul>
<li>V3.0 has improved the vectorized implementation of dozens of functions, enabling a performance improvement of over 50% for some commonly used functions.</li>
<li>V3.0 has also made extensive optimizations to the aggregation of nullable data types, enabling a 30% performance improvement.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-4-blind-test-performance-improvement">6-4 Blind test performance improvement<a href="https://doris.apache.org/blog/release-note-3.0.0#6-4-blind-test-performance-improvement" class="hash-link" aria-label="Direct link to 6-4 Blind test performance improvement" title="Direct link to 6-4 Blind test performance improvement">&#x200B;</a></h3>
<p>Our blind tests on V3.0 and V2.1 show that the new version is 7.3% and 6.2% faster in TPC-DS and TPC-H benchmark tests, respectively.</p>
<p><img decoding="async" loading="lazy" alt="Blind test performance improvement" src="https://doris.apache.org/assets/images/blind-test-performance-improvement-f09420ba8b50be53ab8eb1c410f3f3fd.png" width="1280" height="823" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-new-features">7. New features<a href="https://doris.apache.org/blog/release-note-3.0.0#7-new-features" class="hash-link" aria-label="Direct link to 7. New features" title="Direct link to 7. New features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-1-java-udtf">7-1 Java UDTF<a href="https://doris.apache.org/blog/release-note-3.0.0#7-1-java-udtf" class="hash-link" aria-label="Direct link to 7-1 Java UDTF" title="Direct link to 7-1 Java UDTF">&#x200B;</a></h3>
<p>Version 3.0 has added support for Java UDTFs. The key operations are as follows:</p>
<ul>
<li>
<p>Implementing a UDTF: Similar to a UDF, a UDTF requires the user to implement an <code>evaluate</code> method. Note that the return value of a UDTF function must be of the <code>Array</code> data type.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> class UDTFStringTest {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> ArrayList</span><span class="token operator">&lt;</span><span class="token plain">String</span><span class="token operator">&gt;</span><span class="token plain"> evaluate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">String </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> String separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> separator </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> new ArrayList</span><span class="token operator">&lt;&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Arrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">asList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
</li>
<li>
<p>Creating a UDTF: By default, two corresponding functions will be created - <code>java-utdf</code>and <code>java-utdf_outer</code>. The <code>_outer</code> suffix adds a single row of <code>NULL</code> data when the table function generates 0 rows of output.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLES</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FUNCTION</span><span class="token plain"> java</span><span class="token operator">-</span><span class="token plain">utdf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">RETURNS</span><span class="token plain"> array</span><span class="token operator">&lt;</span><span class="token plain">string</span><span class="token operator">&gt;</span><span class="token plain"> PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;file&quot;</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;file:///pathTo/java-udaf.jar&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;symbol&quot;</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;org.apache.doris.udf.demo.UDTFStringTest&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;always_nullable&quot;</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;type&quot;</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;JAVA_UDF&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">info</div><div class="admonitionContent_UjKb"><p>See doc: <a href="https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-2-generated-column">7-2 Generated column<a href="https://doris.apache.org/blog/release-note-3.0.0#7-2-generated-column" class="hash-link" aria-label="Direct link to 7-2 Generated column" title="Direct link to 7-2 Generated column">&#x200B;</a></h3>
<p>A generated column is a special column whose value is calculated from the values of other columns rather than directly inserted or updated by the user. It supports pre-computing the results of expressions and storing them in the database, which is suitable for scenarios that require frequent queries or complex calculations.</p>
<p>Results can be automatically calculated based on predefined expressions when data is imported or updated, and then stored persistently. In this way, during subsequent queries, the system can directly access these calculated results without performing complex calculations, thereby improving query performance.</p>
<p>Generated columns are supported since V3.0. When creating a table, you can specify a column as generated column. A generated column automatically calculates values based on the defined expression when data is written. Generated columns allow for more complex expressions to be defined, but the value cannot be explicitly written or set.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class="admonitionHeading_f1Ed">info</div><div class="admonitionContent_UjKb"><p>See doc: <a href="https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-functional-improvements">8. Functional improvements<a href="https://doris.apache.org/blog/release-note-3.0.0#8-functional-improvements" class="hash-link" aria-label="Direct link to 8. Functional improvements" title="Direct link to 8. Functional improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-1-materialized-view">8-1. Materialized view<a href="https://doris.apache.org/blog/release-note-3.0.0#8-1-materialized-view" class="hash-link" aria-label="Direct link to 8-1. Materialized view" title="Direct link to 8-1. Materialized view">&#x200B;</a></h3>
<p>We have refactored the selection logic for materialized views and migrated it from the rule-based optimizer (RBO) to the cost-based optimizer (CBO). This aligns the selection logic with that of asynchronous materialized views. This functionality is enabled by default. If any issues are encountered, you can revert to the RBO mode using <code>set global enable_sync_mv_cost_based_rewrite = false</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-2-routine-load">8-2. Routine Load<a href="https://doris.apache.org/blog/release-note-3.0.0#8-2-routine-load" class="hash-link" aria-label="Direct link to 8-2. Routine Load" title="Direct link to 8-2. Routine Load">&#x200B;</a></h3>
<p>In previous versions, the Routine Load functionality faced some usability challenges, such as uneven task scheduling across BE nodes, untimely task scheduling, complex configuration requirements (the need to change multiple FE and BE settings for optimization), insufficient overall stability (where restarts or upgrades could frequently pause Routine Load jobs, requiring manual user intervention to resume).</p>
<p>To address these issues, we have made extensive optimizations to the Routine Load feature:</p>
<ul>
<li>
<p><strong>Resource scheduling</strong>: We have improved the scheduling balance to make sure that tasks are more evenly distributed across BE nodes. Jobs that encounter unrepairable errors will be promptly paused to avoid wasting resources on futile scheduling attempts. Additionally, we have improved the timeliness of the scheduling process, which has enhanced the import performance of Routine Load.</p>
</li>
<li>
<p><strong>Parameter configuration</strong>: Users in most environments no longer need to modify FE and BE configurations for optimization. An automatic adjustment mechanism with timeout parameter has been introduced to prevent tasks from constantly retrying when cluster pressure increases.</p>
</li>
<li>
<p><strong>Stability</strong>: We have enhanced the robustness of Doris in various exceptional scenarios, such as FE failovers, BE rolling upgrades, and Kafka cluster anomalies, ensuring continuous stable operation. We have also optimized the Auto Resume mechanism, allowing Routine Load to automatically resume operation after faults are repaired, reducing the need for manual user intervention.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-behavior-changed">9. Behavior changed<a href="https://doris.apache.org/blog/release-note-3.0.0#9-behavior-changed" class="hash-link" aria-label="Direct link to 9. Behavior changed" title="Direct link to 9. Behavior changed">&#x200B;</a></h2>
<ul>
<li>
<p><code>cpu_resource_limit</code> will no longer be supported, and all types of resource isolation will be implemented through Workload Groups.</p>
</li>
<li>
<p>Please use JDK 17 for Apache Doris 3.0 and later versions. The recommended version being <code>jdk-17.0.10_linux-x64_bin.tar.gz</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="try-apache-doris-30-now">Try Apache Doris 3.0 now!<a href="https://doris.apache.org/blog/release-note-3.0.0#try-apache-doris-30-now" class="hash-link" aria-label="Direct link to Try Apache Doris 3.0 now!" title="Direct link to Try Apache Doris 3.0 now!">&#x200B;</a></h2>
<p>Before the official release of version 3.0, the compute-storage decoupled mode of Apache Doris has undergone nearly two years of extensive testing and optimization in the production environments of hundreds of enterprises. Contributors from many tech giants have collaborated with the community to provide a significant number of test cases based on their real-world business needs. This has rigorously validated the usability and stability of version 3.0.</p>
<p>We highly recommend users with compute-storage decoupling needs to download version 3.0 and experience it firsthand.</p>
<p>Going forward, we will accelerate our release iteration cycle to deliver a more stable version experience for all users. Feel free to join us in the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2gmq5o30h-455W226d79zP3L96ZhXIoQ" target="_blank" rel="noopener noreferrer">Apache Doris community</a> and engage directly with the core developers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="https://doris.apache.org/blog/release-note-3.0.0#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">&#x200B;</a></h2>
<p>Special thanks to the following contributors who participated in the development, testing, and provided feedback for this version:</p>
<p>@133tosakarin&#x3001;@390008457&#x3001;@924060929&#x3001;@AcKing-Sam&#x3001;@AshinGau&#x3001;@BePPPower&#x3001;@BiteTheDDDDt&#x3001;@ByteYue&#x3001;@CSTGluigi&#x3001;@CalvinKirs&#x3001;@Ceng23333&#x3001;@DarvenDuan&#x3001;@DongLiang-0&#x3001;@Doris-Extras&#x3001;@Dragonliu2018&#x3001;@Emor-nj&#x3001;@FreeOnePlus&#x3001;@Gabriel39&#x3001;@GoGoWen&#x3001;@HappenLee&#x3001;@HowardQin&#x3001;@Hyman-zhao&#x3001;@INNOCENT-BOY&#x3001;@JNSimba&#x3001;@JackDrogon&#x3001;@Jibing-Li&#x3001;@KassieZ&#x3001;@Lchangliang&#x3001;@LemonLiTree&#x3001;@LiBinfeng-01&#x3001;@LompleZ&#x3001;@M1saka2003&#x3001;@Mryange&#x3001;@Nitin-Kashyap&#x3001;@On-Work-Song&#x3001;@SWJTU-ZhangLei&#x3001;@StarryVerse&#x3001;@TangSiyang2001&#x3001;@Tech-Circle-48&#x3001;@Thearas&#x3001;@Vallishp&#x3001;@WinkerDu&#x3001;@XieJiann&#x3001;@XuJianxu&#x3001;@XuPengfei-1020&#x3001;@Yukang-Lian&#x3001;@Yulei-Yang&#x3001;@Z-SWEI&#x3001;@ZhongJinHacker&#x3001;@adonis0147&#x3001;@airborne12&#x3001;@allenhooo&#x3001;@amorynan&#x3001;@bingquanzhao&#x3001;@biohazard4321&#x3001;@bobhan1&#x3001;@caiconghui&#x3001;@cambyzju&#x3001;@caoliang-web&#x3001;@catpineapple&#x3001;@cjj2010&#x3001;@csun5285&#x3001;@dataroaring&#x3001;@deardeng&#x3001;@dongsilun&#x3001;@dutyu&#x3001;@echo-hhj&#x3001;@eldenmoon&#x3001;@elvestar&#x3001;@englefly&#x3001;@feelshana&#x3001;@feifeifeimoon&#x3001;@feiniaofeiafei&#x3001;@felixwluo&#x3001;@freemandealer&#x3001;@gavinchou&#x3001;@ghkang98&#x3001;@gnehil&#x3001;@hechao-ustc&#x3001;@hello-stephen&#x3001;@httpshirley&#x3001;@hubgeter&#x3001;@hust-hhb&#x3001;@iszhangpch&#x3001;@iwanttobepowerful&#x3001;@ixzc&#x3001;@jacktengg&#x3001;@jackwener&#x3001;@jeffreys-cat&#x3001;@kaijchen&#x3001;@kaka11chen&#x3001;@kindred77&#x3001;@koarz&#x3001;@kobe6th&#x3001;@kylinmac&#x3001;@larshelge&#x3001;@liaoxin01&#x3001;@lide-reed&#x3001;@liugddx&#x3001;@liujiwen-up&#x3001;@liutang123&#x3001;@lsy3993&#x3001;@luwei16&#x3001;@luzhijing&#x3001;@lxliyou001&#x3001;@mongo360&#x3001;@morningman&#x3001;@morrySnow&#x3001;@mrhhsg&#x3001;@my-vegetable-has-exploded&#x3001;@mymeiyi&#x3001;@nanfeng1999&#x3001;@nextdreamblue&#x3001;@pingchunzhang&#x3001;@platoneko&#x3001;@py023&#x3001;@qidaye&#x3001;@qzsee&#x3001;@raboof&#x3001;@rohitrs1983&#x3001;@rotkang&#x3001;@ryanzryu&#x3001;@seawinde&#x3001;@shoothzj&#x3001;@shuke987&#x3001;@sjyango&#x3001;@smallhibiscus&#x3001;@sollhui&#x3001;@sollhui&#x3001;@spaces-X&#x3001;@stalary&#x3001;@starocean999&#x3001;@superdiaodiao&#x3001;@suxiaogang223&#x3001;@taptao&#x3001;@vhwzx&#x3001;@vinlee19&#x3001;@w41ter&#x3001;@wangbo&#x3001;@wangshuo128&#x3001;@whutpencil&#x3001;@wsjz&#x3001;@wuwenchi&#x3001;@wyxxxcat&#x3001;@xiaokang&#x3001;@xiedeyantu&#x3001;@xiedeyantu&#x3001;@xingyingone&#x3001;@xinyiZzz&#x3001;@xy720&#x3001;@xzj7019&#x3001;@yagagagaga&#x3001;@yiguolei&#x3001;@yongjinhou&#x3001;@ytwp&#x3001;@yuanyuan8983&#x3001;@yujun777&#x3001;@yuxuan-luo&#x3001;@zclllyybb&#x3001;@zddr&#x3001;@zfr9527&#x3001;@zgxme&#x3001;@zhangbutao&#x3001;@zhangstar333&#x3001;@zhannngchen&#x3001;@zhiqiang-hhhh&#x3001;@ziyanTOP&#x3001;@zxealous&#x3001;@zy-kkk&#x3001;@zzzxl1993&#x3001;@zzzzzzzs</p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.2 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.2</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.2</guid>
            <pubDate>Tue, 15 Oct 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[In this version, Apache Doris has improvements in compute-storage decoupling, data storage, lakehouse, query optimizer, query execution and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.2 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-10-15T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">October 15, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.2 version was officially released on October 15, 2024, featuring updates and improvements in compute-storage decoupling, data storage, lakehouse, query optimizer, query execution and more.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavioral-changes">Behavioral Changes<a href="https://doris.apache.org/blog/release-note-3.0.2#behavioral-changes" class="hash-link" aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.2#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Limited the number of tablets in a single backup task to prevent FE memory overflow. <a href="https://github.com/apache/doris/pull/40518" target="_blank" rel="noopener noreferrer">#40518</a></li>
<li>The <code>SHOW PARTITIONS</code> command now displays the <code>CommittedVersion</code> of partitions. <a href="https://github.com/apache/doris/pull/28274" target="_blank" rel="noopener noreferrer">#28274</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="https://doris.apache.org/blog/release-note-3.0.2#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>The default printing mode (asynchronous) of <code>fe.log</code> now includes file line number information. If performance issues are encountered due to line number output, please switch to BRIEF mode. <a href="https://github.com/apache/doris/pull/39419" target="_blank" rel="noopener noreferrer">#39419</a></li>
<li>The default value of the session variable <code>ENABLE_PREPARED_STMT_AUDIT_LOG</code> has been changed from <code>true</code> to <code>false</code>, and the audit log of prepare statements will no longer be printed. <a href="https://github.com/apache/doris/pull/38865" target="_blank" rel="noopener noreferrer">#38865</a></li>
<li>The default value of the session variable <code>max_allowed_packet</code> has been adjusted from 1MB to 16MB to align with MySQL 8.4. <a href="https://github.com/apache/doris/pull/38697" target="_blank" rel="noopener noreferrer">#38697</a></li>
<li>The JVM of FE and BE defaults to using the UTF-8 character set. <a href="https://github.com/apache/doris/pull/39521" target="_blank" rel="noopener noreferrer">#39521</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.2#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.2#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Backup and recovery now support clearing tables or partitions that are not in the backup. <a href="https://github.com/apache/doris/pull/39028" target="_blank" rel="noopener noreferrer">#39028</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.2#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Support for parallel recycling of expired data on multiple tablets. <a href="https://github.com/apache/doris/pull/37630" target="_blank" rel="noopener noreferrer">#37630</a></li>
<li>Support for changing storage vaults through <code>ALTER</code> statements. <a href="https://github.com/apache/doris/pull/38685" target="_blank" rel="noopener noreferrer">#38685</a>  <a href="https://github.com/apache/doris/pull/37606" target="_blank" rel="noopener noreferrer">#37606</a></li>
<li>Support for importing a large number of tablets (5000+) in a single transaction (experimental feature). <a href="https://github.com/apache/doris/pull/38243" target="_blank" rel="noopener noreferrer">#38243</a></li>
<li>Support for automatically aborting pending transactions caused by reasons such as node restarts, solving the issue of pending transactions blocking decommission or schema change. <a href="https://github.com/apache/doris/pull/37669" target="_blank" rel="noopener noreferrer">#37669</a></li>
<li>A new session variable <code>enable_segment_cache</code> has been added to control whether to use segment cache during queries (default is <code>true</code>). <a href="https://github.com/apache/doris/pull/37141" target="_blank" rel="noopener noreferrer">#37141</a></li>
<li>Resolved the issue of not being able to import a large amount of data during schema changes in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39558" target="_blank" rel="noopener noreferrer">#39558</a></li>
<li>Support for adding multiple follower roles of FE in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/38388" target="_blank" rel="noopener noreferrer">#38388</a></li>
<li>Support for using memory as file cache to accelerate queries in environments with no disks or low-performance HDDs. <a href="https://github.com/apache/doris/pull/38811" target="_blank" rel="noopener noreferrer">#38811</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.2#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>New Lakesoul Catalog has been added. <a href="https://doris.apache.org/zh-CN/docs/dev/lakehouse/datalake-analytics/lakesoul" target="_blank" rel="noopener noreferrer">Apache Doris Docs</a></li>
<li>A new system table <code>catalog_meta_cache_statistics</code> has been added to view the usage of various metadata caches in external catalog. <a href="https://github.com/apache/doris/pull/40155" target="_blank" rel="noopener noreferrer">#40155</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.2#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Support for <code>is [not] true/false</code> expressions. <a href="https://github.com/apache/doris/pull/38623" target="_blank" rel="noopener noreferrer">#38623</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.2#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>A new CRC32 function has been added. <a href="https://github.com/apache/doris/pull/38204" target="_blank" rel="noopener noreferrer">#38204</a></li>
<li>New aggregate functions skew and kurt have been added. <a href="https://github.com/apache/doris/pull/41277" target="_blank" rel="noopener noreferrer">#41277</a></li>
<li>Profiles are now persisted to the FE&apos;s disk to retain more profiles. <a href="https://github.com/apache/doris/pull/33690" target="_blank" rel="noopener noreferrer">#33690</a></li>
<li>A new system table <code>workload_group_privileges</code> has been added to view permission information related to workload groups. <a href="https://github.com/apache/doris/pull/38436" target="_blank" rel="noopener noreferrer">#38436</a></li>
<li>A new system table <code>workload_group_resource_usage</code> has been added to monitor resource statistics of workload groups. <a href="https://github.com/apache/doris/pull/39177" target="_blank" rel="noopener noreferrer">#39177</a></li>
<li>Workload groups now support limiting reads of local IO and remote IO. <a href="https://github.com/apache/doris/pull/39012" target="_blank" rel="noopener noreferrer">#39012</a></li>
<li>Workload groups now support cgroupv2 to limit CPU usage. <a href="https://github.com/apache/doris/pull/39374" target="_blank" rel="noopener noreferrer">#39374</a></li>
<li>A new system table <code>information_schema.partitions</code> has been added to view some table creation attributes. <a href="https://github.com/apache/doris/pull/40636" target="_blank" rel="noopener noreferrer">#40636</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-1">Other<a href="https://doris.apache.org/blog/release-note-3.0.2#other-1" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>Support for using the <code>SHOW</code> statement to display BE&apos;s configuration information, such as <code>SHOW BACKEND CONFIG LIKE ${pattern}</code>. <a href="https://github.com/apache/doris/pull/36525" target="_blank" rel="noopener noreferrer">#36525</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.2#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load">Load<a href="https://doris.apache.org/blog/release-note-3.0.2#load" class="hash-link" aria-label="Direct link to Load" title="Direct link to Load">&#x200B;</a></h3>
<ul>
<li>Improved the import efficiency of routine load when encountering frequent EOFs from Kafka. <a href="https://github.com/apache/doris/pull/39975" target="_blank" rel="noopener noreferrer">#39975</a></li>
<li>The stream load result now includes the time taken to read HTTP data, <code>ReceiveDataTimeMs</code>, which can quickly determine slow stream load issues caused by network reasons. <a href="https://github.com/apache/doris/pull/40735" target="_blank" rel="noopener noreferrer">#40735</a></li>
<li>Optimized the routine load timeout logic to avoid frequent timeouts during inverted index and mow writes. <a href="https://github.com/apache/doris/pull/40818" target="_blank" rel="noopener noreferrer">#40818</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-2">Storage<a href="https://doris.apache.org/blog/release-note-3.0.2#storage-2" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Support for batch addition of partitions. <a href="https://github.com/apache/doris/pull/37114" target="_blank" rel="noopener noreferrer">#37114</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-1">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.2#compute-storage-decoupled-1" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Added the meta-service HTTP interface <code>/MetaService/http/show_meta_ranges</code> to facilitate the statistics of KV distribution in FDB. <a href="https://github.com/apache/doris/pull/39208" target="_blank" rel="noopener noreferrer">#39208</a></li>
<li>The meta-service/recycler stop script ensures that the process fully exits before returning. <a href="https://github.com/apache/doris/pull/40218" target="_blank" rel="noopener noreferrer">#40218</a></li>
<li>Support for using the session variable <code>version_comment</code> (Cloud Mode) to display the current deployment mode as compute-storage decoupled. <a href="https://github.com/apache/doris/pull/38269" target="_blank" rel="noopener noreferrer">#38269</a></li>
<li>Fixed the detailed message returned when transaction submission fails. <a href="https://github.com/apache/doris/pull/40584" target="_blank" rel="noopener noreferrer">#40584</a></li>
<li>Support for using one meta-service process to provide both metadata services and data recycling services. <a href="https://github.com/apache/doris/pull/40223" target="_blank" rel="noopener noreferrer">#40223</a></li>
<li>Optimized the default configuration of file_cache to avoid potential issues when not set. <a href="https://github.com/apache/doris/pull/41421" target="_blank" rel="noopener noreferrer">#41421</a>  <a href="https://github.com/apache/doris/pull/41507" target="_blank" rel="noopener noreferrer">#41507</a></li>
<li>Improved query performance by batch retrieving the version of multiple partitions. <a href="https://github.com/apache/doris/pull/38949" target="_blank" rel="noopener noreferrer">#38949</a></li>
<li>Delayed the redistribution of tablets to avoid query performance issues caused by temporary network fluctuations. <a href="https://github.com/apache/doris/pull/40371" target="_blank" rel="noopener noreferrer">#40371</a></li>
<li>Optimized the read-write lock logic in the balance. <a href="https://github.com/apache/doris/pull/40633" target="_blank" rel="noopener noreferrer">#40633</a></li>
<li>Enhanced the robustness of file cache in handling TTL filenames during restarts/crashes. <a href="https://github.com/apache/doris/pull/40226" target="_blank" rel="noopener noreferrer">#40226</a></li>
<li>Added the BE HTTP interface <code>/api/file_cache?op=hash</code> to facilitate the calculation of the hash file names of segment files on disk. <a href="https://github.com/apache/doris/pull/40831" target="_blank" rel="noopener noreferrer">#40831</a></li>
<li>Optimized the unified naming to be compatible with using compute group to represent BE groups (original cloud cluster). <a href="https://github.com/apache/doris/pull/40767" target="_blank" rel="noopener noreferrer">#40767</a></li>
<li>Optimized the waiting time for obtaining locks when calculating delete bitmaps in primary key tables. <a href="https://github.com/apache/doris/pull/40341" target="_blank" rel="noopener noreferrer">#40341</a></li>
<li>When there are many delete bitmaps in primary key tables, optimized the high CPU consumption during queries by pre-merging multiple delete bitmaps. <a href="https://github.com/apache/doris/pull/40204" target="_blank" rel="noopener noreferrer">#40204</a></li>
<li>Support for managing FE/BE nodes in compute-storage decoupled mode through SQL statements, hiding the logic of direct interaction with meta-service when deploying in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/40264" target="_blank" rel="noopener noreferrer">#40264</a></li>
<li>Added a script for rapid deployment of FDB. <a href="https://github.com/apache/doris/pull/39803" target="_blank" rel="noopener noreferrer">#39803</a></li>
<li>Optimized the output of <code>SHOW CACHE HOTSPOT</code> to unify the column name style with other <code>SHOW</code> statements. <a href="https://github.com/apache/doris/pull/41322" target="_blank" rel="noopener noreferrer">#41322</a></li>
<li>When using a storage vault as the storage backend, disallowed the use of <code>latest_fs()</code> to avoid binding different storage backends to the same table. <a href="https://github.com/apache/doris/pull/40516" target="_blank" rel="noopener noreferrer">#40516</a></li>
<li>Optimized the timeout strategy for calculating delete bitmaps when importing mow tables. <a href="https://github.com/apache/doris/pull/40562" target="_blank" rel="noopener noreferrer">#40562</a>  <a href="https://github.com/apache/doris/pull/40333" target="_blank" rel="noopener noreferrer">#40333</a></li>
<li>The enable_file_cache in be.conf is now enabled by default in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/41502" target="_blank" rel="noopener noreferrer">#41502</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.2#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>When reading tables in CSV format, support for the session <code>keep_carriage_return</code> setting to control the reading behavior of the <code>\r</code> symbol. <a href="https://github.com/apache/doris/pull/39980" target="_blank" rel="noopener noreferrer">#39980</a></li>
<li>The default maximum memory of BE&apos;s JVM has been adjusted to 2GB (affecting only new deployments). <a href="https://github.com/apache/doris/pull/41403" target="_blank" rel="noopener noreferrer">#41403</a></li>
<li>Hive Catalog has added <code>hive.recursive_directories_table</code> and <code>hive.ignore_absent_partitions</code> properties to specify whether to recursively traverse data directories and whether to ignore missing partitions. <a href="https://github.com/apache/doris/pull/39494" target="_blank" rel="noopener noreferrer">#39494</a></li>
<li>Optimized the Catalog refresh logic to avoid generating a large number of connections during refresh. <a href="https://github.com/apache/doris/pull/39205" target="_blank" rel="noopener noreferrer">#39205</a></li>
<li><code>SHOW CREATE DATABASE</code> and <code>SHOW CREATE TABLE</code> for external data sources now display location information. <a href="https://github.com/apache/doris/pull/39179" target="_blank" rel="noopener noreferrer">#39179</a></li>
<li>The new optimizer supports inserting data into JDBC external tables using the <code>INSERT INTO</code> statement. <a href="https://github.com/apache/doris/pull/41511" target="_blank" rel="noopener noreferrer">#41511</a></li>
<li>MaxCompute Catalog now supports complex data types. <a href="https://github.com/apache/doris/pull/39259" target="_blank" rel="noopener noreferrer">#39259</a></li>
<li>Optimized the logic for reading and merging data shards of external tables. <a href="https://github.com/apache/doris/pull/38311" target="_blank" rel="noopener noreferrer">#38311</a></li>
<li>Optimized some refresh strategies for metadata caches of external tables. <a href="https://github.com/apache/doris/pull/38506" target="_blank" rel="noopener noreferrer">#38506</a></li>
<li>Paimon tables now support pushing down <code>IN/NOT IN</code> predicates. <a href="https://github.com/apache/doris/pull/38390" target="_blank" rel="noopener noreferrer">#38390</a></li>
<li>Compatible with tables created in Parquet format by Paimon version 0.9. <a href="https://github.com/apache/doris/pull/41020" target="_blank" rel="noopener noreferrer">#41020</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.2#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Building asynchronous materialized views now supports the use of both immediate and starttime. <a href="https://github.com/apache/doris/pull/39573" target="_blank" rel="noopener noreferrer">#39573</a></li>
<li>Asynchronous materialized views based on external tables will refresh the metadata cache of the external tables before refreshing the materialized views, ensuring construction based on the latest external table data. <a href="https://github.com/apache/doris/pull/38212" target="_blank" rel="noopener noreferrer">#38212</a></li>
<li>Partition incremental construction now supports rolling up according to weekly and quarterly granularities. <a href="https://github.com/apache/doris/pull/39286" target="_blank" rel="noopener noreferrer">#39286</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.2#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>The aggregate function <code>GROUP_CONCAT</code> now supports the use of both <code>DISTINCT</code> and <code>ORDER BY</code>. <a href="https://github.com/apache/doris/pull/38080" target="_blank" rel="noopener noreferrer">#38080</a></li>
<li>Optimized the collection and use of statistical information, as well as the logic for estimating row counts and cost calculations, to generate more efficient and stable execution plans.</li>
<li>Window function partition data pre-filtering now supports cases containing multiple window functions. <a href="https://github.com/apache/doris/pull/38393" target="_blank" rel="noopener noreferrer">#38393</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.2#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Reduced query latency by running prepare pipeline tasks in parallel. <a href="https://github.com/apache/doris/pull/40874" target="_blank" rel="noopener noreferrer">#40874</a></li>
<li>Display Catalog information in Profile. <a href="https://github.com/apache/doris/pull/38283" target="_blank" rel="noopener noreferrer">#38283</a></li>
<li>Optimized the computational performance of <code>IN</code> filtering conditions. <a href="https://github.com/apache/doris/pull/40917" target="_blank" rel="noopener noreferrer">#40917</a></li>
<li>Supported cgroupv2 in K8S to limit Doris&apos;s memory usage. <a href="https://github.com/apache/doris/pull/39256" target="_blank" rel="noopener noreferrer">#39256</a></li>
<li>Optimized the performance of converting strings to datetime types. <a href="https://github.com/apache/doris/pull/38385" target="_blank" rel="noopener noreferrer">#38385</a></li>
<li>When a <code>string</code> is a decimal number, support casting it to an <code>int</code>, which will be more compatible with certain behaviors of MySQL. <a href="https://github.com/apache/doris/pull/38847" target="_blank" rel="noopener noreferrer">#38847</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.2#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>Optimized the performance of inverted index matching. <a href="https://github.com/apache/doris/pull/41122" target="_blank" rel="noopener noreferrer">#41122</a></li>
<li>Temporarily prohibited the creation of inverted indexes with tokenization on arrays. <a href="https://github.com/apache/doris/pull/39062" target="_blank" rel="noopener noreferrer">#39062</a></li>
<li><code>explode_json_array</code> now supports binary JSON types. <a href="https://github.com/apache/doris/pull/37278" target="_blank" rel="noopener noreferrer">#37278</a></li>
<li>IP data types now support bloomfilter indexes. <a href="https://github.com/apache/doris/pull/39253" target="_blank" rel="noopener noreferrer">#39253</a></li>
<li>IP data types now support row storage. <a href="https://github.com/apache/doris/pull/39258" target="_blank" rel="noopener noreferrer">#39258</a></li>
<li>Nested data types such as ARRAY, MAP, and STRUCT now support schema changes. <a href="https://github.com/apache/doris/pull/39210" target="_blank" rel="noopener noreferrer">#39210</a></li>
<li>When creating MTMV, automatically truncate KEYs encountered in VARIANT data types. <a href="https://github.com/apache/doris/pull/39988" target="_blank" rel="noopener noreferrer">#39988</a></li>
<li>Lazy loading of inverted indexes during queries to improve performance. <a href="https://github.com/apache/doris/pull/38979" target="_blank" rel="noopener noreferrer">#38979</a></li>
<li><code>add inverted index file size for open file</code>. <a href="https://github.com/apache/doris/pull/37482" target="_blank" rel="noopener noreferrer">#37482</a></li>
<li>Reduced access to object storage interfaces during compaction to improve performance. <a href="https://github.com/apache/doris/pull/41079" target="_blank" rel="noopener noreferrer">#41079</a></li>
<li>Added three new query profile metrics related to inverted indexes. <a href="https://github.com/apache/doris/pull/36696" target="_blank" rel="noopener noreferrer">#36696</a></li>
<li>Reduced cache overhead for non-PreparedStatement SQL to improve performance. <a href="https://github.com/apache/doris/pull/40910" target="_blank" rel="noopener noreferrer">#40910</a></li>
<li>Pre-warming cache now supports inverted indexes. <a href="https://github.com/apache/doris/pull/38986" target="_blank" rel="noopener noreferrer">#38986</a></li>
<li>Inverted indexes are now cached immediately after writing. <a href="https://github.com/apache/doris/pull/39076" target="_blank" rel="noopener noreferrer">#39076</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility">Compatibility<a href="https://doris.apache.org/blog/release-note-3.0.2#compatibility" class="hash-link" aria-label="Direct link to Compatibility" title="Direct link to Compatibility">&#x200B;</a></h3>
<ul>
<li>Fixed the issue of Thrift ID incompatibility on the master with branch-2.1. <a href="https://github.com/apache/doris/pull/41057" target="_blank" rel="noopener noreferrer">#41057</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-2">Other<a href="https://doris.apache.org/blog/release-note-3.0.2#other-2" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>BE HTTP API now supports authentication; set config::enable_all_http_auth to true (default is false) when authentication is required. <a href="https://github.com/apache/doris/pull/39577" target="_blank" rel="noopener noreferrer">#39577</a></li>
<li>Optimized the user permissions required for the REFRESH operation. Permissions have been relaxed from ALTER to SHOW. <a href="https://github.com/apache/doris/pull/39008" target="_blank" rel="noopener noreferrer">#39008</a></li>
<li>Reduced the range of nextId when calling advanceNextId(). <a href="https://github.com/apache/doris/pull/40160" target="_blank" rel="noopener noreferrer">#40160</a></li>
<li>Optimized the caching mechanism for Java UDFs. <a href="https://github.com/apache/doris/pull/40404" target="_blank" rel="noopener noreferrer">#40404</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.2#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-1">Load<a href="https://doris.apache.org/blog/release-note-3.0.2#load-1" class="hash-link" aria-label="Direct link to Load" title="Direct link to Load">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where <code>abortTransaction</code> did not handle return codes. <a href="https://github.com/apache/doris/pull/41275" target="_blank" rel="noopener noreferrer">#41275</a></li>
<li>Fixed the issue where transactions failed to commit or abort in compute-storage decoupled mode without calling <code>afterCommit/afterAbort</code>. <a href="https://github.com/apache/doris/pull/41267" target="_blank" rel="noopener noreferrer">#41267</a></li>
<li>Fixed the issue where Routine Load could not work properly when modifying consumer offsets in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39159" target="_blank" rel="noopener noreferrer">#39159</a></li>
<li>Fixed the issue of repeatedly closing file handles when obtaining error log file paths. <a href="https://github.com/apache/doris/pull/41320" target="_blank" rel="noopener noreferrer">#41320</a></li>
<li>Fixed the issue of incorrect job progress caching for Routine Load in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39313" target="_blank" rel="noopener noreferrer">#39313</a></li>
<li>Fixed the issue where Routine Load could get stuck when failing to commit transactions in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/40539" target="_blank" rel="noopener noreferrer">#40539</a></li>
<li>Fixed the issue where Routine Load kept reporting data quality check errors in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39790" target="_blank" rel="noopener noreferrer">#39790</a></li>
<li>Fixed the issue where Routine Load did not check transactions before committing in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39775" target="_blank" rel="noopener noreferrer">#39775</a></li>
<li>Fixed the issue where Routine Load did not check transactions before aborting in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/40463" target="_blank" rel="noopener noreferrer">#40463</a></li>
<li>Fixed the issue where cluster keys did not support certain data types. <a href="https://github.com/apache/doris/pull/38966" target="_blank" rel="noopener noreferrer">#38966</a></li>
<li>Fixed the issue of transactions being repeatedly committed. <a href="https://github.com/apache/doris/pull/39786" target="_blank" rel="noopener noreferrer">#39786</a></li>
<li>Fixed the issue of use after free with WAL when BE exits. <a href="https://github.com/apache/doris/pull/33131" target="_blank" rel="noopener noreferrer">#33131</a></li>
<li>Fixed the issue where WAL playback did not skip completed import transactions in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/41262" target="_blank" rel="noopener noreferrer">#41262</a></li>
<li>Fixed the logic for selecting BE in group commit in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39986" target="_blank" rel="noopener noreferrer">#39986</a>  <a href="https://github.com/apache/doris/pull/38644" target="_blank" rel="noopener noreferrer">#38644</a></li>
<li>Fixed the issue where BE might crash when group commit was enabled for insert into. <a href="https://github.com/apache/doris/pull/39339" target="_blank" rel="noopener noreferrer">#39339</a></li>
<li>Fixed the issue where insert into with group commit enabled might get stuck. <a href="https://github.com/apache/doris/pull/39391" target="_blank" rel="noopener noreferrer">#39391</a></li>
<li>Fixed the issue where not enabling the group commit option during import might result in a table not found error. <a href="https://github.com/apache/doris/pull/39731" target="_blank" rel="noopener noreferrer">#39731</a></li>
<li>Fixed the issue of transaction submission timeouts due to too many tablets. <a href="https://github.com/apache/doris/pull/40031" target="_blank" rel="noopener noreferrer">#40031</a></li>
<li>Fixed the issue of concurrent opens with Auto Partition. <a href="https://github.com/apache/doris/pull/38605" target="_blank" rel="noopener noreferrer">#38605</a></li>
<li>Fixed the issue of import lock granularity being too large. <a href="https://github.com/apache/doris/pull/40134" target="_blank" rel="noopener noreferrer">#40134</a></li>
<li>Fixed the issue of coredumps caused by zero-length varchars. <a href="https://github.com/apache/doris/pull/40940" target="_blank" rel="noopener noreferrer">#40940</a></li>
<li>Fixed the issue of incorrect index Id values in log prints. <a href="https://github.com/apache/doris/pull/38790" target="_blank" rel="noopener noreferrer">#38790</a></li>
<li>Fixed the issue of memtable shifting not closing BRPC streaming. <a href="https://github.com/apache/doris/pull/40105" target="_blank" rel="noopener noreferrer">#40105</a></li>
<li>Fixed the issue of inaccurate bvar statistics during memtable shifting. <a href="https://github.com/apache/doris/pull/39075" target="_blank" rel="noopener noreferrer">#39075</a></li>
<li>Fixed the issue of multi-replication fault tolerance during memtable shifting. <a href="https://github.com/apache/doris/pull/38003" target="_blank" rel="noopener noreferrer">#38003</a></li>
<li>Fixed the issue of incorrect message length calculations for Routine Load with multiple tables in one stream. <a href="https://github.com/apache/doris/pull/40367" target="_blank" rel="noopener noreferrer">#40367</a></li>
<li>Fixed the issue of inaccurate progress reporting for Broker Load. <a href="https://github.com/apache/doris/pull/40325" target="_blank" rel="noopener noreferrer">#40325</a></li>
<li>Fixed the issue of inaccurate data scan volume reporting for Broker Load. <a href="https://github.com/apache/doris/pull/40694" target="_blank" rel="noopener noreferrer">#40694</a></li>
<li>Fixed the issue of concurrency with Routine Load in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39242" target="_blank" rel="noopener noreferrer">#39242</a></li>
<li>Fixed the issue of Routine Load jobs being canceled in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39514" target="_blank" rel="noopener noreferrer">#39514</a></li>
<li>Fixed the issue of progress not being reset when deleting Kafka topics. <a href="https://github.com/apache/doris/pull/38474" target="_blank" rel="noopener noreferrer">#38474</a></li>
<li>Fixed the issue of updating progress during transaction state transitions in Routine Load. <a href="https://github.com/apache/doris/pull/39311" target="_blank" rel="noopener noreferrer">#39311</a></li>
<li>Fixed the issue of Routine Load switching from a paused state to a paused state. <a href="https://github.com/apache/doris/pull/40728" target="_blank" rel="noopener noreferrer">#40728</a></li>
<li>Fixed the issue of Stream Load records being missed due to database deletion. <a href="https://github.com/apache/doris/pull/39360" target="_blank" rel="noopener noreferrer">#39360</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-3">Storage<a href="https://doris.apache.org/blog/release-note-3.0.2#storage-3" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>Fixed the issue of missing storage policies. <a href="https://github.com/apache/doris/pull/38700" target="_blank" rel="noopener noreferrer">#38700</a></li>
<li>Fixed the issue of errors during cross-version backup and recovery. <a href="https://github.com/apache/doris/pull/38370" target="_blank" rel="noopener noreferrer">#38370</a></li>
<li>Fixed the NPE issue with ccr binlog. <a href="https://github.com/apache/doris/pull/39909" target="_blank" rel="noopener noreferrer">#39909</a></li>
<li>Fixed potential issues with duplicate keys in mow. <a href="https://github.com/apache/doris/pull/41309" target="_blank" rel="noopener noreferrer">#41309</a>  <a href="https://github.com/apache/doris/pull/39791" target="_blank" rel="noopener noreferrer">#39791</a>  <a href="https://github.com/apache/doris/pull/39958" target="_blank" rel="noopener noreferrer">#39958</a>  <a href="https://github.com/apache/doris/pull/38369" target="_blank" rel="noopener noreferrer">#38369</a>  <a href="https://github.com/apache/doris/pull/38331" target="_blank" rel="noopener noreferrer">#38331</a></li>
<li>Fixed the issue of not being able to write after backup and recovery in high-frequency write scenarios. <a href="https://github.com/apache/doris/pull/40118" target="_blank" rel="noopener noreferrer">#40118</a>  <a href="https://github.com/apache/doris/pull/38321" target="_blank" rel="noopener noreferrer">#38321</a></li>
<li>Fixed the issue of data errors potentially triggered by deleting empty strings and schema changes. <a href="https://github.com/apache/doris/pull/41064" target="_blank" rel="noopener noreferrer">#41064</a></li>
<li>Fixed the issue of incorrect statistics due to column updates. <a href="https://github.com/apache/doris/pull/40880" target="_blank" rel="noopener noreferrer">#40880</a></li>
<li>Limited the size of tablet meta pb to prevent BE crashes due to oversized meta. <a href="https://github.com/apache/doris/pull/39455" target="_blank" rel="noopener noreferrer">#39455</a></li>
<li>Fixed the potential column misalignment issue with the new optimizer in <code>begin; insert into values; commit</code>. <a href="https://github.com/apache/doris/pull/39295" target="_blank" rel="noopener noreferrer">#39295</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-2">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.2#compute-storage-decoupled-2" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where the tablet distribution might be inconsistent across multiple FEs in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/41458" target="_blank" rel="noopener noreferrer">#41458</a></li>
<li>Fixed the issue where TVF might not work in multi-computing group environments. <a href="https://github.com/apache/doris/pull/39249" target="_blank" rel="noopener noreferrer">#39249</a></li>
<li>Fixed the issue where compaction used resources that had already been released when BE exited in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/39302" target="_blank" rel="noopener noreferrer">#39302</a></li>
<li>Fixed the issue where automatic start-stop might cause FE replay to get stuck. <a href="https://github.com/apache/doris/pull/40027" target="_blank" rel="noopener noreferrer">#40027</a></li>
<li>Fixed the issue where the BE status and the stored status in meta-service were inconsistent. <a href="https://github.com/apache/doris/pull/40799" target="_blank" rel="noopener noreferrer">#40799</a></li>
<li>Fixed the issue where the FE-&gt;meta-service connection pool could not automatically expire and reconnect. <a href="https://github.com/apache/doris/pull/41202" target="_blank" rel="noopener noreferrer">#41202</a>  <a href="https://github.com/apache/doris/pull/40661" target="_blank" rel="noopener noreferrer">#40661</a></li>
<li>Fixed the issue where some tablets might repeatedly undergo unexpected balance processes during rebalance. <a href="https://github.com/apache/doris/pull/39792" target="_blank" rel="noopener noreferrer">#39792</a></li>
<li>Fixed the issue where storage vault permissions were lost after FE restarted. <a href="https://github.com/apache/doris/pull/40260" target="_blank" rel="noopener noreferrer">#40260</a></li>
<li>Fixed the issue where tablet row counts and other statistical information might be incomplete due to FDB scan range pagination. <a href="https://github.com/apache/doris/pull/40494" target="_blank" rel="noopener noreferrer">#40494</a></li>
<li>Fixed the performance issue caused by a large number of aborted transactions associated with the same label. <a href="https://github.com/apache/doris/pull/40606" target="_blank" rel="noopener noreferrer">#40606</a></li>
<li>Fixed the issue where <code>commit_txn</code> did not automatically re-enter, maintaining consistent behavior between compute-storage decoupled and integrated modes. <a href="https://github.com/apache/doris/pull/39615" target="_blank" rel="noopener noreferrer">#39615</a></li>
<li>Fixed the issue where the number of projected columns increased when dropping columns. <a href="https://github.com/apache/doris/pull/40187" target="_blank" rel="noopener noreferrer">#40187</a></li>
<li>Fixed the issue where delete statements did not correctly handle return values, causing data to still be visible after deletion. <a href="https://github.com/apache/doris/pull/39428" target="_blank" rel="noopener noreferrer">#39428</a></li>
<li>Fixed the coredump issue caused by rowset metadata competition during file cache preheating. <a href="https://github.com/apache/doris/pull/39361" target="_blank" rel="noopener noreferrer">#39361</a></li>
<li>Fixed the issue where the entire cache space would be used up when TTL cache enabled LRU eviction. <a href="https://github.com/apache/doris/pull/39814" target="_blank" rel="noopener noreferrer">#39814</a></li>
<li>Fixed the issue where temporary files could not be recycled when importing commit rowset failed with HDFS storage backend. <a href="https://github.com/apache/doris/pull/40215" target="_blank" rel="noopener noreferrer">#40215</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.2#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>Fixed some issues with predicate pushdown in JDBC Catalog. <a href="https://github.com/apache/doris/pull/39064" target="_blank" rel="noopener noreferrer">#39064</a></li>
<li>Fixed the issue of not being able to read when <code>S``TRUCT</code> type columns are missing in Parquet format. <a href="https://github.com/apache/doris/pull/38718" target="_blank" rel="noopener noreferrer">#38718</a></li>
<li>Fixed the issue of FileSystem leaks on the FE side in some cases. <a href="https://github.com/apache/doris/pull/38610" target="_blank" rel="noopener noreferrer">#38610</a></li>
<li>Fixed the issue of metadata cache information being inconsistent when Hive/Iceberg tables write back in some cases. <a href="https://github.com/apache/doris/pull/40729" target="_blank" rel="noopener noreferrer">#40729</a></li>
<li>Fixed the issue of unstable partition ID generation for external tables in some cases. <a href="https://github.com/apache/doris/pull/39325" target="_blank" rel="noopener noreferrer">#39325</a></li>
<li>Fixed the issue of external table queries selecting BE nodes in the blacklist in some cases. <a href="https://github.com/apache/doris/pull/39451" target="_blank" rel="noopener noreferrer">#39451</a></li>
<li>Optimized the timeout time for batch retrieval of external table partition information to avoid long-term thread occupation. <a href="https://github.com/apache/doris/pull/39346" target="_blank" rel="noopener noreferrer">#39346</a></li>
<li>Fixed the issue of memory leaks when querying Hudi tables in some cases. <a href="https://github.com/apache/doris/pull/41256" target="_blank" rel="noopener noreferrer">#41256</a></li>
<li>Fixed the issue of connection pool connection leaks in JDBC Catalog in some cases. <a href="https://github.com/apache/doris/pull/39582" target="_blank" rel="noopener noreferrer">#39582</a></li>
<li>Fixed the issue of BE memory leaks in JDBC Catalog in some cases. <a href="https://github.com/apache/doris/pull/41041" target="_blank" rel="noopener noreferrer">#41041</a></li>
<li>Fixed the issue of not being able to query Hudi data on Alibaba Cloud OSS. <a href="https://github.com/apache/doris/pull/41316" target="_blank" rel="noopener noreferrer">#41316</a></li>
<li>Fixed the issue of not being able to read empty partitions in MaxCompute. <a href="https://github.com/apache/doris/pull/40046" target="_blank" rel="noopener noreferrer">#40046</a></li>
<li>Fixed the issue of poor performance when querying Oracle through JDBC Catalog. <a href="https://github.com/apache/doris/pull/41513" target="_blank" rel="noopener noreferrer">#41513</a></li>
<li>Fixed the issue of BE crashes when querying deletion vector of Paimon tables after enabling file cache features. <a href="https://github.com/apache/doris/pull/39877" target="_blank" rel="noopener noreferrer">#39877</a></li>
<li>Fixed the issue of not being able to access Paimon tables on HDFS clusters with HA enabled. <a href="https://github.com/apache/doris/pull/39806" target="_blank" rel="noopener noreferrer">#39806</a></li>
<li>Temporarily disabled the page index filtering feature of Parquet to avoid potential issues. <a href="https://github.com/apache/doris/pull/38691" target="_blank" rel="noopener noreferrer">#38691</a></li>
<li>Fixed the issue of not being able to read unsigned types in Parquet files. <a href="https://github.com/apache/doris/pull/39926" target="_blank" rel="noopener noreferrer">#39926</a></li>
<li>Fixed the issue of potential infinite loops when reading Parquet files in some cases. <a href="https://github.com/apache/doris/pull/39523" target="_blank" rel="noopener noreferrer">#39523</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.2#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where partition construction might select the wrong table to track partitions if both sides have the same column names. <a href="https://github.com/apache/doris/pull/40810" target="_blank" rel="noopener noreferrer">#40810</a></li>
<li>Fixed the issue where transparent rewrite partition compensation might result in incorrect results. <a href="https://github.com/apache/doris/pull/40803" target="_blank" rel="noopener noreferrer">#40803</a></li>
<li>Fixed the issue where transparent rewrite did not take effect on external tables. <a href="https://github.com/apache/doris/pull/38909" target="_blank" rel="noopener noreferrer">#38909</a></li>
<li>Fixed the issue where nested materialized views might not refresh properly. <a href="https://github.com/apache/doris/pull/40433" target="_blank" rel="noopener noreferrer">#40433</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-materialized-views">Synchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.2#synchronous-materialized-views" class="hash-link" aria-label="Direct link to Synchronous Materialized Views" title="Direct link to Synchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where creating synchronous materialized views on MOW tables might result in incorrect query results. <a href="https://github.com/apache/doris/pull/39171" target="_blank" rel="noopener noreferrer">#39171</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-2">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.2#query-optimizer-2" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where existing synchronous materialized views might not be usable after upgrading. <a href="https://github.com/apache/doris/pull/41283" target="_blank" rel="noopener noreferrer">#41283</a></li>
<li>Fixed the issue of not correctly handling milliseconds when comparing datetime literals. <a href="https://github.com/apache/doris/pull/40121" target="_blank" rel="noopener noreferrer">#40121</a></li>
<li>Fixed the issue of potential errors in conditional function partition pruning. <a href="https://github.com/apache/doris/pull/39298" target="_blank" rel="noopener noreferrer">#39298</a></li>
<li>Fixed the issue where MOW tables with synchronous materialized views could not perform delete operations. <a href="https://github.com/apache/doris/pull/39578" target="_blank" rel="noopener noreferrer">#39578</a></li>
<li>Fixed the issue where the nullable of slots in JDBC external table query predicates might be incorrectly planned, causing query errors. <a href="https://github.com/apache/doris/pull/41014" target="_blank" rel="noopener noreferrer">#41014</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-2">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.2#query-execution-2" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>Fixed the memory leak issue caused by the use of runtime filters. <a href="https://github.com/apache/doris/pull/39155" target="_blank" rel="noopener noreferrer">#39155</a></li>
<li>Fixed the issue of excessive memory usage by window functions. <a href="https://github.com/apache/doris/pull/39581" target="_blank" rel="noopener noreferrer">#39581</a></li>
<li>Fixed a series of function compatibility issues during rolling upgrades. <a href="https://github.com/apache/doris/pull/41023" target="_blank" rel="noopener noreferrer">#41023</a>  <a href="https://github.com/apache/doris/pull/40438" target="_blank" rel="noopener noreferrer">#40438</a>  <a href="https://github.com/apache/doris/pull/39648" target="_blank" rel="noopener noreferrer">#39648</a></li>
<li>Fixed the issue of incorrect results with <code>encryption_function</code> when used with constants. <a href="https://github.com/apache/doris/pull/40201" target="_blank" rel="noopener noreferrer">#40201</a></li>
<li>Fixed the issue of errors when importing single-table materialized views. <a href="https://github.com/apache/doris/pull/39061" target="_blank" rel="noopener noreferrer">#39061</a></li>
<li>Fixed the issue of incorrect partition result calculations for window functions. <a href="https://github.com/apache/doris/pull/39100" target="_blank" rel="noopener noreferrer">#39100</a>  <a href="https://github.com/apache/doris/pull/40761" target="_blank" rel="noopener noreferrer">#40761</a></li>
<li>Fixed the issue of incorrect calculations for topn when null values are present. <a href="https://github.com/apache/doris/pull/39497" target="_blank" rel="noopener noreferrer">#39497</a></li>
<li>Fixed the issue of incorrect results with the <code>map_agg</code> function. <a href="https://github.com/apache/doris/pull/39743" target="_blank" rel="noopener noreferrer">#39743</a></li>
<li>Fixed the issue of incorrect messages returned by cancel. <a href="https://github.com/apache/doris/pull/38982" target="_blank" rel="noopener noreferrer">#38982</a></li>
<li>Fixed the issue of BE core dumps caused by encrypt and decrypt functions. <a href="https://github.com/apache/doris/pull/40726" target="_blank" rel="noopener noreferrer">#40726</a></li>
<li>Fixed the issue of queries getting stuck due to too many scanners in high-concurrency scenarios. <a href="https://github.com/apache/doris/pull/40495" target="_blank" rel="noopener noreferrer">#40495</a></li>
<li>Supported time types in runtime filters. <a href="https://github.com/apache/doris/pull/38258" target="_blank" rel="noopener noreferrer">#38258</a></li>
<li>Fixed the issue of incorrect results with window funnel functions. <a href="https://github.com/apache/doris/pull/40960" target="_blank" rel="noopener noreferrer">#40960</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.2#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>Fixed the issue of match function errors when no indexes were present. <a href="https://github.com/apache/doris/pull/38989" target="_blank" rel="noopener noreferrer">#38989</a></li>
<li>Fixed the issue of crashes when ARRAY data types were used as parameters for array_min/array_max functions. <a href="https://github.com/apache/doris/pull/39492" target="_blank" rel="noopener noreferrer">#39492</a></li>
<li>Fixed the issue of nullable with the <code>array_enumerate_uniq</code> function. <a href="https://github.com/apache/doris/pull/38384" target="_blank" rel="noopener noreferrer">#38384</a></li>
<li>Fixed the issue of bloomfilter indexes not being updated when adding or deleting columns. <a href="https://github.com/apache/doris/pull/38431" target="_blank" rel="noopener noreferrer">#38431</a></li>
<li>Fixed the issue of es-catalog parsing exceptions with array data. <a href="https://github.com/apache/doris/pull/39104" target="_blank" rel="noopener noreferrer">#39104</a></li>
<li>Fixed the issue of improper predicate push-down in es-catalog. <a href="https://github.com/apache/doris/pull/40111" target="_blank" rel="noopener noreferrer">#40111</a></li>
<li>Fixed the issue of exceptions caused by modifying input data with<code>map()</code> and <code>struct()</code> functions. <a href="https://github.com/apache/doris/pull/39699" target="_blank" rel="noopener noreferrer">#39699</a></li>
<li>Fixed the issue of index compaction crashes in special cases. <a href="https://github.com/apache/doris/pull/40294" target="_blank" rel="noopener noreferrer">#40294</a></li>
<li>Fixed the issue of ARRAY type inverted indexes missing nullbitmaps. <a href="https://github.com/apache/doris/pull/38907" target="_blank" rel="noopener noreferrer">#38907</a></li>
<li>Fixed the issue of incorrect results with the <code>count()</code> function on inverted indexes. <a href="https://github.com/apache/doris/pull/41152" target="_blank" rel="noopener noreferrer">#41152</a></li>
<li>Fixed the issue of correct results with the <code>explode_map</code> function when using aliases. <a href="https://github.com/apache/doris/pull/39757" target="_blank" rel="noopener noreferrer">#39757</a></li>
<li>Fixed the issue of VARIANT type not being able to use row storage for exceptional JSON data. <a href="https://github.com/apache/doris/pull/39394" target="_blank" rel="noopener noreferrer">#39394</a></li>
<li>Fixed the issue of memory leaks when returning ARRAY results with VARIANT type. <a href="https://github.com/apache/doris/pull/41358" target="_blank" rel="noopener noreferrer">#41358</a></li>
<li>Fixed the issue of changing column names with VARIANT type. <a href="https://github.com/apache/doris/pull/40320" target="_blank" rel="noopener noreferrer">#40320</a></li>
<li>Fixed the issue of potential precision loss when converting VARIANT type to DECIMAL type. <a href="https://github.com/apache/doris/pull/39650" target="_blank" rel="noopener noreferrer">#39650</a></li>
<li>Fixed the issue of nullable handling with VARIANT type. <a href="https://github.com/apache/doris/pull/39732" target="_blank" rel="noopener noreferrer">#39732</a></li>
<li>Fixed the issue of sparse column reading with VARIANT type. <a href="https://github.com/apache/doris/pull/40295" target="_blank" rel="noopener noreferrer">#40295</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-3">Other<a href="https://doris.apache.org/blog/release-note-3.0.2#other-3" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>Fixed the compatibility issue between new and old audit log plugins. <a href="https://github.com/apache/doris/pull/41401" target="_blank" rel="noopener noreferrer">#41401</a></li>
<li>Fixed the issue where users could see processes of others in certain cases. <a href="https://github.com/apache/doris/pull/39747" target="_blank" rel="noopener noreferrer">#39747</a></li>
<li>Fixed the issue where users with permissions could not export. <a href="https://github.com/apache/doris/pull/38365" target="_blank" rel="noopener noreferrer">#38365</a></li>
<li>Fixed the issue where create table like required create permissions for the existing table. <a href="https://github.com/apache/doris/pull/37879" target="_blank" rel="noopener noreferrer">#37879</a></li>
<li>Fixed the issue where some features did not verify permissions. <a href="https://github.com/apache/doris/pull/39726" target="_blank" rel="noopener noreferrer">#39726</a></li>
<li>Fixed the issue of not correctly closing connections when using SSL. <a href="https://github.com/apache/doris/pull/38587" target="_blank" rel="noopener noreferrer">#38587</a></li>
<li>Fixed the issue where executing ALTER VIEW operations in some cases caused FE to fail to start. <a href="https://github.com/apache/doris/pull/40872" target="_blank" rel="noopener noreferrer">#40872</a></li>
</ul></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris version 2.0.15 has been released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.0.15</link>
            <guid>https://doris.apache.org/blog/release-note-2.0.15</guid>
            <pubDate>Mon, 30 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Thanks to our community users and developers, about 157 improvements and bug fixes have been made in Doris 2.0.15 version]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris version 2.0.15 has been released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-09-30T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">September 30, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Thanks to our community users and developers, about 157 improvements and bug fixes have been made in Doris 2.0.15 version</p>
<ul>
<li>
<p>Quick Download: <a href="https://doris.apache.org/download" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download</a></p>
</li>
<li>
<p>GitHub: <a href="https://github.com/apache/doris/releases/tag/2.0.15" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases/tag/2.0.15</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-behavior-change">1 Behavior Change<a href="https://doris.apache.org/blog/release-note-2.0.15#1-behavior-change" class="hash-link" aria-label="Direct link to 1 Behavior Change" title="Direct link to 1 Behavior Change">&#x200B;</a></h2>
<p>NA</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-new-features">2 New Features<a href="https://doris.apache.org/blog/release-note-2.0.15#2-new-features" class="hash-link" aria-label="Direct link to 2 New Features" title="Direct link to 2 New Features">&#x200B;</a></h2>
<ul>
<li>
<p>Restore now supports deleting redundant tablets and partition options. <a href="https://github.com/apache/doris/pull/39028" target="_blank" rel="noopener noreferrer">#39028</a></p>
</li>
<li>
<p>Support JSON function <code>json_search</code>.<a href="https://github.com/apache/doris/pull/40948" target="_blank" rel="noopener noreferrer">#40948</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-improvement-and-optimizations">3 Improvement and Optimizations<a href="https://doris.apache.org/blog/release-note-2.0.15#3-improvement-and-optimizations" class="hash-link" aria-label="Direct link to 3 Improvement and Optimizations" title="Direct link to 3 Improvement and Optimizations">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stability">Stability<a href="https://doris.apache.org/blog/release-note-2.0.15#stability" class="hash-link" aria-label="Direct link to Stability" title="Direct link to Stability">&#x200B;</a></h3>
<ul>
<li>
<p>Add a FE configuration <code>abort_txn_after_lost_heartbeat_time_second</code> for transaction abort time. <a href="https://github.com/apache/doris/pull/28662" target="_blank" rel="noopener noreferrer">#28662</a></p>
</li>
<li>
<p>Abort transactions after a BE loses heartbeat for over 1 minute instead of 5 seconds, to avoid overly sensitive transaction aborts. <a href="https://github.com/apache/doris/pull/22781" target="_blank" rel="noopener noreferrer">#22781</a></p>
</li>
<li>
<p>Delay scheduling EOF tasks of routine load to avoid an excessive number of small transactions. <a href="https://github.com/apache/doris/pull/39975" target="_blank" rel="noopener noreferrer">#39975</a></p>
</li>
<li>
<p>Prefer querying from online disk services to be more robust. <a href="https://github.com/apache/doris/pull/39467" target="_blank" rel="noopener noreferrer">#39467</a></p>
</li>
<li>
<p>Skip checking newly inserted rows in non-strict mode partial updates if the row&apos;s delete sign is marked. <a href="https://github.com/apache/doris/pull/40322" target="_blank" rel="noopener noreferrer">#40322</a></p>
</li>
<li>
<p>To prevent FE OOM, limit the number of tablets in backup tasks, with a default value of 300,000. <a href="https://github.com/apache/doris/pull/39987" target="_blank" rel="noopener noreferrer">#39987</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="https://doris.apache.org/blog/release-note-2.0.15#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance">&#x200B;</a></h3>
<ul>
<li>
<p>Optimize slow column updates caused by concurrent column updates and compactions. <a href="https://github.com/apache/doris/pull/38487" target="_blank" rel="noopener noreferrer">#38487</a></p>
</li>
<li>
<p>When a NullLiteral exists in a filter condition, it can now be folded into False and further converted to an EmptySet to reduce unnecessary data scanning and computation. <a href="https://github.com/apache/doris/pull/38135" target="_blank" rel="noopener noreferrer">#38135</a></p>
</li>
<li>
<p>Improve performance of <code>ORDER BY</code> permutation. <a href="https://github.com/apache/doris/pull/38985" target="_blank" rel="noopener noreferrer">#38985</a></p>
</li>
<li>
<p>Improve the performance of string processing in inverted indexes. <a href="https://github.com/apache/doris/pull/37395" target="_blank" rel="noopener noreferrer">#37395</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimizer-and-statistics">Optimizer and Statistics<a href="https://doris.apache.org/blog/release-note-2.0.15#optimizer-and-statistics" class="hash-link" aria-label="Direct link to Optimizer and Statistics" title="Direct link to Optimizer and Statistics">&#x200B;</a></h3>
<ul>
<li>
<p>Added support for statements beginning with a semicolon. <a href="https://github.com/apache/doris/pull/39399" target="_blank" rel="noopener noreferrer">#39399</a></p>
</li>
<li>
<p>Polish aggregate function signature matching. <a href="https://github.com/apache/doris/pull/39352" target="_blank" rel="noopener noreferrer">#39352</a></p>
</li>
<li>
<p>Drop column statistics and trigger auto analysis after schema change. <a href="https://github.com/apache/doris/pull/39101" target="_blank" rel="noopener noreferrer">#39101</a></p>
</li>
<li>
<p>Support dropping cached stats using <code>DROP CACHED STATS table_name</code>. <a href="https://github.com/apache/doris/pull/39367" target="_blank" rel="noopener noreferrer">#39367</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-catalog-and-others">Multi Catalog and Others<a href="https://doris.apache.org/blog/release-note-2.0.15#multi-catalog-and-others" class="hash-link" aria-label="Direct link to Multi Catalog and Others" title="Direct link to Multi Catalog and Others">&#x200B;</a></h3>
<ul>
<li>
<p>Optimize JDBC Catalog refresh to reduce the frequency of client creation. <a href="https://github.com/apache/doris/pull/40261" target="_blank" rel="noopener noreferrer">#40261</a></p>
</li>
<li>
<p>Fix thread leaks in JDBC Catalog under certain conditions. <a href="https://github.com/apache/doris/pull/39423" target="_blank" rel="noopener noreferrer">#39423</a></p>
</li>
<li>
<p>ARRAY MAP STRUCT types now support <code>REPLACE_IF_NOT_NULL</code>. <a href="https://github.com/apache/doris/pull/38304" target="_blank" rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>Retry delete jobs for failures that are not <code>DELETE_INVALID_XXX</code>. <a href="https://github.com/apache/doris/pull/37834" target="_blank" rel="noopener noreferrer">#37834</a></p>
</li>
</ul>
<p><strong>Credits</strong></p>
<p>@924060929, @BePPPower, @BiteTheDDDDt, @CalvinKirs, @GoGoWen, @HappenLee, @Jibing-Li, @Johnnyssc, @LiBinfeng-01, @Mryange, @SWJTU-ZhangLei, @TangSiyang2001, @Toms1999, @Vallishp, @Yukang-Lian, @airborne12, @amorynan, @bobhan1, @cambyzju, @csun5285, @dataroaring, @eldenmoon, @englefly, @feiniaofeiafei, @hello-stephen, @htyoung, @hubgeter, @justfortaste, @liaoxin01, @liugddx, @liutang123, @luwei16, @mongo360, @morrySnow, @qidaye, @smallx, @sollhui, @starocean999, @w41ter, @xiaokang, @xzj7019, @yujun777, @zclllyybb, @zddr, @zhangstar333, @zhannngchen, @zy-kkk, @zzzxl1993</p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris Flink Connector 24.0.0  just released!]]></title>
            <link>https://doris.apache.org/blog/release-flink-doris-connector-24.0.0</link>
            <guid>https://doris.apache.org/blog/release-flink-doris-connector-24.0.0</guid>
            <pubDate>Wed, 25 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Dear community, We are excited to announce the official release of Apache Doris Flink Connector version 24.0.0 on September 5th, 2024.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris Flink Connector 24.0.0  just released!</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-09-25T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">September 25, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community, We are excited to announce the official release of Apache Doris Flink Connector version 24.0.0 on September 5th, 2024. This release brings several enhancements and new capabilities, including support for Flink 1.20 and high-speed data retrieval from Doris via Arrow Flight SQL. Additionally, the FlinkCDC version required for full database synchronization has been upgraded to 3.1.x for optimal performance.</p>
<ul>
<li>Download Link: <a href="https://github.com/apache/doris-flink-connector/releases/tag/24.0.0" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris-flink-connector/releases/tag/24.0.0</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavioral-changes">Behavioral Changes<a href="https://doris.apache.org/blog/release-flink-doris-connector-24.0.0#behavioral-changes" class="hash-link" aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">&#x200B;</a></h2>
<ul>
<li>
<p>FlinkCDC Upgrade: To leverage the full potential of this release, the FlinkCDC version used for full database synchronization must be upgraded to 3.1.x. Due to the incompatibility between FlinkCDC 3.1.x and earlier versions (e.g., 2.4), running full database synchronization jobs will require a stateless restart after upgrading FlinkCDC. Please refer to the <a href="https://mp.weixin.qq.com/s/qYW5Bw0IqUHUc8bnfWOIog" target="_blank" rel="noopener noreferrer">Apache Flink CDC 3.1.0 Release Announcement</a> for details on compatibility.</p>
</li>
<li>
<p>Version Renaming: To maintain consistency with other Connectors (e.g., Spark and Kafka) and account for the aforementioned incompatibilities, the Connector version has been renamed to the 24.x series. See the discussion thread <a href="https://lists.apache.org/thread/8tp215yk0tkgtdfkjdl4svvbljnmxzst" target="_blank" rel="noopener noreferrer">DISCUSS] About the next version change of Connector</a> for more information.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-flink-doris-connector-24.0.0#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<ul>
<li>
<p>Supported Flink v1.20.</p>
</li>
<li>
<p>DB2 Database synchronization is supported.</p>
</li>
<li>
<p>CDC Schema Change enhancement supported the use of the JSQLParser framework for DDL.</p>
</li>
<li>
<p>Supported Stream Load with GZ compression.</p>
</li>
<li>
<p>Enabled Arrow Flight SQL integration for high-speed data retrieval from Doris.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-flink-doris-connector-24.0.0#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<ul>
<li>
<p>Upgraded FlinkCDC  to 3.1.1.</p>
</li>
<li>
<p>JDBC parameter configuration for DB2/Postgres/SQLServer synchronization.</p>
</li>
<li>
<p>Optimized batch writing mode.</p>
</li>
<li>
<p>Refined CDC synchronization logic.</p>
</li>
<li>
<p>Supported MySQL full database synchronization with <code>INTEGER</code> type.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-flink-doris-connector-24.0.0#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<ul>
<li>
<p>Resolved serialization issues with <code>MAP</code> subtypes of <code>DATE</code>/ <code>DATETIME</code></p>
</li>
<li>
<p>Fixed FlinkSQL projection pushdown bugs</p>
</li>
<li>
<p>Resolved <code>DECIMAL</code> type sync issues with MongoDB</p>
</li>
<li>
<p>Compatibility update for Doris arrow-based timestamp reading</p>
</li>
<li>
<p>Fixed non-effective delete events in CDC full database synchronization</p>
</li>
<li>
<p>Corrected schema change logic when default values are null</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="https://doris.apache.org/blog/release-flink-doris-connector-24.0.0#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">&#x200B;</a></h2>
<p>@bingquanzhao&#x3001;@DongLiang-0&#x3001;@JasonLeeCoding&#x3001;@JNSimba@MaoMiMao&#x3001;@qg-lin@tmc9031&#x3001;@vinlee19</p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 2.1.6 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.1.6</link>
            <guid>https://doris.apache.org/blog/release-note-2.1.6</guid>
            <pubDate>Tue, 10 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This version brings continuous upgrades and improvements to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 2.1.6 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-09-10T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">September 10, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community, <strong>Apache Doris version 2.1.6 was officially released on September 10, 2024.</strong> This version brings continuous upgrades and improvements to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management. Additionally, several fixes have been implemented in areas such as the query optimizer, execution engine, storage management, permission management.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior changes<a href="https://doris.apache.org/blog/release-note-2.1.6#behavior-changes" class="hash-link" aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">&#x200B;</a></h2>
<ul>
<li>
<p>Removed the <code>delete_if_exists</code> option from create repository. <a href="https://github.com/apache/doris/pull/38192" target="_blank" rel="noopener noreferrer">#38192</a></p>
</li>
<li>
<p>Added the <code>enable_prepared_stmt_audit_log</code> session variable to control whether JDBC prepared statements record audit logs, with the default being no recording. <a href="https://github.com/apache/doris/pull/38624" target="_blank" rel="noopener noreferrer">#38624</a> <a href="https://github.com/apache/doris/pull/39009" target="_blank" rel="noopener noreferrer">#39009</a></p>
</li>
<li>
<p>Implemented fd limit and memory constraints for segment cache. <a href="https://github.com/apache/doris/pull/39689" target="_blank" rel="noopener noreferrer">#39689</a></p>
</li>
<li>
<p>When the FE configuration item <code>sys_log_mode</code> is set to BRIEF, file location information is added to the logs. <a href="https://github.com/apache/doris/pull/39571" target="_blank" rel="noopener noreferrer">#39571</a></p>
</li>
<li>
<p>Changed the default value of the session variable <code>max_allowed_packet</code> to 16MB. <a href="https://github.com/apache/doris/pull/38697" target="_blank" rel="noopener noreferrer">#38697</a></p>
</li>
<li>
<p>When a single request contains multiple statements, semicolons must be used to separate them. <a href="https://github.com/apache/doris/pull/38670" target="_blank" rel="noopener noreferrer">#38670</a></p>
</li>
<li>
<p>Added support for statements to begin with a semicolon. <a href="https://github.com/apache/doris/pull/39399" target="_blank" rel="noopener noreferrer">#39399</a></p>
</li>
<li>
<p>Aligned type formatting with MySQL in statements such as <code>show create table</code>. <a href="https://github.com/apache/doris/pull/38012" target="_blank" rel="noopener noreferrer">#38012</a></p>
</li>
<li>
<p>When the new optimizer planning times out, it no longer falls back to prevent the old optimizer from using longer planning times. <a href="https://github.com/apache/doris/pull/39499" target="_blank" rel="noopener noreferrer">#39499</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New features<a href="https://doris.apache.org/blog/release-note-2.1.6#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.6#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Supported writeback for Iceberg tables.</p>
<ul>
<li>For more information, please refer to the <a href="https://doris.apache.org/docs/lakehouse/datalake-building/iceberg-build" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>SQL interception rules now support external tables.</p>
<ul>
<li>For more information, please refer to the <a href="https://doris.apache.org/docs/admin-manual/query-admin/sql-interception" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Added the system table <code>file_cache_statistics</code> to view BE data cache metrics.</p>
<ul>
<li>For more information, please refer to the <a href="https://doris.apache.org/docs/admin-manual/system-tables/file_cache_statistics" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.6#async-materialized-view" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>
<p>Supported transparent rewriting during inserts. <a href="https://github.com/apache/doris/pull/38115" target="_blank" rel="noopener noreferrer">#38115</a></p>
</li>
<li>
<p>Supported transparent rewriting when variant types exist in queries.<a href="https://github.com/apache/doris/pull/37929" target="_blank" rel="noopener noreferrer"> #37929</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-2.1.6#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>Supported casting ARRAY MAP to JSON type.<a href="https://github.com/apache/doris/pull/36548" target="_blank" rel="noopener noreferrer"> #36548</a></p>
</li>
<li>
<p>Supported the <code>json_keys</code> function.<a href="https://github.com/apache/doris/pull/36411" target="_blank" rel="noopener noreferrer"> #36411</a></p>
</li>
<li>
<p>Supported specifying the JSON path $. when importing JSON. <a href="https://github.com/apache/doris/pull/38213" target="_blank" rel="noopener noreferrer">#38213</a></p>
</li>
<li>
<p>ARRAY, MAP, STRUCT types now support <code>replace_if_not_null</code><a href="https://github.com/apache/doris/pull/38304" target="_blank" rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>ARRAY, MAP, STRUCT types now support adjusting column order.<a href="https://github.com/apache/doris/pull/39210" target="_blank" rel="noopener noreferrer">#39210</a></p>
</li>
<li>
<p>Added the <code>multi_match</code> function to match keywords across multiple fields, with support for inverted index acceleration. <a href="https://github.com/apache/doris/pull/37722" target="_blank" rel="noopener noreferrer">#37722</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.6#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Filled in the original database name, table name, column name, and alias for returned columns in the MySQL protocol. <a href="https://github.com/apache/doris/pull/38126" target="_blank" rel="noopener noreferrer"> #38126</a></p>
</li>
<li>
<p>Supported the aggregation function <code>group_concat</code> with both order by and distinct simultaneously. <a href="https://github.com/apache/doris/pull/38080" target="_blank" rel="noopener noreferrer">#38080</a></p>
</li>
<li>
<p>SQL cache now supports reusing cached results for queries with different comments. <a href="https://github.com/apache/doris/pull/40049" target="_blank" rel="noopener noreferrer">#40049</a></p>
</li>
<li>
<p>In partition pruning, supported including <code>date_trunc</code> and date functions in filter conditions. <a href="https://github.com/apache/doris/pull/38025" target="_blank" rel="noopener noreferrer">#38025</a> <a href="https://github.com/apache/doris/pull/38743" target="_blank" rel="noopener noreferrer">#38743</a></p>
</li>
<li>
<p>Allowed using the database name where the table resides as a qualifier prefix for table aliases. <a href="https://github.com/apache/doris/pull/38640" target="_blank" rel="noopener noreferrer">#38640</a></p>
</li>
<li>
<p>Supported hint-style comments.<a href="https://github.com/apache/doris/pull/39113" target="_blank" rel="noopener noreferrer">#39113</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="https://doris.apache.org/blog/release-note-2.1.6#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">&#x200B;</a></h3>
<ul>
<li>
<p>Added the system table <code>table_properties</code> for viewing table properties.</p>
<ul>
<li>For more information, please refer to the <a href="https://doris.apache.org/docs/admin-manual/system-tables/information_schema/table_properties" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Introduced deadlock and slow lock detection in FE.</p>
<ul>
<li>For more information, please refer to the <a href="https://doris.apache.org/docs/admin-manual/maint-monitor/frontend-lock-manager" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-2.1.6#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.6#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Reimplemented the external table metadata caching mechanism.</p>
<ul>
<li>For details, refer to the <a href="https://doris.apache.org/docs/lakehouse/metacache" target="_blank" rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Added the session variable <code>keep_carriage_return</code> with a default value of false. By default, reading Hive Text format tables treats both <code>\r\n</code> and <code>\n</code> as newline characters. <a href="https://github.com/apache/doris/pull/38099" target="_blank" rel="noopener noreferrer">#38099</a></p>
</li>
<li>
<p>Optimized memory statistics for Parquet/ORC file read/write operations.<a href="https://github.com/apache/doris/pull/37257" target="_blank" rel="noopener noreferrer">#37257</a></p>
</li>
<li>
<p>Supported pushing down IN/NOT IN predicates for Paimon tables. <a href="https://github.com/apache/doris/pull/38390" target="_blank" rel="noopener noreferrer">#38390</a></p>
</li>
<li>
<p>Enhanced the optimizer to support Time Travel syntax for Hudi tables. <a href="https://github.com/apache/doris/pull/38591" target="_blank" rel="noopener noreferrer">#38591</a></p>
</li>
<li>
<p>Optimized Kerberos authentication-related processes. <a href="https://github.com/apache/doris/pull/37301" target="_blank" rel="noopener noreferrer"> #37301</a></p>
</li>
<li>
<p>Enabled reading Hive tables after renaming column operations. <a href="https://github.com/apache/doris/pull/38809" target="_blank" rel="noopener noreferrer">#38809</a></p>
</li>
<li>
<p>Optimized the reading performance of partition columns for external tables. <a href="https://github.com/apache/doris/pull/38810" target="_blank" rel="noopener noreferrer">#38810</a></p>
</li>
<li>
<p>Improved the data shard merging strategy during external table query planning to avoid performance degradation caused by a large number of small shards.<a href="https://github.com/apache/doris/pull/38964" target="_blank" rel="noopener noreferrer">#38964</a></p>
</li>
<li>
<p>Added attributes such as location to <code>SHOW CREATE DATABASE/TABLE</code>. <a href="https://github.com/apache/doris/pull/39644" target="_blank" rel="noopener noreferrer">#39644</a></p>
</li>
<li>
<p>Supported complex types in MaxCompute Catalog. <a href="https://github.com/apache/doris/pull/39822" target="_blank" rel="noopener noreferrer">#39822</a></p>
</li>
<li>
<p>Optimized the file cache loading strategy by using asynchronous loading to avoid long BE startup times. <a href="https://github.com/apache/doris/pull/39036" target="_blank" rel="noopener noreferrer">#39036</a></p>
</li>
<li>
<p>Improved the file cache eviction strategy, such as evicting locks held for extended periods. <a href="https://github.com/apache/doris/pull/39721" target="_blank" rel="noopener noreferrer">#39721</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view-1">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.6#async-materialized-view-1" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>
<p>Supported hourly, weekly, and quarterly partition roll-up construction. <a href="https://github.com/apache/doris/pull/37678" target="_blank" rel="noopener noreferrer">#37678</a></p>
</li>
<li>
<p>For materialized views based on Hive external tables, the metadata cache is now updated before refresh to ensure the latest data is obtained during each refresh. <a href="https://github.com/apache/doris/pull/38212" target="_blank" rel="noopener noreferrer">#38212</a></p>
</li>
<li>
<p>Improved the performance of transparent rewrite planning in storage-compute decoupled mode by batch fetching metadata. <a href="https://github.com/apache/doris/pull/39301" target="_blank" rel="noopener noreferrer">#39301</a></p>
</li>
<li>
<p>Enhanced the performance of transparent rewrite planning by prohibiting duplicate enumerations. <a href="https://github.com/apache/doris/pull/39541" target="_blank" rel="noopener noreferrer">#39541</a></p>
</li>
<li>
<p>Improved the performance of transparent rewrite for refreshing materialized views based on Hive external table partitions.<a href="https://github.com/apache/doris/pull/38525" target="_blank" rel="noopener noreferrer">#38525</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-2.1.6#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>Optimized memory allocation for TOPN queries to improve performance. <a href="https://github.com/apache/doris/pull/37429" target="_blank" rel="noopener noreferrer">#37429</a></p>
</li>
<li>
<p>Enhanced the performance of string processing in inverted indexes.<a href="https://github.com/apache/doris/pull/37395" target="_blank" rel="noopener noreferrer">#37395</a></p>
</li>
<li>
<p>Optimized the performance of inverted indexes in MOW tables. <a href="https://github.com/apache/doris/pull/37428" target="_blank" rel="noopener noreferrer">#37428</a></p>
</li>
<li>
<p>Supported specifying the row-store <code>page_size</code> during table creation to control compression effectiveness. <a href="https://github.com/apache/doris/pull/37145" target="_blank" rel="noopener noreferrer">#37145</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.6#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Adjusted the row count estimation algorithm for mark joins, resulting in more accurate cardinality estimates for mark joins. <a href="https://github.com/apache/doris/pull/38270" target="_blank" rel="noopener noreferrer">#38270</a></p>
</li>
<li>
<p>Optimized the cost estimation algorithm for semi/anti joins, enabling more accurate selection of semi/anti join orders. <a href="https://github.com/apache/doris/pull/37951" target="_blank" rel="noopener noreferrer">#37951</a></p>
</li>
<li>
<p>Adjusted the filter estimation algorithm for cases where some columns have no statistical information, leading to more accurate cardinality estimates. <a href="https://github.com/apache/doris/pull/39592" target="_blank" rel="noopener noreferrer">#39592</a></p>
</li>
<li>
<p>Modified the instance calculation logic for set operation operators to prevent insufficient parallelism in extreme cases. <a href="https://github.com/apache/doris/pull/39999" target="_blank" rel="noopener noreferrer">#39999</a></p>
</li>
<li>
<p>Adjusted the usage strategy of bucket shuffle, achieving better performance when data is not sufficiently shuffled. <a href="https://github.com/apache/doris/pull/36784" target="_blank" rel="noopener noreferrer">#36784</a></p>
</li>
<li>
<p>Enabled early filtering of window function data, supporting multiple window functions in a single projection. <a href="https://github.com/apache/doris/pull/38393" target="_blank" rel="noopener noreferrer">#38393</a></p>
</li>
<li>
<p>When a <code>NullLiteral</code> exists in a filter condition, it can now be folded into false, further converted to an <code>EmptySet</code> to reduce unnecessary data scanning and computation. <a href="https://github.com/apache/doris/pull/38135" target="_blank" rel="noopener noreferrer">#38135</a></p>
</li>
<li>
<p>Expanded the scope of predicate derivation, reducing data scanning in queries with specific patterns. <a href="https://github.com/apache/doris/pull/37314" target="_blank" rel="noopener noreferrer">#37314</a></p>
</li>
<li>
<p>Supported partial short-circuit evaluation logic in partition pruning to improve partition pruning performance, achieving over 100% improvement in specific scenarios. <a href="https://github.com/apache/doris/pull/38191" target="_blank" rel="noopener noreferrer">#38191</a></p>
</li>
<li>
<p>Enabled the computation of arbitrary scalar functions within user variables. <a href="https://github.com/apache/doris/pull/39144" target="_blank" rel="noopener noreferrer">#39144</a></p>
</li>
<li>
<p>Maintained error messages consistent with MySQL when alias conflicts exist in queries. <a href="https://github.com/apache/doris/pull/38104" target="_blank" rel="noopener noreferrer">#38104</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-2.1.6#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>
<p>Adapted AggState for compatibility from 2.1 to 3.x and fixed coredump issues. <a href="https://github.com/apache/doris/pull/37104" target="_blank" rel="noopener noreferrer">#37104</a></p>
</li>
<li>
<p>Refactored the strategy selection for local shuffle when no joins are involved. <a href="https://github.com/apache/doris/pull/37282" target="_blank" rel="noopener noreferrer">#37282</a></p>
</li>
<li>
<p>Modified the scanner for internal table queries to an asynchronous approach to prevent blocking during internal table queries. <a href="https://github.com/apache/doris/pull/38403" target="_blank" rel="noopener noreferrer">#38403</a></p>
</li>
<li>
<p>Optimized the block merge process when building hash tables in Join operators. <a href="https://github.com/apache/doris/pull/37471" target="_blank" rel="noopener noreferrer">#37471</a></p>
</li>
<li>
<p>Reduced the lock holding time for MultiCast operations. <a href="https://github.com/apache/doris/pull/37462" target="_blank" rel="noopener noreferrer">37462</a></p>
</li>
<li>
<p>Optimized gRPC&apos;s keepAliveTime and added a connection monitoring mechanism, reducing the probability of query failures due to RPC errors during query execution. <a href="https://github.com/apache/doris/pull/37304" target="_blank" rel="noopener noreferrer">#37304</a></p>
</li>
<li>
<p>Cleaned up all dirty pages in jemalloc when memory limits are exceeded. <a href="https://github.com/apache/doris/pull/37164" target="_blank" rel="noopener noreferrer">#37164</a></p>
</li>
<li>
<p>Improved the performance of <code>aes_encrypt</code>/<code>decrypt</code> functions when handling constant types. <a href="https://github.com/apache/doris/pull/37194" target="_blank" rel="noopener noreferrer">#37194</a></p>
</li>
<li>
<p>Optimized the performance of <code>json_extract</code> functions when processing constant data. <a href="https://github.com/apache/doris/pull/36927" target="_blank" rel="noopener noreferrer">#36927</a></p>
</li>
<li>
<p>Optimized the performance of ParseURL functions when processing constant data. <a href="https://github.com/apache/doris/pull/36882" target="_blank" rel="noopener noreferrer">#36882</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup-recovery--ccr">Backup Recovery / CCR<a href="https://doris.apache.org/blog/release-note-2.1.6#backup-recovery--ccr" class="hash-link" aria-label="Direct link to Backup Recovery / CCR" title="Direct link to Backup Recovery / CCR">&#x200B;</a></h3>
<ul>
<li>
<p>Restore now supports deleting redundant tablets and partition options. <a href="https://github.com/apache/doris/pull/39363" target="_blank" rel="noopener noreferrer">#39363</a></p>
</li>
<li>
<p>Check storage connectivity when creating a repository. <a href="https://github.com/apache/doris/pull/39538" target="_blank" rel="noopener noreferrer">#39538</a></p>
</li>
<li>
<p>Enables binlog to support <code>DROP TABLE</code>, allowing CCR to incrementally synchronize <code>DROP TABLE</code> operations. <a href="https://github.com/apache/doris/pull/38541" target="_blank" rel="noopener noreferrer">#38541</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compaction">Compaction<a href="https://doris.apache.org/blog/release-note-2.1.6#compaction" class="hash-link" aria-label="Direct link to Compaction" title="Direct link to Compaction">&#x200B;</a></h3>
<ul>
<li>
<p>Improves the issue where high-priority compaction tasks were not subject to task concurrency control limits. <a href="https://github.com/apache/doris/pull/38189" target="_blank" rel="noopener noreferrer">#38189</a></p>
</li>
<li>
<p>Automatically reduces compaction memory consumption based on data characteristics. <a href="https://github.com/apache/doris/pull/37486" target="_blank" rel="noopener noreferrer">#37486</a></p>
</li>
<li>
<p>Fixes an issue where the sequential data optimization strategy could lead to incorrect data in aggregate tables or MOR UNIQUE tables. <a href="https://github.com/apache/doris/pull/38299" target="_blank" rel="noopener noreferrer"> #38299</a></p>
</li>
<li>
<p>Optimizes the rowset selection strategy during compaction during replica replenishment to avoid triggering -235 errors. <a href="https://github.com/apache/doris/pull/39262" target="_blank" rel="noopener noreferrer">#39262</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mow-merge-on-write">MOW (Merge-On-Write)<a href="https://doris.apache.org/blog/release-note-2.1.6#mow-merge-on-write" class="hash-link" aria-label="Direct link to MOW (Merge-On-Write)" title="Direct link to MOW (Merge-On-Write)">&#x200B;</a></h3>
<ul>
<li>
<p>Optimizes slow column updates caused by concurrent column updates and compactions. <a href="https://github.com/apache/doris/pull/38682" target="_blank" rel="noopener noreferrer">#38682</a></p>
</li>
<li>
<p>Fixes an issue where segcompaction during bulk data imports could lead to incorrect MOW data. <a href="https://github.com/apache/doris/pull/38992" target="_blank" rel="noopener noreferrer">#38992</a> <a href="https://github.com/apache/doris/pull/39707" target="_blank" rel="noopener noreferrer">#39707</a></p>
</li>
<li>
<p>Fixes data loss in column updates that may occur after BE restarts. <a href="https://github.com/apache/doris/pull/39035" target="_blank" rel="noopener noreferrer">#39035</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.6#storage-management" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>
<p>Adds FE configuration to control whether queries under hot-cold tiering prefer local data replicas. <a href="https://github.com/apache/doris/pull/38322" target="_blank" rel="noopener noreferrer">#38322</a></p>
</li>
<li>
<p>Optimizes expired BE report messages to include newly created tablets. <a href="https://github.com/apache/doris/pull/38839" target="_blank" rel="noopener noreferrer">#38839</a> <a href="https://github.com/apache/doris/pull/39605" target="_blank" rel="noopener noreferrer">#39605</a></p>
</li>
<li>
<p>Optimizes replica scheduling priority strategy to prioritize replicas with missing data. <a href="https://github.com/apache/doris/pull/38884" target="_blank" rel="noopener noreferrer">#38884</a></p>
</li>
<li>
<p>Prevents tablets with unfinished ALTER jobs from being balanced. <a href="https://github.com/apache/doris/pull/39202" target="_blank" rel="noopener noreferrer">#39202</a></p>
</li>
<li>
<p>Enables modifying the number of buckets for tables with list partitioning. <a href="https://github.com/apache/doris/pull/39688" target="_blank" rel="noopener noreferrer">#39688</a></p>
</li>
<li>
<p>Prefers querying from online disk services. <a href="https://github.com/apache/doris/pull/39654" target="_blank" rel="noopener noreferrer">#39654</a></p>
</li>
<li>
<p>Improves error messages for materialized view base tables that do not support deletion during synchronization. <a href="https://github.com/apache/doris/pull/39857" target="_blank" rel="noopener noreferrer">#39857</a></p>
</li>
<li>
<p>Improves error messages for single columns exceeding 4GB. <a href="https://github.com/apache/doris/pull/39897" target="_blank" rel="noopener noreferrer">#39897</a></p>
</li>
<li>
<p>Fixes an issue where aborted transactions were omitted when plan errors occurred during <code>INSERT</code> statements.<a href="https://github.com/apache/doris/pull/38260" target="_blank" rel="noopener noreferrer">#38260</a></p>
</li>
<li>
<p>Fixes exceptions during SSL connection closure.<a href="https://github.com/apache/doris/pull/38677" target="_blank" rel="noopener noreferrer">#38677</a></p>
</li>
<li>
<p>Fixes an issue where table locks were not held when aborting transactions using labels. <a href="https://github.com/apache/doris/pull/38842" target="_blank" rel="noopener noreferrer">#38842</a></p>
</li>
<li>
<p>Fixes <code>gson pretty</code> causing large image issues. <a href="https://github.com/apache/doris/pull/39135" target="_blank" rel="noopener noreferrer">#39135</a></p>
</li>
<li>
<p>Fixes an issue where the new optimizer did not check for bucket values of 0 in <code>CREATE TABLE</code> statements.<a href="https://github.com/apache/doris/pull/38999" target="_blank" rel="noopener noreferrer">#38999</a></p>
</li>
<li>
<p>Fixes errors when Chinese column names are included in <code>DELETE</code> condition predicates. <a href="https://github.com/apache/doris/pull/39500" target="_blank" rel="noopener noreferrer">#39500</a></p>
</li>
<li>
<p>Fixes frequent tablet balancing issues in partition balancing mode. <a href="https://github.com/apache/doris/pull/39606" target="_blank" rel="noopener noreferrer">#39606</a></p>
</li>
<li>
<p>Fixes an issue where partition storage policy attributes were lost. <a href="https://github.com/apache/doris/pull/39677" target="_blank" rel="noopener noreferrer">#39677</a></p>
</li>
<li>
<p>Fixes incorrect statistics when importing multiple tables within a transaction. <a href="https://github.com/apache/doris/pull/39548" target="_blank" rel="noopener noreferrer">#39548</a></p>
</li>
<li>
<p>Fixes errors when deleting random bucket tables. <a href="https://github.com/apache/doris/pull/39830" target="_blank" rel="noopener noreferrer">#39830</a></p>
</li>
<li>
<p>Fixes issues where FE fails to start due to non-existent UDFs. <a href="https://github.com/apache/doris/pull/39868" target="_blank" rel="noopener noreferrer">#39868</a></p>
</li>
<li>
<p>Fixes inconsistencies in the last failed version between FE master and slave. <a href="https://github.com/apache/doris/pull/39947" target="_blank" rel="noopener noreferrer">#39947</a></p>
</li>
<li>
<p>Fixes an issue where related tablets may still be in schema change state when schema change jobs are canceled. <a href="https://github.com/apache/doris/pull/39327" target="_blank" rel="noopener noreferrer"> #39327</a></p>
</li>
<li>
<p>Fixes errors when modifying type and column order in a single statement schema change (SC). <a href="https://github.com/apache/doris/pull/39107" target="_blank" rel="noopener noreferrer">#39107</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-loading">Data Loading<a href="https://doris.apache.org/blog/release-note-2.1.6#data-loading" class="hash-link" aria-label="Direct link to Data Loading" title="Direct link to Data Loading">&#x200B;</a></h3>
<ul>
<li>
<p>Improves error messages for -238 errors during imports. <a href="https://github.com/apache/doris/pull/39182" target="_blank" rel="noopener noreferrer">#39182</a></p>
</li>
<li>
<p>Allows importing to other partitions while restoring a partition. <a href="https://github.com/apache/doris/pull/39915" target="_blank" rel="noopener noreferrer">#39915</a></p>
</li>
<li>
<p>Optimizes the strategy for FE to select BEs during group commit. <a href="https://github.com/apache/doris/pull/37830" target="_blank" rel="noopener noreferrer">#37830</a> <a href="https://github.com/apache/doris/pull/39010" target="_blank" rel="noopener noreferrer">#39010</a></p>
</li>
<li>
<p>Avoids printing stack traces for some common streamload error messages. <a href="https://github.com/apache/doris/pull/38418" target="_blank" rel="noopener noreferrer">#38418</a></p>
</li>
<li>
<p>Improves handling of issues where offline BEs may affect import errors. <a href="https://github.com/apache/doris/pull/38256" target="_blank" rel="noopener noreferrer">#38256</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions">Permissions<a href="https://doris.apache.org/blog/release-note-2.1.6#permissions" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>Optimizes access performance after enabling the Ranger authentication plugin. <a href="https://github.com/apache/doris/pull/38575" target="_blank" rel="noopener noreferrer">#38575</a></li>
<li>Optimizes permission strategies for Refresh Catalog/Database/Table operations, allowing users to perform these operations with only SHOW permissions. <a href="https://github.com/apache/doris/pull/39008" target="_blank" rel="noopener noreferrer">#39008</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug fixes<a href="https://doris.apache.org/blog/release-note-2.1.6#bug-fixes" class="hash-link" aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-2.1.6#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Fixes the issue where switching catalogs may result in an error of not finding the database. <a href="https://github.com/apache/doris/pull/38114" target="_blank" rel="noopener noreferrer">#38114</a></p>
</li>
<li>
<p>Addresses exceptions caused by attempting to read non-existent data on S3. <a href="https://github.com/apache/doris/pull/38253" target="_blank" rel="noopener noreferrer">#38253</a></p>
</li>
<li>
<p>Resolves the issue where specifying an abnormal path during export operations may lead to incorrect export locations. <a href="https://github.com/apache/doris/pull/38602" target="_blank" rel="noopener noreferrer">#38602</a></p>
</li>
<li>
<p>Fixes the timezone issue for time columns in Paimon tables. <a href="https://github.com/apache/doris/pull/37716" target="_blank" rel="noopener noreferrer">#37716</a></p>
</li>
<li>
<p>Temporarily disables the Parquet PageIndex feature to avoid certain erroneous behaviors.</p>
</li>
<li>
<p>Corrects the selection of Backend nodes in the blacklist during external table queries. <a href="https://github.com/apache/doris/pull/38984" target="_blank" rel="noopener noreferrer">#38984</a></p>
</li>
<li>
<p>Resolves errors caused by missing subcolumns in Parquet Struct column types.<a href="https://github.com/apache/doris/pull/39192" target="_blank" rel="noopener noreferrer">#39192</a></p>
</li>
<li>
<p>Addresses several issues with predicate pushdown in JDBC Catalog. <a href="https://github.com/apache/doris/pull/39082" target="_blank" rel="noopener noreferrer">#39082</a></p>
</li>
<li>
<p>Fixes issues where some historical Parquet formats led to incorrect query results. <a href="https://github.com/apache/doris/pull/39375" target="_blank" rel="noopener noreferrer">#39375</a></p>
</li>
<li>
<p>Improves compatibility with ojdbc6 drivers for Oracle JDBC Catalog. <a href="https://github.com/apache/doris/pull/39408" target="_blank" rel="noopener noreferrer">#39408</a></p>
</li>
<li>
<p>Resolves potential FE memory leaks caused by Refresh Catalog/Database/Table operations. <a href="https://github.com/apache/doris/pull/39186" target="_blank" rel="noopener noreferrer">#39186</a> <a href="https://github.com/apache/doris/pull/39871" target="_blank" rel="noopener noreferrer">#39871</a></p>
</li>
<li>
<p>Fixes thread leaks in JDBC Catalog under certain conditions. <a href="https://github.com/apache/doris/pull/39666" target="_blank" rel="noopener noreferrer">#39666</a> <a href="https://github.com/apache/doris/pull/39582" target="_blank" rel="noopener noreferrer">#39582</a></p>
</li>
<li>
<p>Addresses potential event processing failures after enabling Hive Metastore event subscription. <a href="https://github.com/apache/doris/pull/39239" target="_blank" rel="noopener noreferrer">#39239</a></p>
</li>
<li>
<p>Disables reading Hive Text format tables with custom escape characters and null formats to prevent data errors. <a href="https://github.com/apache/doris/pull/39869" target="_blank" rel="noopener noreferrer">#39869</a></p>
</li>
<li>
<p>Resolves issues accessing Iceberg tables created via the Iceberg API under certain conditions. <a href="https://github.com/apache/doris/pull/39203" target="_blank" rel="noopener noreferrer">#39203</a></p>
</li>
<li>
<p>Fixes the inability to read Paimon tables stored on HDFS clusters with high availability enabled. <a href="https://github.com/apache/doris/pull/39876" target="_blank" rel="noopener noreferrer">#39876</a></p>
</li>
<li>
<p>Addresses errors that may occur when reading Paimon table deletion vectors after enabling file caching. <a href="https://github.com/apache/doris/pull/39875" target="_blank" rel="noopener noreferrer">#39875</a></p>
</li>
<li>
<p>Resolves potential deadlocks when reading Parquet files under certain conditions. <a href="https://github.com/apache/doris/pull/39945" target="_blank" rel="noopener noreferrer">#39945</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-materialized-view-2">Async Materialized View<a href="https://doris.apache.org/blog/release-note-2.1.6#async-materialized-view-2" class="hash-link" aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">&#x200B;</a></h3>
<ul>
<li>
<p>Fixes the inability to use <code>SHOW CREATE MATERIALIZED VIEW</code> on follower FEs. <a href="https://github.com/apache/doris/pull/38794" target="_blank" rel="noopener noreferrer">#38794</a></p>
</li>
<li>
<p>Unifies the object type of asynchronous materialized views in metadata as tables to enable proper display in data tools. <a href="https://github.com/apache/doris/pull/38797" target="_blank" rel="noopener noreferrer">#38797</a></p>
</li>
<li>
<p>Resolves the issue where nested asynchronous materialized views always perform full refreshes. <a href="https://github.com/apache/doris/pull/38698" target="_blank" rel="noopener noreferrer">#38698</a></p>
</li>
<li>
<p>Fixes the issue where canceled tasks may show as running after restarting FEs. <a href="https://github.com/apache/doris/pull/39424" target="_blank" rel="noopener noreferrer"> #39424</a></p>
</li>
<li>
<p>Addresses incorrect use of contexts, which may lead to unexpected failures of materialized view refresh tasks. <a href="https://github.com/apache/doris/pull/39690" target="_blank" rel="noopener noreferrer">#39690</a></p>
</li>
<li>
<p>Resolves issues that may cause varchar type write failures due to unreasonable lengths when creating asynchronous materialized views based on external tables.<a href="https://github.com/apache/doris/pull/37668" target="_blank" rel="noopener noreferrer">#37668</a></p>
</li>
<li>
<p>Fixes the potential invalidation of asynchronous materialized views based on external tables after FE restarts or catalog rebuilds. <a href="https://github.com/apache/doris/pull/39355" target="_blank" rel="noopener noreferrer">#39355</a></p>
</li>
<li>
<p>Prohibits the use of partition rollup for materialized views with list partitions to prevent the generation of incorrect data. <a href="https://github.com/apache/doris/pull/38124" target="_blank" rel="noopener noreferrer">#38124</a></p>
</li>
<li>
<p>Fixes incorrect results when literals exist in the select list during transparent rewriting for aggregation rollup. <a href="https://github.com/apache/doris/pull/38958" target="_blank" rel="noopener noreferrer">#38958</a></p>
</li>
<li>
<p>Addresses potential errors during transparent rewriting when queries contain filters like <code>a = a</code>. <a href="https://github.com/apache/doris/pull/39629" target="_blank" rel="noopener noreferrer">#39629</a></p>
</li>
<li>
<p>Fixes issues where transparent rewriting for direct external table queries fails. <a href="https://github.com/apache/doris/pull/39041" target="_blank" rel="noopener noreferrer">#39041</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-2">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-2.1.6#semi-structured-data-management-2" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>Removes support for prepared statements in the old optimizer. <a href="https://github.com/apache/doris/pull/39465" target="_blank" rel="noopener noreferrer">#39465</a></p>
</li>
<li>
<p>Fixes issues with JSON escape character handling. <a href="https://github.com/apache/doris/pull/37251" target="_blank" rel="noopener noreferrer">#37251</a></p>
</li>
<li>
<p>Resolves issues with duplicate processing of JSON fields. <a href="https://github.com/apache/doris/pull/38490" target="_blank" rel="noopener noreferrer">#38490</a></p>
</li>
<li>
<p>Fixes issues with some ARRAY and MAP functions. <a href="https://github.com/apache/doris/pull/39307" target="_blank" rel="noopener noreferrer">#39307</a> <a href="https://github.com/apache/doris/pull/39699" target="_blank" rel="noopener noreferrer">#39699</a> <a href="https://github.com/apache/doris/pull/39757" target="_blank" rel="noopener noreferrer">#39757</a></p>
</li>
<li>
<p>Resolves complex combinations of inverted index queries and LIKE queries. <a href="https://github.com/apache/doris/pull/36687" target="_blank" rel="noopener noreferrer">#36687</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-2">Query Optimizer<a href="https://doris.apache.org/blog/release-note-2.1.6#query-optimizer-2" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the potential partition pruning error issue when the &apos;OR&apos; condition exists in partition filter conditions. <a href="https://github.com/apache/doris/pull/38897" target="_blank" rel="noopener noreferrer">#38897</a></p>
</li>
<li>
<p>Fixed the potential partition pruning error issue when complex expressions are involved. <a href="https://github.com/apache/doris/pull/39298" target="_blank" rel="noopener noreferrer">#39298</a></p>
</li>
<li>
<p>Fixed the issue where nullable in <code>agg_state</code> subtypes might be planned incorrectly, leading to execution errors. <a href="https://github.com/apache/doris/pull/37489" target="_blank" rel="noopener noreferrer">#37489</a></p>
</li>
<li>
<p>Fixed the issue where nullable in set operation operators might be planned incorrectly, leading to execution errors. <a href="https://github.com/apache/doris/pull/39109" target="_blank" rel="noopener noreferrer">#39109</a></p>
</li>
<li>
<p>Fixed the incorrect execution priority issue of intersect operator. <a href="https://github.com/apache/doris/pull/39095" target="_blank" rel="noopener noreferrer">#39095</a></p>
</li>
<li>
<p>Fixed the NPE issue that may occur when the maximum valid date literal exists in the query. <a href="https://github.com/apache/doris/pull/39482" target="_blank" rel="noopener noreferrer">#39482</a></p>
</li>
<li>
<p>Fixed the occasional planning error that results in an illegal slot error during execution. <a href="https://github.com/apache/doris/pull/39640" target="_blank" rel="noopener noreferrer">#39640</a></p>
</li>
<li>
<p>Fixed the issue where repeatedly referencing columns in cte may lead to missing data in some columns in the result. <a href="https://github.com/apache/doris/pull/39850" target="_blank" rel="noopener noreferrer">#39850</a></p>
</li>
<li>
<p>Fixed the occasional planning error issue when &apos;case when&apos; exists in the query. <a href="https://github.com/apache/doris/pull/38491" target="_blank" rel="noopener noreferrer">#38491</a></p>
</li>
<li>
<p>Fixed the issue where IP types cannot be implicitly converted to string types. <a href="https://github.com/apache/doris/pull/39318" target="_blank" rel="noopener noreferrer">#39318</a></p>
</li>
<li>
<p>Fixed the potential planning error issue when using multi-dimensional aggregation and the same column and its alias exist in the select list. <a href="https://github.com/apache/doris/pull/38166" target="_blank" rel="noopener noreferrer"> #38166</a></p>
</li>
<li>
<p>Fixed the issue where boolean types might be handled incorrectly when using BE constant folding. <a href="https://github.com/apache/doris/pull/39019" target="_blank" rel="noopener noreferrer">#39019</a></p>
</li>
<li>
<p>Fixed the planning error issue caused by <code>default_cluster</code>: as a prefix for the database name in expressions. <a href="https://github.com/apache/doris/pull/39114" target="_blank" rel="noopener noreferrer">#39114</a></p>
</li>
<li>
<p>Fixed the potential deadlock issue caused by<code> insert into</code>. <a href="https://github.com/apache/doris/pull/38660" target="_blank" rel="noopener noreferrer">#38660</a></p>
</li>
<li>
<p>Fixed the potential planning error issue caused by not holding table locks throughout the planning process. <a href="https://github.com/apache/doris/pull/38950" target="_blank" rel="noopener noreferrer">#38950</a></p>
</li>
<li>
<p>Fixed the issue where CHAR(0), VARCHAR(0) are not handled correctly when creating tables. <a href="https://github.com/apache/doris/pull/38427" target="_blank" rel="noopener noreferrer">#38427</a></p>
</li>
<li>
<p>Fixed the issue where <code>show create table</code> may incorrectly display hidden columns. <a href="https://github.com/apache/doris/pull/38796" target="_blank" rel="noopener noreferrer">#38796</a></p>
</li>
<li>
<p>Fixed the issue where columns with the same name as hidden columns are not prohibited when creating tables. <a href="https://github.com/apache/doris/pull/38796" target="_blank" rel="noopener noreferrer">#38796</a></p>
</li>
<li>
<p>Fixed the occasional planning error issue when executing <code>insert into as select</code> with CTEs. <a href="https://github.com/apache/doris/pull/38526" target="_blank" rel="noopener noreferrer">#38526</a></p>
</li>
<li>
<p>Fixed the issue where <code>insert into values</code> cannot automatically fill null default values. <strong>[<a href="https://doris.apache.org/blog/Nereids">fix</a> fix insert into table with null literal default value #39122](<a href="https://github.com/apache/doris/pull/39122" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/pull/39122</a>)</strong></p>
</li>
<li>
<p>Fixed the NPE issue caused by using cte in delete without using it. <a href="https://github.com/apache/doris/pull/39379" target="_blank" rel="noopener noreferrer">#39379</a></p>
</li>
<li>
<p>Fixed the issue where deleting from a randomly distributed aggregation model table fails. <a href="https://github.com/apache/doris/pull/37985" target="_blank" rel="noopener noreferrer">#37985</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-2.1.6#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the issue where the pipeline execution engine gets stuck in multiple scenarios, causing queries not to end. <a href="https://github.com/apache/doris/pull/38657" target="_blank" rel="noopener noreferrer">#38657</a> <a href="https://github.com/apache/doris/pull/38206" target="_blank" rel="noopener noreferrer">#38206</a> <a href="https://github.com/apache/doris/pull/38885" target="_blank" rel="noopener noreferrer">#38885</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by null and non-null columns in set difference calculations.<a href="https://github.com/apache/doris/pull/38737" target="_blank" rel="noopener noreferrer">#38737</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of the <code>width_bucket</code> function. <a href="https://github.com/apache/doris/pull/37892" target="_blank" rel="noopener noreferrer">#37892</a></p>
</li>
<li>
<p>Fixed the query error issue when a single row of data is large and the result set is also large (exceeding 2GB). <a href="https://github.com/apache/doris/pull/37990" target="_blank" rel="noopener noreferrer">#37990</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of <code>stddev</code> with DecimalV2 type. <a href="https://github.com/apache/doris/pull/38731" target="_blank" rel="noopener noreferrer">#38731</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>MULTI_MATCH_ANY</code> function. <a href="https://github.com/apache/doris/pull/37959" target="_blank" rel="noopener noreferrer">#37959</a></p>
</li>
<li>
<p>Fixed the issue where <code>insert overwrite auto partition</code> causes transaction rollback. <a href="https://github.com/apache/doris/pull/38103" target="_blank" rel="noopener noreferrer">#38103</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of the <code>convert_tz</code> function. <a href="https://github.com/apache/doris/pull/37358" target="_blank" rel="noopener noreferrer">#37358</a> <a href="https://github.com/apache/doris/pull/38764" target="_blank" rel="noopener noreferrer">#38764</a></p>
</li>
<li>
<p>Fixed the coredump issue when using the <code>collect_set</code> function with window functions. <a href="https://github.com/apache/doris/pull/38234" target="_blank" rel="noopener noreferrer">#38234</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the mod function with abnormal input. <a href="https://github.com/apache/doris/pull/37999" target="_blank" rel="noopener noreferrer">#37999</a></p>
</li>
<li>
<p>Fixed the issue where executing the same expression in multiple threads may lead to incorrect Java UDF results. <a href="https://github.com/apache/doris/pull/38612" target="_blank" rel="noopener noreferrer">#38612</a></p>
</li>
<li>
<p>Fixed the overflow issue caused by the incorrect return type of the <code>conv</code> function. <a href="https://github.com/apache/doris/pull/38001" target="_blank" rel="noopener noreferrer">#38001</a></p>
</li>
<li>
<p>Fixed the unstable result issue of the histogram function. <a href="https://github.com/apache/doris/pull/38608" target="_blank" rel="noopener noreferrer">#38608</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup--recovery--ccr">Backup &amp; Recovery / CCR<a href="https://doris.apache.org/blog/release-note-2.1.6#backup--recovery--ccr" class="hash-link" aria-label="Direct link to Backup &amp; Recovery / CCR" title="Direct link to Backup &amp; Recovery / CCR">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the issue where the data version after backup and recovery may be incorrect, leading to unreadability. <a href="https://github.com/apache/doris/pull/38343" target="_blank" rel="noopener noreferrer">#38343</a></p>
</li>
<li>
<p>Fixed the issue of using restore version across versions. <a href="https://github.com/apache/doris/pull/38396" target="_blank" rel="noopener noreferrer">#38396</a></p>
</li>
<li>
<p>Fixed the issue where the job is not canceled when backup fails. <a href="https://github.com/apache/doris/pull/38993" target="_blank" rel="noopener noreferrer">#38993</a></p>
</li>
<li>
<p>Fixed the NPE issue in ccr during the upgrade from 2.1.4 to 2.1.5, causing the FE to fail to start. <a href="https://github.com/apache/doris/pull/39910" target="_blank" rel="noopener noreferrer">#39910</a></p>
</li>
<li>
<p>Fixed the issue where views and materialized views cannot be used after restoration. <a href="https://github.com/apache/doris/pull/38072" target="_blank" rel="noopener noreferrer">#38072</a> <a href="https://github.com/apache/doris/pull/39848" target="_blank" rel="noopener noreferrer">#39848</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-management-1">Storage Management<a href="https://doris.apache.org/blog/release-note-2.1.6#storage-management-1" class="hash-link" aria-label="Direct link to Storage Management" title="Direct link to Storage Management">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed possible memory leaks in routine load when loading multiple tables from a single stream. <a href="https://github.com/apache/doris/pull/38824" target="_blank" rel="noopener noreferrer">#38824</a></p>
</li>
<li>
<p>Fixed the issue where delimiters and escape characters in routine load were not effective. <a href="https://github.com/apache/doris/pull/38825" target="_blank" rel="noopener noreferrer">#38825</a></p>
</li>
<li>
<p>Fixed incorrectly show routine load results when the routine load task name contained uppercase letters. <a href="https://github.com/apache/doris/pull/38826" target="_blank" rel="noopener noreferrer">#38826</a></p>
</li>
<li>
<p>Fixed the issue where the offset cache was not reset when changing the routineload topic. <a href="https://github.com/apache/doris/pull/38474" target="_blank" rel="noopener noreferrer">#38474</a></p>
</li>
<li>
<p>Fixed the potential exception triggered by show routineload under concurrent scenarios. <a href="https://github.com/apache/doris/pull/39525" target="_blank" rel="noopener noreferrer">#39525</a></p>
</li>
<li>
<p>Fixed the issue where routine load might import data repeatedly. <a href="https://github.com/apache/doris/pull/39526" target="_blank" rel="noopener noreferrer">#39526</a></p>
</li>
<li>
<p>Fixed the data error caused by <code>setNull</code> when enabling group commit via JDBC. <a href="https://github.com/apache/doris/pull/38276" target="_blank" rel="noopener noreferrer">#38276</a></p>
</li>
<li>
<p>Fixed the potential NPE issue when enabling group commit insert to a non-master FE. <a href="https://github.com/apache/doris/pull/38345" target="_blank" rel="noopener noreferrer">#38345</a></p>
</li>
<li>
<p>Fixed incorrect error handling during internal data writing in group commit. <a href="https://github.com/apache/doris/pull/38997" target="_blank" rel="noopener noreferrer">#38997</a></p>
</li>
<li>
<p>Fixed the coredump that might be triggered when the group commit execution plan failed. <a href="https://github.com/apache/doris/pull/39396" target="_blank" rel="noopener noreferrer">#39396</a></p>
</li>
<li>
<p>Fixed the issue where concurrent imports into auto partition tables might report non-existent tablets. <a href="https://github.com/apache/doris/pull/38793" target="_blank" rel="noopener noreferrer">#38793</a></p>
</li>
<li>
<p>Fixed potential load stream leakage issues. <a href="https://github.com/apache/doris/pull/39039" target="_blank" rel="noopener noreferrer">#39039</a></p>
</li>
<li>
<p>Fixed the issue where transactions were opened for <code>insert into select</code> with no data. <a href="https://github.com/apache/doris/pull/39108" target="_blank" rel="noopener noreferrer">#39108</a></p>
</li>
<li>
<p>Ignored the single-replica import configuration when using memtable prefetching. <a href="https://github.com/apache/doris/pull/39154" target="_blank" rel="noopener noreferrer">#39154</a></p>
</li>
<li>
<p>Fixed the issue where background imports of stream load records might be abnormally aborted upon encountering db deletion. <a href="https://github.com/apache/doris/pull/39527" target="_blank" rel="noopener noreferrer">#39527</a></p>
</li>
<li>
<p>Fixed inaccurate error messages when data errors occurred in strict mode. <a href="https://github.com/apache/doris/pull/39587" target="_blank" rel="noopener noreferrer">#39587</a></p>
</li>
<li>
<p>Fixed the issue where streamload did not return an error URL upon encountering erroneous data. <a href="https://github.com/apache/doris/pull/38417" target="_blank" rel="noopener noreferrer">#38417</a></p>
</li>
<li>
<p>Fixed the issue with the combined use of insert overwrite and auto partition. <a href="https://github.com/apache/doris/pull/38442" target="_blank" rel="noopener noreferrer">#38442</a></p>
</li>
<li>
<p>Fixed parsing errors when CSV encountered data where the line delimiter was enclosed by the enclosing character. <a href="https://github.com/apache/doris/pull/38445" target="_blank" rel="noopener noreferrer">#38445</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-exporting">Data Exporting<a href="https://doris.apache.org/blog/release-note-2.1.6#data-exporting" class="hash-link" aria-label="Direct link to Data Exporting" title="Direct link to Data Exporting">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where enabling the delete_existing_files property during export operations might result in duplicate deletion of exported data. <a href="https://github.com/apache/doris/pull/39304" target="_blank" rel="noopener noreferrer">#39304</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissions-1">Permissions<a href="https://doris.apache.org/blog/release-note-2.1.6#permissions-1" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the incorrect requirement of ALTER TABLE permission when creating a materialized view. <a href="https://github.com/apache/doris/pull/38011" target="_blank" rel="noopener noreferrer">#38011</a></p>
</li>
<li>
<p>Fixed the issue where the db was explicitly displayed as empty when showing routine load. <a href="https://github.com/apache/doris/pull/38365" target="_blank" rel="noopener noreferrer">#38365</a></p>
</li>
<li>
<p>Fixed the incorrect requirement of CREATE permission on the original table when using CREATE TABLE LIKE. <a href="https://github.com/apache/doris/pull/37879" target="_blank" rel="noopener noreferrer">#37879</a></p>
</li>
<li>
<p>Fixed the issue where grant operations did not check if the object existed. <a href="https://github.com/apache/doris/pull/39597" target="_blank" rel="noopener noreferrer">#39597</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-suggestions">Upgrade suggestions<a href="https://doris.apache.org/blog/release-note-2.1.6#upgrade-suggestions" class="hash-link" aria-label="Direct link to Upgrade suggestions" title="Direct link to Upgrade suggestions">&#x200B;</a></h2>
<p>When upgrading Doris, please follow the principle of not skipping two minor versions and upgrade sequentially.</p>
<p>For example, if you are upgrading from version 0.15.x to 2.0.x, it is recommended to first upgrade to the latest version of 1.1, then upgrade to the latest version of 1.2, and finally upgrade to the latest version of 2.0.</p>
<p>For more upgrade information, see the documentation: <a href="https://doris.apache.org/admin-manual/cluster-management/upgrade">Cluster Upgrade</a></p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Creator of Talkie migrated from Loki and built a PB-scale logging system with Apache Doris]]></title>
            <link>https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris</link>
            <guid>https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris</guid>
            <pubDate>Thu, 29 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Serving a PB-scale data size with over 99.9% availability, Apache Doris is the vital signs monitor of MiniMax, the maker of Talkie-the soulful AI that is sweeping the world.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Best Practice</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Creator of Talkie migrated from Loki and built a PB-scale logging system with Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-08-29T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">August 29, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>You might not have heard of <a href="https://www.minimaxi.com/en" target="_blank" rel="noopener noreferrer">MiniMax</a>, but you&apos;ve probably heard of <a href="https://www.talkie-ai.com/" target="_blank" rel="noopener noreferrer">Talkie</a>, the AI chatbot taking the world by storm. In the summer of 2024, Talkie ranked fifth among the most-downloaded free entertainment apps in the US, bringing its creator, MiniMax, into the global spotlight. As the maker of this market-stunning product, the AI unicorn maintains a low profile, but its history of smart decision-making dates back a long way.</p>
<p>Before MoE (Mixture of Experts) became an industry consensus, MiniMax has been investing most of its efforts in it. In April 2024, MiniMax launched its first commercially deployed MoE-based LLM, <strong>MiniMax-abab 6.5</strong>, which contains over a trillion parameters and delivers performances comparable to GPT-4, Claude-3, and Gemini-1.5.</p>
<p>As their LLM is getting more complex and called upon more frequently, it generates an exploding amount of logs from model training and inference. These logs provide the basis for performance monitoring, optimization, and troubleshooting. The existing Grafana Loki-based logging system of MiniMax faced performance and stability issues, so they planned for an upgrade. After looking at the common industry solutions, they came to Apache Doris.</p>
<p><strong>Now, all of MiniMax&apos;s business lines have been integrated with the Apache Doris-based logging system, which serves a PB-scale data size with over 99.9% availability. The query latency on 100 million logs is within seconds.</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-old-grafana-loki-based-logging-system">The old Grafana Loki-based logging system<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#the-old-grafana-loki-based-logging-system" class="hash-link" aria-label="Direct link to The old Grafana Loki-based logging system" title="Direct link to The old Grafana Loki-based logging system">&#x200B;</a></h2>
<p>The design of Loki, an open-source log aggregation system, was inspired by Prometheus and developed by the Grafana Labs team. It does not have an indexing structure, but instead builds indexes only on log labels and metadata.</p>
<p>The major components of a Loki-based system typically include:</p>
<ul>
<li>
<p><strong>Loki</strong>: the main server responsible for log storage and querying.</p>
</li>
<li>
<p><strong>Promtail</strong>: the agent layer for collecting logs and sending them to Loki.</p>
</li>
<li>
<p><strong>Grafana</strong>: for user interface visualization.</p>
</li>
</ul>
<p>To deploy Grafana Loki, each cluster should be deployed with a complete set of log collectors and Loki log storage/query services.</p>
<p>Loki uses an Index + Chunk design for log storage, where during ingestion, the different log streams are dispersed across various Ingesters based on a hash of the log labels, and the Ingesters are responsible for writing the log data to object storage. During querying, the Querier retrieves the relevant Chunks from the object storage based on the Index, and then performs the log matching.</p>
<p><img decoding="async" loading="lazy" alt="The old Grafana Loki-based logging system" src="https://doris.apache.org/assets/images/the-old-grafana-Loki-based-logging-system-d4f25adbc22b2ca44321d0dbf84603dc.png" width="1280" height="498" class="img_ev3q"></p>
<p>Although Grafana Loki is positioned as a lightweight, horizontally scalable, and highly available log management system, it still faces some challenges in practical business use:</p>
<ul>
<li>
<p><strong>Excessive query resource consumption</strong>: Loki does not create indexes based on the log, but instead, it only performs preliminary filtering of logs at the label granularity. Thus, for searches on the logs, it applies the query mechanism to perform full-text regular expression matching on the entire log data set. This operation can lead to spikes in resource consumption, including CPU, memory, and network bandwidth. As the volume of data being queried and the query per second (QPS) increases, Loki shows increasingly intolerable resource consumption and instability.</p>
</li>
<li>
<p><strong>Complex architecture</strong>: In addition to the modules shown in the above diagram, Loki also includes components like the Index Gateway, Memcache, and Compactor. The large number of architectural components makes the system challenging to operate and manage, and complex to configure.</p>
</li>
<li>
<p><strong>High maintenance cost and difficulty</strong>: MiniMax has a large number of deployed clusters, and each cluster has differences in its system, resources, storage, and network environments. The need to deploy an independent Loki architecture in each cluster adds to the maintenance difficulty.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-apache-doris">Why Apache Doris<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#why-apache-doris" class="hash-link" aria-label="Direct link to Why Apache Doris" title="Direct link to Why Apache Doris">&#x200B;</a></h2>
<p>As one of the most data-intensive industries, AI use cases are characterized by long processing pipelines, abundant contextual data, and large per-request data volumes. Thus, the log size the MiniMax generates far exceeds those of non-AI software products of the same user base. The gigantic log size of MiniMax requires their logging system to be:</p>
<ul>
<li>
<p><strong>High-performance</strong>: They need the system to return query results on 100 million log entries within seconds.</p>
</li>
<li>
<p><strong>Flexible</strong>: The system should support log alerting and log metric queries, such as generating statistical trend lines for key terms.</p>
</li>
<li>
<p><strong>Low-cost</strong>: The petabyte-scale raw log data continues to grow, so it&apos;s a make-or-break factor to keep the storage and computational costs within reasonable bounds.</p>
</li>
</ul>
<p>After an evaluation of mature logging system architectures in the industry, MiniMax identified the following key components typically found in leading log management solutions:</p>
<ul>
<li>
<p><strong>Collection agent</strong>: collecting logs from service standard outputs and pushing the data into a central message queue.</p>
</li>
<li>
<p><strong>Message queue</strong>: decoupling upstream and downstream components, absorbing spikes, and ensuring system stability even when downstream components are unavailable.</p>
</li>
<li>
<p><strong>Storage and query middleware</strong>: storing and querying the log data. In a logging system, this middleware should be capable of inverted indexing to support efficient log searches.</p>
</li>
</ul>
<p>MiniMax decided to use iLogtail for the collection agents, Kafka for the message queue, and Apache Doris as the storage and query middleware. In selecting the storage middleware, MiniMax compared the representative technologies of Apache Doris and Elasticsearch.</p>
<p>Based on such reference architecture, MiniMax decided to use iLogtail as the collection agent, Apache Kafka for the message queue, and <strong><a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Apache Doris</a> as the storage and query middleware</strong>. The middleware decision was made after comparing Apache Doris and Elasticsearch.</p>
<p><img decoding="async" loading="lazy" alt="Why Apache Doris" src="https://doris.apache.org/assets/images/why-Apache-Doris-1cf3509615f273424114b2dc5a8aab3d.png" width="1280" height="578" class="img_ev3q"></p>
<p>Apache Doris shows competitiveness in cost and performance. It stands out particularly in storage efficiency, write throughput, and aggregation. Additionally, its compatibility with the MySQL syntax makes it more user-friendly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apache-doris-based-logging-system">Apache Doris-based logging system<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#apache-doris-based-logging-system" class="hash-link" aria-label="Direct link to Apache Doris-based logging system" title="Direct link to Apache Doris-based logging system">&#x200B;</a></h2>
<p><img decoding="async" loading="lazy" alt="Apache Doris-based logging system" src="https://doris.apache.org/assets/images/apache-doris-based-logging-system-915a5c753d8bc0a6f406a5afab1da799.png" width="1280" height="571" class="img_ev3q"></p>
<p>The new logging system of MiniMax, called Mlogs, is more streamlined, with a single architecture serving all clusters. The upper layer acts as the control plane for the logging system, which consists of the encapsulation of log query interfaces and the module for automatic configuration generation and distribution. The lower layer represents the data plane of the logging system, containing the log collection agent, message queue, log writer, and the <strong>Apache Doris</strong> database.</p>
<p>Logs generated by the cluster services are collected by iLogtail and pushed to Kafka. Part of these logs is pulled from Kafka by the Mlogs Ingester and written to the Doris cluster via the Stream Load method of Apache Doris. The rest is directly subscribed to in real-time by Doris via Routine Load, pulling the message stream from Kafka. <strong>Ultimately, Apache Doris handles the storage and querying of all log data, eliminating the need for separate deployments for each cluster.</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hands-on-experience-from-minimax">Hands-on experience from MiniMax<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#hands-on-experience-from-minimax" class="hash-link" aria-label="Direct link to Hands-on experience from MiniMax" title="Direct link to Hands-on experience from MiniMax">&#x200B;</a></h2>
<p><strong>Log ingestion</strong></p>
<p>The new architecture utilizes both the Routine Load and Stream Load methods of Apache Doris. Routine Load is ready to use out of the box and can directly handle JSON logs without the need for additional parsing. For more complex logs that require filtering and processing, MiniMax has introduced a log writer called Mlogs Ingester between Kafka and Doris. The Mlogs Ingester parses and processes the logs before writing them to Doris via Stream Load.</p>
<p><strong>Log search</strong></p>
<p>For log searches, MiniMax utilizes the inverted indexes and full-text regular expression query capabilities of Apache Doris.</p>
<ul>
<li>
<p>The inverted index of Apache Doris fits into a wide range of use cases and delivers high query performance. It&apos;s mainly used in <code>MATCH</code> and <code>MATCH_PHRASE</code> queries.</p>
</li>
<li>
<p>Full-text regular expression query (<code>REGEXP</code>) provides higher precision but lower performance than token-based queries. It is suitable for smaller-scale queries where precision is critical.</p>
</li>
</ul>
<p><strong>Performance improvement</strong></p>
<p>MiniMax implements <strong>query truncation</strong> to further accelerate queries. Log data is arranged linearly in chronological order. If a query requests data of a large range, it can consume excessive computation, storage, and network resources and potentially lead to query timeouts or even system unavailability. So they set and truncate the time range of the queries to prevent overly broad queries, and pre-calculate the data volume for all tables every 15 minutes to dynamically estimate the maximum queryable time range across different tables.</p>
<p><strong>Cost control</strong></p>
<p>To cut down storage costs, MiniMax utilizes the <strong><a href="https://doris.apache.org/docs/table-design/cold-hot-separation/" target="_blank" rel="noopener noreferrer">tiered storage</a></strong> capabilities of Apache Doris. They define data within the last 7 days as hot data and data older than 7 days as cold data. Data will be moved to object storage as soon as it turns cold. Furthermore, they archive object storage data that is over 30 days old and only restore the archived data when necessary.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="value-to-minimax">Value to MiniMax<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#value-to-minimax" class="hash-link" aria-label="Direct link to Value to MiniMax" title="Direct link to Value to MiniMax">&#x200B;</a></h2>
<p>Now, the Apache Doris-based logging system has been supporting all business line log data within MiniMax, serving a <strong>PB-scale data size</strong> with over <strong>99.9% availability</strong>. It has also brought the following values to MiniMax:</p>
<ul>
<li>
<p><strong>Simplified architecture</strong>: The new system is easier to deploy and allows a single framework to serve all clusters. This reduces maintenance and management complexity, thus saving operational manpower and costs.</p>
</li>
<li>
<p><strong>Fast query response</strong>: The new system can respond to keyword searches and aggregation queries from 1 billion log records within 2 seconds. Most log queries can return results within seconds, too.</p>
</li>
<li>
<p><strong>High write performance</strong>: With the current hardware setups, the system can deliver a log write throughput of 10 GB/s, while maintaining data latency within seconds.</p>
</li>
<li>
<p><strong>Low storage costs</strong>: The data compression ratio reaches 5:1 and tiered storage further reduces storage costs by 70%.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&apos;s next<a href="https://doris.apache.org/blog/ai-unicorn-minimax-from-loki-and-built-a-pb-scale-logging-system-with-doris#whats-next" class="hash-link" aria-label="Direct link to What&apos;s next" title="Direct link to What&apos;s next">&#x200B;</a></h2>
<p>After a successful initial experience with Apache Doris, MiniMax proceeds with the next phase of its upgrade plan, which includes the following efforts:</p>
<ul>
<li>
<p><strong>Log pre-processing</strong>: introduce log sampling and structuring to improve data usability and storage efficiency.</p>
</li>
<li>
<p><strong>Tracing</strong>: integrate the logging system with other observability systems (monitoring, alerting, tracing, etc.) to provide comprehensive operational insights.</p>
</li>
<li>
<p><strong>Lakehousing</strong>: expand the use of Apache Doris include big data processing and analysis within MiniMax, laying the foundation for a data lakehouse.</p>
</li>
</ul>
<p>If you have any questions or require assistance regarding Apache Doris, join the <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2gmq5o30h-455W226d79zP3L96ZhXIoQ" target="_blank" rel="noopener noreferrer">community</a>.</p></div>]]></content:encoded>
            <category>Best Practice</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris 3.0.1 just released]]></title>
            <link>https://doris.apache.org/blog/release-note-3.0.1</link>
            <guid>https://doris.apache.org/blog/release-note-3.0.1</guid>
            <pubDate>Fri, 23 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[In this version, Apache Doris has improvements in compute-storage decoupling, lakehouse, semi-structured data analysis and more.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris 3.0.1 just released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-08-23T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">August 23, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community members, the Apache Doris 3.0.1 version was officially released on August 23, 2024, featuring updates and improvements in compute-storage decoupling, lakehouse, semi-structured data analysis, asynchronous materialized views, and more.</p>
<p><strong>Quick Download:</strong> <a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href="https://github.com/apache/doris/releases" target="_blank" rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-changes">Behavior Changes<a href="https://doris.apache.org/blog/release-note-3.0.1#behavior-changes" class="hash-link" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.1#query-optimizer" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Added the variable <code>use_max_length_of_varchar_in_ctas</code> to control the length behavior of VARCHAR type when executing <code>CREATE TABLE AS SELECT</code> (CTAS) operations.  <a href="https://github.com/apache/doris/pull/37069" target="_blank" rel="noopener noreferrer">#37069</a></p>
<ul>
<li>
<p>This variable is set to true by default.</p>
</li>
<li>
<p>When set to true, if the VARCHAR type column originates from a table, the derived length is used; otherwise, the maximum length is used.</p>
</li>
<li>
<p>When set to false, the VARCHAR type will always use the derived length.</p>
</li>
</ul>
</li>
<li>
<p>All data types will now be displayed in lowercase to maintain compatibility with MySQL format. <a href="https://github.com/apache/doris/pull/38012" target="_blank" rel="noopener noreferrer">#38012</a></p>
</li>
<li>
<p>Multiple query statements in the same query request must now be separated by semicolons. <a href="https://github.com/apache/doris/pull/38670" target="_blank" rel="noopener noreferrer">#38670</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.1#query-execution" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>The default number of parallel tasks after shuffle operations in the cluster is set to 100, which will improve query stability and concurrent processing capability in large clusters. <a href="https://github.com/apache/doris/pull/38196" target="_blank" rel="noopener noreferrer">#38196</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">Storage<a href="https://doris.apache.org/blog/release-note-3.0.1#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>
<p>The default value of <code>trash_file_expire_time_sec</code> has been changed from 86400 seconds to 0 seconds, which means that if files are deleted by mistake and the FE trash is cleared, the data cannot be recovered.</p>
</li>
<li>
<p>The table attribute <code>enable_mow_delete_on_delete_predicate</code> (introduced in version 3.0.0) has been renamed to <code>enable_mow_light_delete</code>.</p>
</li>
<li>
<p>Explicit transactions are now prohibited from performing delete operations on tables with written data.</p>
</li>
<li>
<p>Heavy schema change operations are prohibited on tables with auto-increment fields.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="https://doris.apache.org/blog/release-note-3.0.1#new-features" class="hash-link" aria-label="Direct link to New Features" title="Direct link to New Features">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="job-scheduling">Job Scheduling<a href="https://doris.apache.org/blog/release-note-3.0.1#job-scheduling" class="hash-link" aria-label="Direct link to Job Scheduling" title="Direct link to Job Scheduling">&#x200B;</a></h3>
<ul>
<li>Optimized the execution logic of internal scheduling jobs, decoupling the strong association between start time and immediate execution parameters. Now, tasks can be created with a specified start time or selected for immediate execution, without conflict, enhancing scheduling flexibility. <a href="https://github.com/apache/doris/pull/36805" target="_blank" rel="noopener noreferrer">#36805</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.1#compute-storage-decoupled" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>
<p>Supports dynamic modification of the upper limit for file cache usage. <a href="https://github.com/apache/doris/pull/37484" target="_blank" rel="noopener noreferrer">#37484</a></p>
</li>
<li>
<p>Recycler now supports object storage rate limiting and server-side rate limiting retry functionality. <a href="https://github.com/apache/doris/pull/37663" target="_blank" rel="noopener noreferrer">#37663</a> <a href="https://github.com/apache/doris/pull/37680" target="_blank" rel="noopener noreferrer">#37680</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.1#lakehouse" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Added the session variable <code>serde_dialect</code> to set the output format for complex types. <a href="https://github.com/apache/doris/pull/37039" target="_blank" rel="noopener noreferrer">#37039</a></p>
</li>
<li>
<p>SQL interception now supports external tables.</p>
<ul>
<li>For more information, refer to the documentation on  <a href="https://doris.apache.org/docs/admin-manual/query-admin/sql-interception" target="_blank" rel="noopener noreferrer">SQL Interception</a>.</li>
</ul>
</li>
<li>
<p>Insert overwrite now supports Iceberg tables. <a href="https://github.com/apache/doris/pull/37191" target="_blank" rel="noopener noreferrer">#37191</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.1#asynchronous-materialized-views" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>
<p>Supports partition roll-up and build at the hourly level. <a href="https://github.com/apache/doris/pull/37678" target="_blank" rel="noopener noreferrer">#37678</a></p>
</li>
<li>
<p>Supports atomic replacement of asynchronous materialized view definition statements. <a href="https://github.com/apache/doris/pull/36749" target="_blank" rel="noopener noreferrer">#36749</a></p>
</li>
<li>
<p>Transparent rewriting now supports Insert statements. <a href="https://github.com/apache/doris/pull/38115" target="_blank" rel="noopener noreferrer">#38115</a></p>
</li>
<li>
<p>Transparent rewriting now supports the VARIANT type. <a href="https://github.com/apache/doris/pull/37929" target="_blank" rel="noopener noreferrer">#37929</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-1">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.1#query-execution-1" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>The group concat function now supports DISTINCT and ORDER BY options. <a href="https://github.com/apache/doris/pull/38744" target="_blank" rel="noopener noreferrer">#38744</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.1#semi-structured-data-management" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>The ES Catalog now maps <code>nested</code> or <code>object</code> types in Elasticsearch to the JSON type in Doris. <a href="https://github.com/apache/doris/pull/37101" target="_blank" rel="noopener noreferrer">#37101</a></p>
</li>
<li>
<p>Added the <code>MULTI_MATCH</code> function, which supports matching keywords across multiple fields and can leverage inverted indexes to accelerate searches. <a href="https://github.com/apache/doris/pull/37722" target="_blank" rel="noopener noreferrer">#37722</a></p>
</li>
<li>
<p>Added the <code>explode_json_object</code> function, which can unfold objects in JSON data into multiple rows. <a href="https://github.com/apache/doris/pull/36887" target="_blank" rel="noopener noreferrer">#36887</a></p>
</li>
<li>
<p>Inverted indexes now support memtable advancement, requiring index construction only once during multi-replica writes, reducing CPU consumption and improving performance. <a href="https://github.com/apache/doris/pull/35891" target="_blank" rel="noopener noreferrer">#35891</a></p>
</li>
<li>
<p>Added <code>MATCH_PHRASE</code> support for positive slop, e.g., <code>msg MATCH_PHRASE &apos;a b 2+&apos;</code> can match instances containing words a and b with a slop of no more than two, and a preceding b; regular slop without the final <code>+</code> does not guarantee this order. <a href="https://github.com/apache/doris/pull/36356" target="_blank" rel="noopener noreferrer">#36356</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="https://doris.apache.org/blog/release-note-3.0.1#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>
<p>Added the FE parameter <code>skip_audit_user_list</code>, where user operations specified in this configuration will not be recorded in the audit log. <a href="https://github.com/apache/doris/pull/38310" target="_blank" rel="noopener noreferrer">#38310</a></p>
<ul>
<li>For more information, refer to the documentation on <a href="https://doris.apache.org/docs/admin-manual/audit-plugin/" target="_blank" rel="noopener noreferrer">Audit Plugin</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="improvements">Improvements<a href="https://doris.apache.org/blog/release-note-3.0.1#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-1">Storage<a href="https://doris.apache.org/blog/release-note-3.0.1#storage-1" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<ul>
<li>
<p>Reduced the likelihood of write failures caused by disk balancing within a single BE. <a href="https://github.com/apache/doris/pull/38000" target="_blank" rel="noopener noreferrer">#38000</a></p>
</li>
<li>
<p>Decreased memory consumption by the memtable limiter. <a href="https://github.com/apache/doris/pull/37511" target="_blank" rel="noopener noreferrer">#37511</a></p>
</li>
<li>
<p>Moved old partitions to the FE trash during partition replacement operations. <a href="https://github.com/apache/doris/pull/36361" target="_blank" rel="noopener noreferrer">#36361</a></p>
</li>
<li>
<p>Optimized memory consumption during compaction. <a href="https://github.com/apache/doris/pull/37099" target="_blank" rel="noopener noreferrer">#37099</a></p>
</li>
<li>
<p>Added a session variable to control audit logs for JDBC PreparedStatement, with default setting to not print. <a href="https://github.com/apache/doris/pull/38419" target="_blank" rel="noopener noreferrer">#38419</a></p>
</li>
<li>
<p>Optimized the logic for selecting BEs for group commits. <a href="https://github.com/apache/doris/pull/35558" target="_blank" rel="noopener noreferrer">#35558</a></p>
</li>
<li>
<p>Improved the performance of column updates. <a href="https://github.com/apache/doris/pull/38487" target="_blank" rel="noopener noreferrer">#38487</a></p>
</li>
<li>
<p>Optimized the use of <code>delete bitmap cache</code>. <a href="https://github.com/apache/doris/pull/38761" target="_blank" rel="noopener noreferrer">#38761</a></p>
</li>
<li>
<p>Added a configuration to control query affinity during hot and cold tiering. <a href="https://github.com/apache/doris/pull/37492" target="_blank" rel="noopener noreferrer">#37492</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-1">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.1#compute-storage-decoupled-1" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>
<p>Implemented automatic retries when encountering object storage server rate limiting. <a href="https://github.com/apache/doris/pull/37199" target="_blank" rel="noopener noreferrer">#37199</a></p>
</li>
<li>
<p>Adapted the number of threads for memtable flush in the compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/38789" target="_blank" rel="noopener noreferrer">#38789</a></p>
</li>
<li>
<p>Added Azure as a compile option to support compilation in environments without Azure support.</p>
</li>
<li>
<p>Optimized the observability of object storage access rate limiting. <a href="https://github.com/apache/doris/pull/38294" target="_blank" rel="noopener noreferrer">#38294</a></p>
</li>
<li>
<p>Allowed the file cache TTL queue to perform LRU eviction, enhancing TTL queue usability. <a href="https://github.com/apache/doris/pull/37312" target="_blank" rel="noopener noreferrer">#37312</a></p>
</li>
<li>
<p>Optimized the number of balance writeeditlog IO operations in the storage and compute separation mode. <a href="https://github.com/apache/doris/pull/37787" target="_blank" rel="noopener noreferrer">#37787</a></p>
</li>
<li>
<p>Improved table creation speed in the storage and compute separation mode by sending tablet creation requests in batches. <a href="https://github.com/apache/doris/pull/36786" target="_blank" rel="noopener noreferrer">#36786</a></p>
</li>
<li>
<p>Optimized read failures caused by potential inconsistencies in the local file cache through backoff retries. <a href="https://github.com/apache/doris/pull/38645" target="_blank" rel="noopener noreferrer">#38645</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-1">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.1#lakehouse-1" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Optimized memory statistics for Parquet/ORC format read and write operations. <a href="https://github.com/apache/doris/pull/37234" target="_blank" rel="noopener noreferrer">#37234</a></p>
</li>
<li>
<p>Trino Connector Catalog now supports predicate pushdown. <a href="https://github.com/apache/doris/pull/37874" target="_blank" rel="noopener noreferrer">#37874</a></p>
</li>
<li>
<p>Added a session variable <code>enable_count_push_down_for_external_table</code> to control whether to enable <code>count(*)</code> pushdown optimization for external tables. <a href="https://github.com/apache/doris/pull/37046" target="_blank" rel="noopener noreferrer">#37046</a></p>
</li>
<li>
<p>Optimized the read logic for Hudi snapshot reads, returning an empty set when the snapshot is empty, consistent with Spark behavior. <a href="https://github.com/apache/doris/pull/37702" target="_blank" rel="noopener noreferrer">#37702</a></p>
</li>
<li>
<p>Improved the read performance of partition columns for Hive tables. <a href="https://github.com/apache/doris/pull/37377" target="_blank" rel="noopener noreferrer">#37377</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-1">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.1#asynchronous-materialized-views-1" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>
<p>Improved transparent rewrite plan speed by 20%. <a href="https://github.com/apache/doris/pull/37197" target="_blank" rel="noopener noreferrer">#37197</a></p>
</li>
<li>
<p>Eliminated roll-up during transparent rewrite if the group key satisfies data uniqueness for better nested matching. <a href="https://github.com/apache/doris/pull/38387" target="_blank" rel="noopener noreferrer">#38387</a></p>
</li>
<li>
<p>Transparent rewrite now performs better aggregation elimination to improve the matching success rate of nested materialized views. <a href="https://github.com/apache/doris/pull/36888" target="_blank" rel="noopener noreferrer">#36888</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-compatibility">MySQL Compatibility<a href="https://doris.apache.org/blog/release-note-3.0.1#mysql-compatibility" class="hash-link" aria-label="Direct link to MySQL Compatibility" title="Direct link to MySQL Compatibility">&#x200B;</a></h3>
<ul>
<li>
<p>Now correctly populates the database name, table name, and original name in the MySQL protocol result columns. <a href="https://github.com/apache/doris/pull/38126" target="_blank" rel="noopener noreferrer">#38126</a></p>
</li>
<li>
<p>Supported the hint format <code>/*+ func(value) */</code>. <a href="https://github.com/apache/doris/pull/37720" target="_blank" rel="noopener noreferrer">#37720</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-1">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.1#query-optimizer-1" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Significantly improved the plan speed for complex queries. <a href="https://github.com/apache/doris/pull/38317" target="_blank" rel="noopener noreferrer">#38317</a></p>
</li>
<li>
<p>Adaptively chose whether to perform bucket shuffle based on the number of data buckets to avoid performance degradation in extreme cases. <a href="https://github.com/apache/doris/pull/36784" target="_blank" rel="noopener noreferrer">#36784</a></p>
</li>
<li>
<p>Optimized the cost estimation logic for SEMI / ANTI JOIN. <a href="https://github.com/apache/doris/pull/37951" target="_blank" rel="noopener noreferrer">#37951</a> <a href="https://github.com/apache/doris/pull/37060" target="_blank" rel="noopener noreferrer">#37060</a></p>
</li>
<li>
<p>Supported pushing Limit down to the first stage of aggregation to improve performance. <a href="https://github.com/apache/doris/pull/34853" target="_blank" rel="noopener noreferrer">#34853</a></p>
</li>
<li>
<p>Partition pruning now supports filter conditions containing the <code>date_trunc</code> or <code>date</code> function. <a href="https://github.com/apache/doris/pull/38025" target="_blank" rel="noopener noreferrer">#38025</a> <a href="https://github.com/apache/doris/pull/38743" target="_blank" rel="noopener noreferrer">#38743</a></p>
</li>
<li>
<p>SQL cache now supports query scenarios that include user variables. <a href="https://github.com/apache/doris/pull/37915" target="_blank" rel="noopener noreferrer">#37915</a></p>
</li>
<li>
<p>Optimized error messages for invalid aggregation semantics. <a href="https://github.com/apache/doris/pull/38122" target="_blank" rel="noopener noreferrer">#38122</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-2">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.1#query-execution-2" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>
<p>Adapted AggState compatibility from 2.1 to 3.x and fixed Coredump issues. <a href="https://github.com/apache/doris/pull/37104" target="_blank" rel="noopener noreferrer">#37104</a></p>
</li>
<li>
<p>Refactored the strategy selection for local shuffle without Join. <a href="https://github.com/apache/doris/pull/37282" target="_blank" rel="noopener noreferrer">#37282</a></p>
</li>
<li>
<p>Modified the scanner for internal table queries to be asynchronous to prevent stalling during such queries. <a href="https://github.com/apache/doris/pull/38403" target="_blank" rel="noopener noreferrer">#38403</a></p>
</li>
<li>
<p>Optimized the block merge process during Hash table construction for Join operators. <a href="https://github.com/apache/doris/pull/37471" target="_blank" rel="noopener noreferrer">#37471</a></p>
</li>
<li>
<p>Optimized the duration of lock holding for MultiCast. <a href="https://github.com/apache/doris/pull/37462" target="_blank" rel="noopener noreferrer">#37462</a></p>
</li>
<li>
<p>Optimized gRPC keepAliveTime and added link monitoring to reduce the probability of query failure due to RPC errors. <a href="https://github.com/apache/doris/pull/37304" target="_blank" rel="noopener noreferrer">#37304</a></p>
</li>
<li>
<p>Cleaned up all dirty pages in jemalloc when memory limits were exceeded. <a href="https://github.com/apache/doris/pull/37164" target="_blank" rel="noopener noreferrer">#37164</a></p>
</li>
<li>
<p>Optimized the processing performance of <code>aes_encrypt</code>/<code>decrypt</code> functions for constant types. <a href="https://github.com/apache/doris/pull/37194" target="_blank" rel="noopener noreferrer">#37194</a></p>
</li>
<li>
<p>Optimized the processing performance of the <code>json_extract</code> function for constant data. <a href="https://github.com/apache/doris/pull/36927" target="_blank" rel="noopener noreferrer">#36927</a></p>
</li>
<li>
<p>Optimized the processing performance of the <code>ParseUrl</code> function for constant data. <a href="https://github.com/apache/doris/pull/36882" target="_blank" rel="noopener noreferrer">#36882</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-1">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.1#semi-structured-data-management-1" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>Bitmap indexes now default to using inverted indexes, with <code>enable_create_bitmap_index_as_inverted_index</code> set to true by default. <a href="https://github.com/apache/doris/pull/36692" target="_blank" rel="noopener noreferrer">#36692</a></p>
</li>
<li>
<p>In the compute-storage decoupled mode, DESC can now view sub-columns of VARIANT type. <a href="https://github.com/apache/doris/pull/38143" target="_blank" rel="noopener noreferrer">#38143</a></p>
</li>
<li>
<p>Removed the step of checking file existence during inverted index queries to reduce access latency to remote storage. <a href="https://github.com/apache/doris/pull/36945" target="_blank" rel="noopener noreferrer">#36945</a></p>
</li>
<li>
<p>Complex types ARRAY / MAP / STRUCT now support <code>replace_if_not_null</code> for AGG tables. <a href="https://github.com/apache/doris/pull/38304" target="_blank" rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>Escape characters for JSON data are now supported. <a href="https://github.com/apache/doris/pull/37176" target="_blank" rel="noopener noreferrer">#37176</a> <a href="https://github.com/apache/doris/pull/37251" target="_blank" rel="noopener noreferrer">#37251</a></p>
</li>
<li>
<p>Inverted index queries now behave consistently on MOW tables and DUP tables. <a href="https://github.com/apache/doris/pull/37428" target="_blank" rel="noopener noreferrer">#37428</a></p>
</li>
<li>
<p>Optimized the performance of inverted index acceleration for IN queries. <a href="https://github.com/apache/doris/pull/37395" target="_blank" rel="noopener noreferrer">#37395</a></p>
</li>
<li>
<p>Reduced unnecessary memory allocation during TOPN queries to improve performance. <a href="https://github.com/apache/doris/pull/37429" target="_blank" rel="noopener noreferrer">#37429</a></p>
</li>
<li>
<p>When creating an inverted index with tokenization, the <code>support_phrase</code> option is now automatically enabled to accelerate <code>match_phrase</code> series phrase queries. <a href="https://github.com/apache/doris/pull/37949" target="_blank" rel="noopener noreferrer">#37949</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-1">Other<a href="https://doris.apache.org/blog/release-note-3.0.1#other-1" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>
<p>Audit log now can record SQL types. <a href="https://github.com/apache/doris/pull/37790" target="_blank" rel="noopener noreferrer">#37790</a></p>
</li>
<li>
<p>Added support for <code>information_schema.processlist</code> to show all FE. <a href="https://github.com/apache/doris/pull/38701" target="_blank" rel="noopener noreferrer">#38701</a></p>
</li>
<li>
<p>Cached ranger&apos;s <code>atamask</code> and <code>rowpolicy</code> to accelerate query efficiency. <a href="https://github.com/apache/doris/pull/37723" target="_blank" rel="noopener noreferrer">#37723</a></p>
</li>
<li>
<p>Optimized metadata management in job manager to release locks immediately after modifying metadata, reducing lock holding time. <a href="https://github.com/apache/doris/pull/38162" target="_blank" rel="noopener noreferrer">#38162</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="https://doris.apache.org/blog/release-note-3.0.1#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">&#x200B;</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade">Upgrade<a href="https://doris.apache.org/blog/release-note-3.0.1#upgrade" class="hash-link" aria-label="Direct link to Upgrade" title="Direct link to Upgrade">&#x200B;</a></h3>
<ul>
<li>
<p>Fix the issue where <code>mtmv load</code> fails during upgrade from version 2.1. <a href="https://github.com/apache/doris/pull/38799" target="_blank" rel="noopener noreferrer">#38799</a></p>
</li>
<li>
<p>Resolve the issue where <code>null_type</code> cannot be found during the upgrade to version 2.1. <a href="https://github.com/apache/doris/pull/39373" target="_blank" rel="noopener noreferrer">#39373</a></p>
</li>
<li>
<p>Address the compatibility issue with permission persistence during the upgrade from version 2.1 to 3.0. <a href="https://github.com/apache/doris/pull/39288" target="_blank" rel="noopener noreferrer">#39288</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load">Load<a href="https://doris.apache.org/blog/release-note-3.0.1#load" class="hash-link" aria-label="Direct link to Load" title="Direct link to Load">&#x200B;</a></h3>
<ul>
<li>
<p>Fix the issue where parsing fails when the newline character is surrounded by delimiters in CSV format parsing. <a href="https://github.com/apache/doris/pull/38347" target="_blank" rel="noopener noreferrer">#38347</a></p>
</li>
<li>
<p>Resolve potential exception issues when FE forwards group commit. <a href="https://github.com/apache/doris/pull/38228" target="_blank" rel="noopener noreferrer">#38228</a> <a href="https://github.com/apache/doris/pull/38265" target="_blank" rel="noopener noreferrer">#38265</a></p>
</li>
<li>
<p>Group commit now supports the new optimizer. <a href="https://github.com/apache/doris/pull/37002" target="_blank" rel="noopener noreferrer">#37002</a></p>
</li>
<li>
<p>Fix the issue where group commit reports data errors when JDBC setNull is used. <a href="https://github.com/apache/doris/pull/38262" target="_blank" rel="noopener noreferrer">#38262</a></p>
</li>
<li>
<p>Optimize the retry logic for group commit when encountering <code>delete bitmap lock</code> errors. <a href="https://github.com/apache/doris/pull/37600" target="_blank" rel="noopener noreferrer">#37600</a></p>
</li>
<li>
<p>Resolve the issue where routine load cannot use CSV delimiters and escape characters. <a href="https://github.com/apache/doris/pull/38402" target="_blank" rel="noopener noreferrer">#38402</a></p>
</li>
<li>
<p>Fix the issue where routine load job names with mixed case cannot be displayed. <a href="https://github.com/apache/doris/pull/38523" target="_blank" rel="noopener noreferrer">#38523</a></p>
</li>
<li>
<p>Optimize the logic for actively recovering routine load during FE master-slave switching. <a href="https://github.com/apache/doris/pull/37876" target="_blank" rel="noopener noreferrer">#37876</a></p>
</li>
<li>
<p>Resolve the issue where routine load pauses when all data in Kafka is expired. <a href="https://github.com/apache/doris/pull/37288" target="_blank" rel="noopener noreferrer">#37288</a></p>
</li>
<li>
<p>Fix the issue where <code>show routine load</code> returns empty results. <a href="https://github.com/apache/doris/pull/38199" target="_blank" rel="noopener noreferrer">#38199</a></p>
</li>
<li>
<p>Resolve the memory leak issue during multi-table stream import in routine load. <a href="https://github.com/apache/doris/pull/38255" target="_blank" rel="noopener noreferrer">#38255</a></p>
</li>
<li>
<p>Fix the issue where stream load does not return the error URL. <a href="https://github.com/apache/doris/pull/38325" target="_blank" rel="noopener noreferrer">#38325</a></p>
</li>
<li>
<p>Resolve potential load channel leak issues. <a href="https://github.com/apache/doris/pull/38031" target="_blank" rel="noopener noreferrer">#38031</a> <a href="https://github.com/apache/doris/pull/37500" target="_blank" rel="noopener noreferrer">#37500</a></p>
</li>
<li>
<p>Fix the issue where no error may be reported when importing fewer segments than expected. <a href="https://github.com/apache/doris/pull/36753" target="_blank" rel="noopener noreferrer">#36753</a></p>
</li>
<li>
<p>Resolve the load stream leak issue. <a href="https://github.com/apache/doris/pull/38912" target="_blank" rel="noopener noreferrer">#38912</a></p>
</li>
<li>
<p>Optimize the impact of offline nodes on import operations. <a href="https://github.com/apache/doris/pull/38198" target="_blank" rel="noopener noreferrer">#38198</a></p>
</li>
<li>
<p>Fix the issue where transactions do not end when inserting into empty data. <a href="https://github.com/apache/doris/pull/38991" target="_blank" rel="noopener noreferrer">#38991</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-2">Storage<a href="https://doris.apache.org/blog/release-note-3.0.1#storage-2" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage">&#x200B;</a></h3>
<p><strong>01 Backup and Restoration</strong></p>
<ul>
<li>
<p>Fix the issue where tables cannot be written after backup and restoration. <a href="https://github.com/apache/doris/pull/37089" target="_blank" rel="noopener noreferrer">#37089</a></p>
</li>
<li>
<p>Resolve the issue where view database names are incorrect after backup and restoration. <a href="https://github.com/apache/doris/pull/37412" target="_blank" rel="noopener noreferrer">#37412</a></p>
</li>
</ul>
<p><strong>02 Compaction</strong></p>
<ul>
<li>
<p>Fix the issue where cumu compaction handles delete errors incorrectly during ordered data compression. <a href="https://github.com/apache/doris/pull/38742" target="_blank" rel="noopener noreferrer">#38742</a></p>
</li>
<li>
<p>Resolve the issue of duplicate keys in aggregate tables caused by sequential compression optimization. <a href="https://github.com/apache/doris/pull/38224" target="_blank" rel="noopener noreferrer">#38224</a></p>
</li>
<li>
<p>Fix the issue where compression operations cause coredump in large wide tables. <a href="https://github.com/apache/doris/pull/37960" target="_blank" rel="noopener noreferrer">#37960</a></p>
</li>
<li>
<p>Resolve the compression starvation issue caused by inaccurate concurrent statistics of compression tasks. <a href="https://github.com/apache/doris/pull/37318" target="_blank" rel="noopener noreferrer">#37318</a></p>
</li>
</ul>
<p><strong>03 MOW Unique Key</strong></p>
<ul>
<li>
<p>Resolve the issue of inconsistent data between replicas caused by cumulative compression deletion of delete sign. <a href="https://github.com/apache/doris/pull/37950" target="_blank" rel="noopener noreferrer">#37950</a></p>
</li>
<li>
<p>MOW delete now uses partial column updates with the new optimizer. <a href="https://github.com/apache/doris/pull/38751" target="_blank" rel="noopener noreferrer">#38751</a></p>
</li>
<li>
<p>Fix the potential duplicate key issue in MOW tables under compute-storage decoupled. <a href="https://github.com/apache/doris/pull/39018" target="_blank" rel="noopener noreferrer">#39018</a></p>
</li>
<li>
<p>Resolve the issue where MOW unique and duplicate tables cannot modify column order. <a href="https://github.com/apache/doris/pull/37067" target="_blank" rel="noopener noreferrer">#37067</a></p>
</li>
<li>
<p>Fix the potential data correctness issue caused by segcompaction. <a href="https://github.com/apache/doris/pull/37760" target="_blank" rel="noopener noreferrer">#37760</a></p>
</li>
<li>
<p>Resolve the potential memory leak issue during column updates. <a href="https://github.com/apache/doris/pull/37706" target="_blank" rel="noopener noreferrer">#37706</a></p>
</li>
</ul>
<p><strong>04 Other</strong></p>
<ul>
<li>
<p>Fix the small probability of exceptions in TOPN queries. <a href="https://github.com/apache/doris/pull/39119" target="_blank" rel="noopener noreferrer">#39119</a> <a href="https://github.com/apache/doris/pull/39199" target="_blank" rel="noopener noreferrer">#39199</a></p>
</li>
<li>
<p>Resolve the issue where auto-increment IDs may duplicate during FE restart. <a href="https://github.com/apache/doris/pull/37306" target="_blank" rel="noopener noreferrer">#37306</a></p>
</li>
<li>
<p>Fix the potential queuing issue in the delete operation priority queue. <a href="https://github.com/apache/doris/pull/37169" target="_blank" rel="noopener noreferrer">#37169</a></p>
</li>
<li>
<p>Optimize the delete retry logic. <a href="https://github.com/apache/doris/pull/37363" target="_blank" rel="noopener noreferrer">#37363</a></p>
</li>
<li>
<p>Resolve the issue with <code>bucket = 0</code> in table creation statements under the new optimizer. <a href="https://github.com/apache/doris/pull/38971" target="_blank" rel="noopener noreferrer">#38971</a></p>
</li>
<li>
<p>Fix the issue where FE reports success incorrectly when image generation fails. <a href="https://github.com/apache/doris/pull/37508" target="_blank" rel="noopener noreferrer">#37508</a></p>
</li>
<li>
<p>Resolve the issue where using the wrong nodename during FE offline nodes may cause inconsistent FE members. <a href="https://github.com/apache/doris/pull/37987" target="_blank" rel="noopener noreferrer">#37987</a></p>
</li>
<li>
<p>Fix the issue where CCR partition addition may fail. <a href="https://github.com/apache/doris/pull/37295" target="_blank" rel="noopener noreferrer">#37295</a></p>
</li>
<li>
<p>Resolve the <code>int32</code> overflow issue in inverted index files. <a href="https://github.com/apache/doris/pull/38891" target="_blank" rel="noopener noreferrer">#38891</a></p>
</li>
<li>
<p>Fix the issue where TRUNCATE TABLE failure may cause BE to fail to go offline. <a href="https://github.com/apache/doris/pull/37334" target="_blank" rel="noopener noreferrer">#37334</a></p>
</li>
<li>
<p>Resolve the issue where publish cannot continue due to null pointers. <a href="https://github.com/apache/doris/pull/37724" target="_blank" rel="noopener noreferrer">#37724</a> <a href="https://github.com/apache/doris/pull/37531" target="_blank" rel="noopener noreferrer">#37531</a></p>
</li>
<li>
<p>Fix the potential coredump issue when manually triggering disk migration. <a href="https://github.com/apache/doris/pull/37712" target="_blank" rel="noopener noreferrer">#37712</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-decoupled-2">Compute-Storage Decoupled<a href="https://doris.apache.org/blog/release-note-3.0.1#compute-storage-decoupled-2" class="hash-link" aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the issue where <code>show create table</code> might display the <code>file_cache_ttl_seconds</code> attribute twice. <a href="https://github.com/apache/doris/pull/38052" target="_blank" rel="noopener noreferrer">#38052</a></p>
</li>
<li>
<p>Fixed the issue where segment Footer TTL was not set correctly after setting file cache TTL. <a href="https://github.com/apache/doris/pull/37485" target="_blank" rel="noopener noreferrer">#37485</a></p>
</li>
<li>
<p>Fixed the issue where file cache might cause coredump due to massive conversion of cache types. <a href="https://github.com/apache/doris/pull/38518" target="_blank" rel="noopener noreferrer">#38518</a></p>
</li>
<li>
<p>Fixed the potential file descriptor (fd) leak in file cache. <a href="https://github.com/apache/doris/pull/38051" target="_blank" rel="noopener noreferrer">#38051</a></p>
</li>
<li>
<p>Fixed the issue where schema change Job overwriting compaction Job prevented base tablet compaction from completing normally. <a href="https://github.com/apache/doris/pull/38210" target="_blank" rel="noopener noreferrer">#38210</a></p>
</li>
<li>
<p>Fixed the potential inaccuracy of base compaction score due to data race. <a href="https://github.com/apache/doris/pull/38006" target="_blank" rel="noopener noreferrer">#38006</a></p>
</li>
<li>
<p>Fixed the issue where error messages from imports might not be uploaded correctly to object storage. <a href="https://github.com/apache/doris/pull/38359" target="_blank" rel="noopener noreferrer">#38359</a></p>
</li>
<li>
<p>Fixed the inconsistency in return information between compute-storage decoupled mode and storage and compute integration mode for 2PC imports. <a href="https://github.com/apache/doris/pull/38076" target="_blank" rel="noopener noreferrer">#38076</a></p>
</li>
<li>
<p>Fix the issue where incorrect file size setting during file cache warm-up leads to coredump. <a href="https://github.com/apache/doris/pull/38939" target="_blank" rel="noopener noreferrer">#38939</a></p>
</li>
<li>
<p>Fixed the issue where partial column updates did not correctly dequeue delete operations. <a href="https://github.com/apache/doris/pull/37151" target="_blank" rel="noopener noreferrer">#37151</a></p>
</li>
<li>
<p>Fixed compatibility issues with permission persistence in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/38136" target="_blank" rel="noopener noreferrer">#38136</a> <a href="https://github.com/apache/doris/pull/37708" target="_blank" rel="noopener noreferrer">#37708</a></p>
</li>
<li>
<p>Fixed the issue where observer did not retry correctly when encountering a <code>-230</code> error. <a href="https://github.com/apache/doris/pull/37625" target="_blank" rel="noopener noreferrer">#37625</a></p>
</li>
<li>
<p>Fixed the issue where <code>show load</code> with conditions did not perform correct analysis. <a href="https://github.com/apache/doris/pull/37656" target="_blank" rel="noopener noreferrer">#37656</a></p>
</li>
<li>
<p>Fixed the issue where <code>show streamload</code> in compute-storage decoupled mode caused BE coredump. <a href="https://github.com/apache/doris/pull/37903" target="_blank" rel="noopener noreferrer">#37903</a></p>
</li>
<li>
<p>Fixed the issue where <code>copy into</code> did not correctly verify column names in strict mode. <a href="https://github.com/apache/doris/pull/37650" target="_blank" rel="noopener noreferrer">#37650</a></p>
</li>
<li>
<p>Fixed the issue where multi-stream imports into a single table lacked permissions. <a href="https://github.com/apache/doris/pull/38878" target="_blank" rel="noopener noreferrer">#38878</a></p>
</li>
<li>
<p>Fixed the potential overflow issue in <code>getVersionUpdateTimeMs</code>. <a href="https://github.com/apache/doris/pull/38074" target="_blank" rel="noopener noreferrer">#38074</a></p>
</li>
<li>
<p>Fixed the issue where FE azure blob list was not implemented correctly. <a href="https://github.com/apache/doris/pull/37986" target="_blank" rel="noopener noreferrer">#37986</a></p>
</li>
<li>
<p>Fixed the issue where inaccurate azure blob recycling time calculation prevented recycling. <a href="https://github.com/apache/doris/pull/37535" target="_blank" rel="noopener noreferrer">#37535</a></p>
</li>
<li>
<p>Fixed the issue where inverted index files were not deleted in compute-storage decoupled mode. <a href="https://github.com/apache/doris/pull/38306" target="_blank" rel="noopener noreferrer">#38306</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lakehouse-2">Lakehouse<a href="https://doris.apache.org/blog/release-note-3.0.1#lakehouse-2" class="hash-link" aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the issue with reading binary data from Oracle Catalog. <a href="https://github.com/apache/doris/pull/37078" target="_blank" rel="noopener noreferrer">#37078</a></p>
</li>
<li>
<p>Fixed the potential deadlock issue when acquiring external table metadata in multi-FE scenarios. <a href="https://github.com/apache/doris/pull/37756" target="_blank" rel="noopener noreferrer">#37756</a></p>
</li>
<li>
<p>Fixed the issue where JNI scanner failure caused BE nodes to crash. <a href="https://github.com/apache/doris/pull/37697" target="_blank" rel="noopener noreferrer">#37697</a></p>
</li>
<li>
<p>Fixed the issue with slow reading of date types from Trino Connector Catalog. <a href="https://github.com/apache/doris/pull/37266" target="_blank" rel="noopener noreferrer">#37266</a></p>
</li>
<li>
<p>Optimized kerberos authentication logic for Hive Catalog. <a href="https://github.com/apache/doris/pull/37301" target="_blank" rel="noopener noreferrer">#37301</a></p>
</li>
<li>
<p>Fixed the issue where region attributes might be parsed incorrectly when parsing MinIO properties. <a href="https://github.com/apache/doris/pull/37249" target="_blank" rel="noopener noreferrer">#37249</a></p>
</li>
<li>
<p>Fixed the issue where creating too many FileSystems by FE caused memory leaks. <a href="https://github.com/apache/doris/pull/36954" target="_blank" rel="noopener noreferrer">#36954</a></p>
</li>
<li>
<p>Fixed the issue with reading incorrect time zone information from Paimon. <a href="https://github.com/apache/doris/pull/37716" target="_blank" rel="noopener noreferrer">#37716</a></p>
</li>
<li>
<p>Fixed the potential thread leak issue caused by Hive write-back operations. <a href="https://github.com/apache/doris/pull/36990" target="_blank" rel="noopener noreferrer">#36990</a></p>
</li>
<li>
<p>Fixed the null pointer issue caused by enabling Hive metastore event synchronization. <a href="https://github.com/apache/doris/pull/38421" target="_blank" rel="noopener noreferrer">#38421</a></p>
</li>
<li>
<p>Fixed the issue where error messages were unclear or caused stalling when creating catalogs. <a href="https://github.com/apache/doris/pull/37551" target="_blank" rel="noopener noreferrer">#37551</a></p>
</li>
<li>
<p>Fixed the issue where reading Hive text format tables behaved differently from Hive. <a href="https://github.com/apache/doris/pull/37638" target="_blank" rel="noopener noreferrer">#37638</a></p>
</li>
<li>
<p>Fixed the logic error when switching between catalogs and databases. <a href="https://github.com/apache/doris/pull/37828" target="_blank" rel="noopener noreferrer">#37828</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-compatibility-1">MySQL Compatibility<a href="https://doris.apache.org/blog/release-note-3.0.1#mysql-compatibility-1" class="hash-link" aria-label="Direct link to MySQL Compatibility" title="Direct link to MySQL Compatibility">&#x200B;</a></h3>
<ul>
<li>Fixed the issue where certain flags in the MySQL protocol were set incorrectly when SSL was enabled. <a href="https://github.com/apache/doris/pull/38086" target="_blank" rel="noopener noreferrer">#38086</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-materialized-views-2">Asynchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.1#asynchronous-materialized-views-2" class="hash-link" aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the issue where construction might fail when the base table had a very large number of partitions. <a href="https://github.com/apache/doris/pull/37589" target="_blank" rel="noopener noreferrer">#37589</a></p>
</li>
<li>
<p>Fixed the issue where nested materialized views incorrectly performed full table refreshes even when partition refreshes were possible. <a href="https://github.com/apache/doris/pull/38698" target="_blank" rel="noopener noreferrer">#38698</a></p>
</li>
<li>
<p>Fixed the issue where partition refresh could not handle the simultaneous existence of valid and invalid dependencies when analyzing partition dependencies. <a href="https://github.com/apache/doris/pull/38367" target="_blank" rel="noopener noreferrer">#38367</a></p>
</li>
<li>
<p>Fixed the issue where the final result containing NULL type might cause asynchronous materialized views to fail. <a href="https://github.com/apache/doris/pull/37019" target="_blank" rel="noopener noreferrer">#37019</a></p>
</li>
<li>
<p>Fixed the planning error that might occur during transparent rewriting when both synchronous and asynchronous materialized views with the same name were present. <a href="https://github.com/apache/doris/pull/37311" target="_blank" rel="noopener noreferrer">#37311</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-materialized-views">Synchronous Materialized Views<a href="https://doris.apache.org/blog/release-note-3.0.1#synchronous-materialized-views" class="hash-link" aria-label="Direct link to Synchronous Materialized Views" title="Direct link to Synchronous Materialized Views">&#x200B;</a></h3>
<ul>
<li>
<p>The rewritten synchronous materialized views now can correctly perform partition pruning. <a href="https://github.com/apache/doris/pull/38527" target="_blank" rel="noopener noreferrer">#38527</a></p>
</li>
<li>
<p>When rewriting synchronous materialized views, those with unready data are no longer selected. <a href="https://github.com/apache/doris/pull/38148" target="_blank" rel="noopener noreferrer">#38148</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-optimizer-2">Query Optimizer<a href="https://doris.apache.org/blog/release-note-3.0.1#query-optimizer-2" class="hash-link" aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed the deadlock issue that might occur when queries and delete operations are performed simultaneously. <a href="https://github.com/apache/doris/pull/38660" target="_blank" rel="noopener noreferrer">#38660</a></p>
</li>
<li>
<p>Fixed the issue where bucket pruning might incorrectly prune on decimal column buckets. <a href="https://github.com/apache/doris/pull/37889" target="_blank" rel="noopener noreferrer">#37889</a></p>
</li>
<li>
<p>Fixed the issue where planning might be incorrect when mark join participates in join reorder. <a href="https://github.com/apache/doris/pull/39152" target="_blank" rel="noopener noreferrer">#39152</a></p>
</li>
<li>
<p>Fixed the issue where the result is incorrect when the correlation condition of a correlated subquery is not a simple column. <a href="https://github.com/apache/doris/pull/37644" target="_blank" rel="noopener noreferrer">#37644</a></p>
</li>
<li>
<p>Fixed the issue where partition pruning cannot correctly handle or expressions. <a href="https://github.com/apache/doris/pull/38897" target="_blank" rel="noopener noreferrer">#38897</a></p>
</li>
<li>
<p>Fixed the planning error that might occur when optimizing the execution order of JOIN and AGG. <a href="https://github.com/apache/doris/pull/37343" target="_blank" rel="noopener noreferrer">#37343</a></p>
</li>
<li>
<p>Fixed the issue where <code>str_to_date</code> performs incorrect constant folding calculations on datev1 types. <a href="https://github.com/apache/doris/pull/37360" target="_blank" rel="noopener noreferrer">#37360</a></p>
</li>
<li>
<p>Fixed the issue where the ACOS function&apos;s constant folding returns non-NaN values. <a href="https://github.com/apache/doris/pull/37932" target="_blank" rel="noopener noreferrer">#37932</a></p>
</li>
<li>
<p>Fixed the occasional planning error: &quot;The children format needs to be [WhenClause+, DefaultValue?]&quot;. <a href="https://github.com/apache/doris/pull/38491" target="_blank" rel="noopener noreferrer">#38491</a></p>
</li>
<li>
<p>Fixed the issue where planning might be incorrect when the projection includes window functions and there is both the original column and its alias. <a href="https://github.com/apache/doris/pull/38166" target="_blank" rel="noopener noreferrer">#38166</a></p>
</li>
<li>
<p>Fixed the issue where planning might report an error when the aggregation parameter contains a lambda expression. <a href="https://github.com/apache/doris/pull/37109" target="_blank" rel="noopener noreferrer">#37109</a></p>
</li>
<li>
<p>Fixed the insert error that might occur in extreme cases: &quot;MultiCastDataSink cannot be cast to DataStreamSink&quot;. <a href="https://github.com/apache/doris/pull/38526" target="_blank" rel="noopener noreferrer">#38526</a></p>
</li>
<li>
<p>Fixed the issue where the new optimizer does not correctly handle <code>char(0)/varchar(0)</code> when creating a table. <a href="https://github.com/apache/doris/pull/38427" target="_blank" rel="noopener noreferrer">#38427</a></p>
</li>
<li>
<p>Fixed the incorrect behavior of <code>char(255) toSql</code>. <a href="https://github.com/apache/doris/pull/37340" target="_blank" rel="noopener noreferrer">#37340</a></p>
</li>
<li>
<p>Fixed the issue where the nullable attribute within the <code>agg_state</code> type might lead to planning errors. <a href="https://github.com/apache/doris/pull/37489" target="_blank" rel="noopener noreferrer">#37489</a></p>
</li>
<li>
<p>Fixed the issue where row count statistics are inaccurate during mark Join. <a href="https://github.com/apache/doris/pull/38270" target="_blank" rel="noopener noreferrer">#38270</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-execution-3">Query Execution<a href="https://doris.apache.org/blog/release-note-3.0.1#query-execution-3" class="hash-link" aria-label="Direct link to Query Execution" title="Direct link to Query Execution">&#x200B;</a></h3>
<ul>
<li>
<p>Fixed issues where the Pipeline execution engine was stuck, causing queries to not end, in multiple scenarios. <a href="https://github.com/apache/doris/pull/38657" target="_blank" rel="noopener noreferrer">#38657</a>, <a href="https://github.com/apache/doris/pull/38206" target="_blank" rel="noopener noreferrer">#38206</a>, <a href="https://github.com/apache/doris/pull/38885" target="_blank" rel="noopener noreferrer">#38885</a>, <a href="https://github.com/apache/doris/pull/38151" target="_blank" rel="noopener noreferrer">#38151</a>, <a href="https://github.com/apache/doris/pull/37297" target="_blank" rel="noopener noreferrer">#37297</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by NULL and non-NULL columns during set difference calculations. <a href="https://github.com/apache/doris/pull/38750" target="_blank" rel="noopener noreferrer">#38750</a></p>
</li>
<li>
<p>Fixed the error when using the DECIMAL type with pure decimals in delete statements. <a href="https://github.com/apache/doris/pull/37801" target="_blank" rel="noopener noreferrer">#37801</a></p>
</li>
<li>
<p>Fixed the issue where the <code>width_bucket</code> function returned incorrect results. <a href="https://github.com/apache/doris/pull/37892" target="_blank" rel="noopener noreferrer">#37892</a></p>
</li>
<li>
<p>Fixed the query error when a single row of data was very large and the result set was also large (exceeding 2GB). <a href="https://github.com/apache/doris/pull/37990" target="_blank" rel="noopener noreferrer">#37990</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by incorrect release of rpc connections during single-replica imports. <a href="https://github.com/apache/doris/pull/38087" target="_blank" rel="noopener noreferrer">#38087</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by processing NULL values with the <code>foreach</code> function. <a href="https://github.com/apache/doris/pull/37349" target="_blank" rel="noopener noreferrer">#37349</a></p>
</li>
<li>
<p>Fixed the issue where stddev returned incorrect results for DECIMALV2 types. <a href="https://github.com/apache/doris/pull/38731" target="_blank" rel="noopener noreferrer">#38731</a></p>
</li>
<li>
<p>Fixed the slow performance of <code>bitmap union</code> calculations. <a href="https://github.com/apache/doris/pull/37816" target="_blank" rel="noopener noreferrer">#37816</a></p>
</li>
<li>
<p>Fixed the issue where RowsProduced for aggregation operators was not set in the profile. <a href="https://github.com/apache/doris/pull/38271" target="_blank" rel="noopener noreferrer">#38271</a></p>
</li>
<li>
<p>Fixed the overflow issue when calculating the number of buckets for the hash table under hash join. <a href="https://github.com/apache/doris/pull/37193" target="_blank" rel="noopener noreferrer">#37193</a>, <a href="https://github.com/apache/doris/pull/37493" target="_blank" rel="noopener noreferrer">#37493</a></p>
</li>
<li>
<p>Fixed the inaccurate recording of the <code>jemalloc cache memory tracker</code>. <a href="https://github.com/apache/doris/pull/37464" target="_blank" rel="noopener noreferrer">#37464</a></p>
</li>
<li>
<p>Added the <code>enable_stacktrace</code> configuration option, allowing users to control whether exception stacks are output in BE logs. <a href="https://github.com/apache/doris/pull/37713" target="_blank" rel="noopener noreferrer">#37713</a></p>
</li>
<li>
<p>Fixed the issue where Arrow Flight SQL did not work correctly when <code>enable_parallel_result_sink</code> was set to false. <a href="https://github.com/apache/doris/pull/37779" target="_blank" rel="noopener noreferrer">#37779</a></p>
</li>
<li>
<p>Fixed the incorrect use of colocate Join. <a href="https://github.com/apache/doris/pull/37361" target="_blank" rel="noopener noreferrer">#37361</a>, <a href="https://github.com/apache/doris/pull/37729" target="_blank" rel="noopener noreferrer">#37729</a></p>
</li>
<li>
<p>Fixed the calculation overflow issue of the <code>round</code> function on DECIMAL128 types. <a href="https://github.com/apache/doris/pull/37733" target="_blank" rel="noopener noreferrer">#37733</a>, <a href="https://github.com/apache/doris/pull/38106" target="_blank" rel="noopener noreferrer">#38106</a></p>
</li>
<li>
<p>Fixed the coredump issue when passing a const string to the <code>sleep</code> function. <a href="https://github.com/apache/doris/pull/37681" target="_blank" rel="noopener noreferrer">#37681</a></p>
</li>
<li>
<p>Increased the queue length for audit logs, solving the issue where audit logs could not be recorded normally under high concurrency scenarios with thousands of concurrent connections. <a href="https://github.com/apache/doris/pull/37786" target="_blank" rel="noopener noreferrer">#37786</a></p>
</li>
<li>
<p>Fixed the issue where creating a workload group caused too many threads, leading to BE coredump. <a href="https://github.com/apache/doris/pull/38096" target="_blank" rel="noopener noreferrer">#38096</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>MULTI_MATCH_ANY</code> function. <a href="https://github.com/apache/doris/pull/37959" target="_blank" rel="noopener noreferrer">#37959</a></p>
</li>
<li>
<p>Fixed the transaction rollback issue caused by <code>insert overwrite auto partition</code>. <a href="https://github.com/apache/doris/pull/38103" target="_blank" rel="noopener noreferrer">#38103</a></p>
</li>
<li>
<p>Fixed the issue where the TimeUtils formatter did not use the correct time zone. <a href="https://github.com/apache/doris/pull/37465" target="_blank" rel="noopener noreferrer">#37465</a></p>
</li>
<li>
<p>Fixed the issue where results were incorrect under constant folding scenarios for week/yearweek. <a href="https://github.com/apache/doris/pull/37376" target="_blank" rel="noopener noreferrer">#37376</a></p>
</li>
<li>
<p>Fixed the issue where the <code>convert_tz</code> function returned incorrect results. <a href="https://github.com/apache/doris/pull/37358" target="_blank" rel="noopener noreferrer">#37358</a>, <a href="https://github.com/apache/doris/pull/38764" target="_blank" rel="noopener noreferrer">#38764</a></p>
</li>
<li>
<p>Fixed the coredump issue when using the <code>collect_set</code> function with window functions. <a href="https://github.com/apache/doris/pull/38234" target="_blank" rel="noopener noreferrer">#38234</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by <code>percentile_approx</code> during rolling upgrades. <a href="https://github.com/apache/doris/pull/39321" target="_blank" rel="noopener noreferrer">#39321</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>mod</code> function when encountering abnormal input. <a href="https://github.com/apache/doris/pull/37999" target="_blank" rel="noopener noreferrer">#37999</a></p>
</li>
<li>
<p>Fixed the issue where the hash table was not fully built when the broadcast join probe started running. <a href="https://github.com/apache/doris/pull/37643" target="_blank" rel="noopener noreferrer">#37643</a></p>
</li>
<li>
<p>Fixed the issue where executing the same expression in multithreaded environments might lead to incorrect results for Java UDFs. <a href="https://github.com/apache/doris/pull/38612" target="_blank" rel="noopener noreferrer">#38612</a></p>
</li>
<li>
<p>Fixed the overflow issue caused by incorrect return types of the <code>conv</code> function. <a href="https://github.com/apache/doris/pull/38001" target="_blank" rel="noopener noreferrer">#38001</a></p>
</li>
<li>
<p>Fixed the issue where the <code>json_replace</code> function returned incorrect types. <a href="https://github.com/apache/doris/pull/37014" target="_blank" rel="noopener noreferrer">#3701</a></p>
</li>
<li>
<p>Fixed the issue where the nullable attribute setting was unreasonable for the <code>percentile</code> aggregation function. <a href="https://github.com/apache/doris/pull/37330" target="_blank" rel="noopener noreferrer">#37330</a></p>
</li>
<li>
<p>Fixed the issue where the results of the <code>histogram</code> function were unstable. <a href="https://github.com/apache/doris/pull/38608" target="_blank" rel="noopener noreferrer">#38608</a></p>
</li>
<li>
<p>Fixed the issue where task state was displayed incorrectly in the profile. <a href="https://github.com/apache/doris/pull/38082" target="_blank" rel="noopener noreferrer">#38082</a></p>
</li>
<li>
<p>Fixed the issue where some queries were incorrectly canceled when the system just started. <a href="https://github.com/apache/doris/pull/37662" target="_blank" rel="noopener noreferrer">#37662</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semi-structured-data-management-2">Semi-Structured Data Management<a href="https://doris.apache.org/blog/release-note-3.0.1#semi-structured-data-management-2" class="hash-link" aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">&#x200B;</a></h3>
<ul>
<li>
<p>Fix some issues with time series compression. <a href="https://github.com/apache/doris/pull/39170" target="_blank" rel="noopener noreferrer">#39170</a> <a href="https://github.com/apache/doris/pull/39176" target="_blank" rel="noopener noreferrer">#39176</a></p>
</li>
<li>
<p>Fix the issue of incorrect index size statistics during compression. <a href="https://github.com/apache/doris/pull/37232" target="_blank" rel="noopener noreferrer">#37232</a></p>
</li>
<li>
<p>Fix the potential incorrect matching of ultra-long strings without tokenization in inverted indexes. <a href="https://github.com/apache/doris/pull/37679" target="_blank" rel="noopener noreferrer">#37679</a> <a href="https://github.com/apache/doris/pull/38218" target="_blank" rel="noopener noreferrer">#38218</a></p>
</li>
<li>
<p>Fix the high memory usage issue of <code>array_range</code> and <code>array_with_const</code> functions when dealing with large data volumes. <a href="https://github.com/apache/doris/pull/38284" target="_blank" rel="noopener noreferrer">#38284</a> <a href="https://github.com/apache/doris/pull/37495" target="_blank" rel="noopener noreferrer">#37495</a></p>
</li>
<li>
<p>Fix the potential coredump issue when selecting columns of ARRAY / MAP / STRUCT types. <a href="https://github.com/apache/doris/pull/37936" target="_blank" rel="noopener noreferrer">#37936</a></p>
</li>
<li>
<p>Fix the import failure issue caused by simdjson parsing errors when specifying jsonpath in Stream Load. <a href="https://github.com/apache/doris/pull/38490" target="_blank" rel="noopener noreferrer">#38490</a></p>
</li>
<li>
<p>Fix the exception handling issue when there are duplicate keys in JSON data. <a href="https://github.com/apache/doris/pull/38146" target="_blank" rel="noopener noreferrer">#38146</a></p>
</li>
<li>
<p>Fix the potential query error after DROP INDEX. <a href="https://github.com/apache/doris/pull/37646" target="_blank" rel="noopener noreferrer">#37646</a></p>
</li>
<li>
<p>Fix the error return issue in row merging checks during index compression. <a href="https://github.com/apache/doris/pull/38732" target="_blank" rel="noopener noreferrer">#38732</a></p>
</li>
<li>
<p>Inverted index v2 format now supports renaming columns. <a href="https://github.com/apache/doris/pull/38079" target="_blank" rel="noopener noreferrer">#38079</a></p>
</li>
<li>
<p>Fix the coredump issue when the <code>MATCH</code> function matches an empty string without an index. <a href="https://github.com/apache/doris/pull/37947" target="_blank" rel="noopener noreferrer">#37947</a></p>
</li>
<li>
<p>Fix the handling of NULL values in inverted indexes. <a href="https://github.com/apache/doris/pull/37921" target="_blank" rel="noopener noreferrer">#37921</a> <a href="https://github.com/apache/doris/pull/37842" target="_blank" rel="noopener noreferrer">#37842</a> <a href="https://github.com/apache/doris/pull/38741" target="_blank" rel="noopener noreferrer">#38741</a></p>
</li>
<li>
<p>Fix the incorrect <code>row_store_page_size</code> after FE restart. <a href="https://github.com/apache/doris/pull/38240" target="_blank" rel="noopener noreferrer">#38240</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-2">Other<a href="https://doris.apache.org/blog/release-note-3.0.1#other-2" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">&#x200B;</a></h3>
<ul>
<li>
<p>Fix the timezone configuration issue. The default timezone is no longer fixed at UTC+8 and is now obtained from system configuration. <a href="https://github.com/apache/doris/pull/37294" target="_blank" rel="noopener noreferrer">#37294</a></p>
</li>
<li>
<p>Fix the class conflict issue when using ranger due to multiple JSR specification implementations. <a href="https://github.com/apache/doris/pull/37575" target="_blank" rel="noopener noreferrer">#37575</a></p>
</li>
<li>
<p>Fix the potential uninitialized field issue in some BE code. <a href="https://github.com/apache/doris/pull/37403" target="_blank" rel="noopener noreferrer">#37403</a></p>
</li>
<li>
<p>Fix the error in delete statements for random distributed tables. <a href="https://github.com/apache/doris/pull/37985" target="_blank" rel="noopener noreferrer">#37985</a></p>
</li>
<li>
<p>Fix the incorrect requirement for <code>alter_priv</code> permission on the base table when creating a synchronized materialized view. <a href="https://github.com/apache/doris/pull/38011" target="_blank" rel="noopener noreferrer">#38011</a></p>
</li>
<li>
<p>Fix the issue of not authenticating resources when used in TVF. <a href="https://github.com/apache/doris/pull/36928" target="_blank" rel="noopener noreferrer">#36928</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="https://doris.apache.org/blog/release-note-3.0.1#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">&#x200B;</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@133tosakarin, @924060929, @AshinGau, @Baymine, @BePPPower, @BiteTheDDDDt, @ByteYue, @CalvinKirs, @Ceng23333, @DarvenDuan, @FreeOnePlus, @Gabriel39, @HappenLee, @JNSimba, @Jibing-Li, @KassieZ, @Lchangliang, @LiBinfeng-01, @Mryange, @SWJTU-ZhangLei, @TangSiyang2001, @Tech-Circle-48, @Vallishp, @Yukang-Lian, @Yulei-Yang, @airborne12, @amorynan, @bobhan1, @cambyzju, @cjj2010, @csun5285, @dataroaring, @deardeng, @eldenmoon, @englefly, @feiniaofeiafei, @felixwluo, @freemandealer, @gavinchou, @ghkang98, @hello-stephen, @hubgeter, @hust-hhb, @jacktengg, @kaijchen, @kaka11chen, @keanji-x, @liaoxin01, @liutang123, @luwei16, @luzhijing, @lxr599, @morningman, @morrySnow, @mrhhsg, @mymeiyi, @platoneko, @qidaye, @qzsee, @seawinde, @shuke987, @sollhui, @starocean999, @suxiaogang223, @w41ter, @wangbo, @wangshuo128, @whutpencil, @wsjz, @wuwenchi, @wyxxxcat, @xiaokang, @xiedeyantu, @xinyiZzz, @xy720, @xzj7019, @yagagagaga, @yiguolei, @yujun777, @z404289981, @zclllyybb, @zddr, @zfr9527, @zhangbutao, @zhangstar333, @zhannngchen, @zhiqiang-hhhh, @zjj, @zy-kkk, @zzzxl1993</p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
        <item>
            <title><![CDATA[Automatic and flexible data sharding: Auto Partition in Apache Doris]]></title>
            <link>https://doris.apache.org/blog/auto-partition-in-apache-doris</link>
            <guid>https://doris.apache.org/blog/auto-partition-in-apache-doris</guid>
            <pubDate>Wed, 14 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache Doris 2.1.0 introduces Auto Partition. It supports partitioning data by RANGE or by LIST and further enhances flexibility on top of automatic partitioning.]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Tech Sharing</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Automatic and flexible data sharding: Auto Partition in Apache Doris</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-08-14T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">August 14, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>To handle large datasets, distributed databases introduce strategies like partitioning and bucketing. Data is divided into smaller units based on specific rules and distributed across different nodes, so databases can perform parallel processing for higher performance and data management flexibility.</p>
<p>Like in many databases, <a href="https://doris.apache.org/" target="_blank" rel="noopener noreferrer">Apache Doris</a> shards data into partitions, and then a partition is further divided into buckets. <strong>Partitions</strong> are typically defined by time or other continuous values. This allows query engines to quickly locate the target data during queries by pruning irrelevant data ranges.</p>
<p><strong>Bucketing</strong>, on the other hand, distributes data based on the hash values of one or more columns, which prevents data skew.</p>
<p>Prior to version <a href="https://doris.apache.org/blog/release-note-2.1.0" target="_blank" rel="noopener noreferrer">2.1.0</a>, there are two way you can create data partitions in Apache Doris:</p>
<ul>
<li>
<p><strong><a href="https://doris.apache.org/docs/table-design/data-partitioning/manual-partitioning" target="_blank" rel="noopener noreferrer">Manual Partition</a></strong>: Users specify the partitions in the table creation statement, or modify them through DDL statements afterwards.</p>
</li>
<li>
<p><strong><a href="https://doris.apache.org/docs/table-design/data-partitioning/dynamic-partitioning" target="_blank" rel="noopener noreferrer">Dynamic Partition</a></strong>: The system automatically maintains partitions within a pre-defined range based on the data ingestion time.</p>
</li>
</ul>
<p>In Apache Doris 2.1.0, we have introduced <strong><a href="https://doris.apache.org/docs/table-design/data-partitioning/auto-partitioning" target="_blank" rel="noopener noreferrer">Auto Partition</a></strong>. It supports partitioning data by RANGE or by LIST and further enhances flexibility on top of automatic partitioning.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="evolution-of-partitioning-strategies-in-doris">Evolution of partitioning strategies in Doris<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#evolution-of-partitioning-strategies-in-doris" class="hash-link" aria-label="Direct link to Evolution of partitioning strategies in Doris" title="Direct link to Evolution of partitioning strategies in Doris">&#x200B;</a></h2>
<p>In the design of data distribution, we focus more on partition planning, because the choice of partition columns and partition intervals heavily depends on the actual data distribution patterns, and a good partition design can largely improve the query and storage efficiency of the table.</p>
<p>In Doris, the data table is divided into partitions and then buckets in a hierarchical manner. The data within the same bucket then forms a data <strong>tablet</strong>, which is the minimum physical storage unit in Doris for data replication, inter-cluster data scheduling, and load balancing.</p>
<p><img decoding="async" loading="lazy" alt="Evolution of partitioning strategies in Doris" src="https://doris.apache.org/assets/images/evolution-of-partitioning-strategies-in-Doris-28ecf81690866d81a59ef418c611a5d4.png" width="1280" height="614" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-partition">Manual Partition<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#manual-partition" class="hash-link" aria-label="Direct link to Manual Partition" title="Direct link to Manual Partition">&#x200B;</a></h3>
<p>Doris allows users to manually create data partitions by RANGE and by LIST.</p>
<p>For time-stamped data like logs and transaction records, users typically create partitions based on the time dimension. Here&apos;s an example of the CREATE TABLE statement:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> example_range_tbl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> LARGEINT </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;User ID&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">date</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data import date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">timestamp</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATETIME</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Data import timestamp&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Location of user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">age</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SMALLINT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Age of user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">sex</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Sex of user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">last_visit_date</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATETIME</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">REPLACE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1970-01-01 00:00:00&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Last visit date of user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">cost</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> SUM </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;User consumption&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">max_dwell_time</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INT</span><span class="token plain"> MAX </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Maximum dwell time of user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">min_dwell_time</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INT</span><span class="token plain"> MIN </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;99999&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Minimum dwell time of user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">OLAP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGGREGATE </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">date</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">timestamp</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">age</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">sex</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">date</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">p201701</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> LESS THAN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2017-02-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">p201702</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> LESS THAN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2017-03-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">p201703</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> LESS THAN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2017-04-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">p2018</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2018-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2019-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>The table is partitioned by the data import date <code>date</code>, and 4 partitions have been pre-created. Within each partition, the data is further divided into 16 buckets based on the hash value of the <code>user_id</code>.</p>
<p>With this partitioning and bucketing design, when querying data from 2018 onwards, the system only need to scan the <code>p2018</code> partition. This is what the query SQL looks like:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> example_range_tbl </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;20180101&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Explain</span><span class="token plain"> String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Nereids Planner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PLAN</span><span class="token plain"> FRAGMENT </span><span class="token number">0</span><span class="token plain">                                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   OUTPUT EXPRS:                                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">     </span><span class="token function" style="color:rgb(80, 250, 123)">count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token comment" style="color:rgb(98, 114, 164)">#11]                                                                    |</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain">: UNPARTITIONED                                                           </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">                                                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">                                                                            </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">                                                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token number">0</span><span class="token plain">:VOlapScanNode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">193</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">                                                               </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain">: test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">example_range_tbl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">example_range_tbl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> PREAGGREGATION: </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">OFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">          </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">      PREDICATES: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token comment" style="color:rgb(98, 114, 164)">#1] &gt;= &apos;2018-01-01&apos;)                                          |</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">      partitions</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p2018</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tablets</span><span class="token operator">=</span><span class="token number">16</span><span class="token operator">/</span><span class="token number">16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tabletList</span><span class="token operator">=</span><span class="token number">561490</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">561492</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">561494</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">      cardinality</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> avgRowSize</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> numNodes</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain">                                       </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">      pushAggOp</span><span class="token operator">=</span><span class="token plain">NONE                                                                  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">                                                                                      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>If the data is distributed unevenly across partitions, the hash-based bucketing mechanism can further divide the data based on the <code>user_id</code>. This helps to avoid load imbalance on some machines during querying and storage.</p>
<p>However, in real-world business scenarios, one cluster may have tens of thousands of tables, which means it is impossible to manage them manually.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">DAILY_TRADE_VALUE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">              datev2 </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade ID&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200001 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-02-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200002 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-02-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-03-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200003 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-03-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-04-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200004 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-04-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-05-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200005 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-05-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-06-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200006 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-06-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-07-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200007 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-07-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-08-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200008 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-08-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-09-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200009 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-09-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-10-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200010 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-10-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-11-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200011 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-11-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-12-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200012 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2000-12-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2001-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> p_200101 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2001-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2001-02-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>In the above example, data is partitioned on a monthly basis. This requires the database administrator (DBA) to manually add a new partition each month and maintain table schema regularly. Imagine the case of real-time data processing, where you might need to create partitions daily or even hourly, manually doing this is no long a choice. That&apos;s why we introduced Dynamic Partition.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-partition">Dynamic Partition<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#dynamic-partition" class="hash-link" aria-label="Direct link to Dynamic Partition" title="Direct link to Dynamic Partition">&#x200B;</a></h3>
<p>By Dynamic Partition, Doris automatically creates and reclaims data partitions as long as the user specifies the partition unit, the number of historical partitions, and the number of future partitions. This functionality relies on a fixed thread on the Doris Frontend. It continuously polls and checks for new partitions to be created or old partitions to be reclaimed, and updates the partition schema of the table.</p>
<p>This is an example CREATE TABLE statement for a table which is partitioned by day. The <code>start</code> and <code>end</code> parameters are set to <code>-7</code> and <code>3</code>, respectively, meaning that data partitions for the next 3 days will be pre-created and the historical partitions that are older than 7 days will be reclaimed.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">DAILY_TRADE_VALUE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">              datev2 </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade ID&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.enable&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.time_unit&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;DAY&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.start&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-7&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.end&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.prefix&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;p&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;dynamic_partition.buckets&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;10&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>Over time, the table will always maintain partitions within the range of <code>[current date - 7, current date + 3]</code>. Dynamic Partition is particularly useful for real-time data ingestion scenarios, such as when the ODS (Operational Data Store) layer directly receives data from external sources like Kafka.</p>
<p>The <code>start</code> and <code>end</code> parameters define a fixed range for the partitions, allowing the user to manage the partitions only within this range. However, if the user needs to include more historical data, they would have to dial up the <code>start</code> value, and that could lead to unnecessary metadata overhead in the cluster.</p>
<p>Therefore, when applying Dynamic Partition, there is a trade-off between the convenience and efficiency of metadata management.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="developers-words">Developers&apos; words<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#developers-words" class="hash-link" aria-label="Direct link to Developers&apos; words" title="Direct link to Developers&apos; words">&#x200B;</a></h2>
<p>As the complexity of business adds up, Dynamic Partition becomes inadequate because:</p>
<ul>
<li>
<p>It only supports partitioning by RANGE but not by LIST.</p>
</li>
<li>
<p>It can only be applied to the current real-world timestamps.</p>
</li>
<li>
<p>It only supports a single continuous partition range, and cannot accommodate partitions outside of that range.</p>
</li>
</ul>
<p>Given these functional limitations, we started to plan a new partitioning mechanism that can both automate partition management and simplify data table maintenance.</p>
<p>We figured out that the ideal partitioning implementation should:</p>
<ul>
<li>
<p>Save the need for manually creating partitions after table creation;</p>
</li>
<li>
<p>Be able to accommodate all ingested data in corresponding partitions.</p>
</li>
</ul>
<p><strong>The former stands for automation and the latter for flexibility. The essence of realizing them both is associating partition creation with the actual data.</strong></p>
<p>Then we started to think about: What if we hold off the creation of partitions until the data is ingested, rather than doing it during table creation or through regular polling. Instead of pre-constructing the partition distribution, we can define the &quot;data-to-partition&quot; mapping rules, so the partitions are created after data arrives.</p>
<p>Compared to Manual Partition, this whole process would be fully automated, eliminating the need for human maintenance. Compared to Dynamic Partition, it avoids having partitions that are not used, or partitions that are needed but not present.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-partition">Auto Partition<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#auto-partition" class="hash-link" aria-label="Direct link to Auto Partition" title="Direct link to Auto Partition">&#x200B;</a></h2>
<p>With <a href="https://doris.apache.org/blog/release-note-2.1.0" target="_blank" rel="noopener noreferrer">Apache Doris 2.1.0</a>, we bring the above plan into fruition. During data ingestion, Doris creates data partitions based on the configured rules. The Doris Backend nodes that are responsible for data processing and distribution will attempt to find the appropriate partition for each row of data in the DataSink operator of the execution plan. It no longer filters out data that does not fit into any existing partition or reports an error for such a situation, but automatically generates partitions for all ingested data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-partition-by-range">Auto Partition by RANGE<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#auto-partition-by-range" class="hash-link" aria-label="Direct link to Auto Partition by RANGE" title="Direct link to Auto Partition by RANGE">&#x200B;</a></h3>
<p>Auto Partition by RANGE provides an optimized partitioning solution based on the time dimension. It is more flexible than Dynamic Partition in terms of parameter configuration. The syntax for it is as follows:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">FUNC_CALL_EXPR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FUNC_CALL_EXPR ::</span><span class="token operator">=</span><span class="token plain"> DATE_TRUNC </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">partition_column</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&lt;interval&gt;&apos;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>The <code>&lt;partition_column&gt;</code> above is the partition column (i.e., the column that the partitioning is based on). <code>&lt;interval&gt;</code>specifies the partition unit, which is the desired width of each partition.</p>
<p>For example, if the partition column is <code>k0</code> and you want to partition by month, the partition statement would be <code>AUTO PARTITION BY RANGE (DATE_TRUNC(k0, &apos;month&apos;))</code>. For all the imported data, the system will call <code>DATE_TRUNC(k0, &apos;month&apos;)</code> to calculate the left endpoint of the partition, and then the right endpoint by adding one <code>interval</code>.</p>
<p>Now, we can apply Auto Partition to the <code>DAILY_TRADE_VALUE</code> table introduced in the previous section on Dynamic Partition.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> DAILY_TRADE_VALUE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">    DATEV2 </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade Date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade ID&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">DATE_TRUNC</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;month&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PROPERTIES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>After importing some data, these are the partitions we get:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> partitions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> DAILY_TRADE_VALUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Empty </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.10</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> DAILY_TRADE_VALUE </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2015-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2020-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-03-05&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-03-06&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10001</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.24</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label_2a7353a3f991400e_ae731988fa2bc568&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;status&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;VISIBLE&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;txnId&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;85097&apos;</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> partitions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> DAILY_TRADE_VALUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> PartitionId </span><span class="token operator">|</span><span class="token plain"> PartitionName   </span><span class="token operator">|</span><span class="token plain"> VisibleVersion </span><span class="token operator">|</span><span class="token plain"> VisibleVersionTime  </span><span class="token operator">|</span><span class="token plain"> State  </span><span class="token operator">|</span><span class="token plain"> PartitionKey </span><span class="token operator">|</span><span class="token plain"> Range                                                                          </span><span class="token operator">|</span><span class="token plain"> DistributionKey </span><span class="token operator">|</span><span class="token plain"> Buckets </span><span class="token operator">|</span><span class="token plain"> ReplicationNum </span><span class="token operator">|</span><span class="token plain"> StorageMedium </span><span class="token operator">|</span><span class="token plain"> CooldownTime        </span><span class="token operator">|</span><span class="token plain"> RemoteStoragePolicy </span><span class="token operator">|</span><span class="token plain"> LastConsistencyCheckTime </span><span class="token operator">|</span><span class="token plain"> DataSize </span><span class="token operator">|</span><span class="token plain"> IsInMemory </span><span class="token operator">|</span><span class="token plain"> ReplicaAllocation       </span><span class="token operator">|</span><span class="token plain"> IsMutable </span><span class="token operator">|</span><span class="token plain"> SyncWithBaseTables </span><span class="token operator">|</span><span class="token plain"> UnsyncTables </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">588395</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p20150101000000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">19</span><span class="token plain">:</span><span class="token number">02</span><span class="token plain">:</span><span class="token number">40</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">588437</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p20200101000000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">19</span><span class="token plain">:</span><span class="token number">02</span><span class="token plain">:</span><span class="token number">40</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">588416</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p20240301000000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">19</span><span class="token plain">:</span><span class="token number">02</span><span class="token plain">:</span><span class="token number">40</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.09</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>As is shown, partitions are automatically created for the imported data, and it doesn&apos;t create partitions that are beyond the range of the existing data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-partition-by-list">Auto Partition by LIST<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#auto-partition-by-list" class="hash-link" aria-label="Direct link to Auto Partition by LIST" title="Direct link to Auto Partition by LIST">&#x200B;</a></h3>
<p>Auto Partition by LIST is to shard data based on non-time-based dimensions, such as <code>region</code> and <code>department</code>. It fills that gap for Dynamic Partition, which does not support data partitioning by LIST.</p>
<p>Auto Partition by RANGE provides an optimized partitioning solution based on the time dimension. It is more flexible than Dynamic Partition in terms of parameter configuration. The syntax for it is as follows:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> LIST </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">partition_col</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>This is an example of Auto Partition by LIST using <code>city</code> as the partition column:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">str_table</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> LIST </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.09</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> str_table </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Denver&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Boston&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Los_Angeles&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.25</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> partitions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> str_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+-------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> PartitionId </span><span class="token operator">|</span><span class="token plain"> PartitionName   </span><span class="token operator">|</span><span class="token plain"> VisibleVersion </span><span class="token operator">|</span><span class="token plain"> VisibleVersionTime  </span><span class="token operator">|</span><span class="token plain"> State  </span><span class="token operator">|</span><span class="token plain"> PartitionKey </span><span class="token operator">|</span><span class="token plain"> Range                                     </span><span class="token operator">|</span><span class="token plain"> DistributionKey </span><span class="token operator">|</span><span class="token plain"> Buckets </span><span class="token operator">|</span><span class="token plain"> ReplicationNum </span><span class="token operator">|</span><span class="token plain"> StorageMedium </span><span class="token operator">|</span><span class="token plain"> CooldownTime        </span><span class="token operator">|</span><span class="token plain"> RemoteStoragePolicy </span><span class="token operator">|</span><span class="token plain"> LastConsistencyCheckTime </span><span class="token operator">|</span><span class="token plain"> DataSize </span><span class="token operator">|</span><span class="token plain"> IsInMemory </span><span class="token operator">|</span><span class="token plain"> ReplicaAllocation       </span><span class="token operator">|</span><span class="token plain"> IsMutable </span><span class="token operator">|</span><span class="token plain"> SyncWithBaseTables </span><span class="token operator">|</span><span class="token plain"> UnsyncTables </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+-------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">589685</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> pDenver7        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain">:</span><span class="token number">12</span><span class="token plain">:</span><span class="token number">37</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> city         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Denver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> city            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">589643</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> pLos5fAngeles11 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain">:</span><span class="token number">12</span><span class="token plain">:</span><span class="token number">37</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> city         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Los_Angeles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> city            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">589664</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> pBoston8        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain">:</span><span class="token number">12</span><span class="token plain">:</span><span class="token number">37</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> city         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Boston</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> city            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+-------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.10</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>After inserting data for the cities of Denver, Boston, and Los Angeles, the system automatically created corresponding partitions based on the city names. Previously, this type of custom partitioning could only be achieved through manual DDL statements. This is how Auto Partition by LIST simplifies database maintenance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tips--notes">Tips &amp; notes<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#tips--notes" class="hash-link" aria-label="Direct link to Tips &amp; notes" title="Direct link to Tips &amp; notes">&#x200B;</a></h3>
<p><strong>Manually adjust historical partitions</strong></p>
<p>For tables that receive both real-time data and occasional historical updates, since Auto Partition does not automatically reclaim historical partitions, we recommend two options:</p>
<ul>
<li>
<p>Use Auto Partition, which will automatically create partitions for the occasional historical data updates.</p>
</li>
<li>
<p>Use Auto Partition and manually create a <code>LESS THAN</code> partition to accommodate the historical updates. This allows for a clearer separation of historical and real-time data, and makes data management easier.</p>
</li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> DAILY_TRADE_VALUE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">    DATEV2 </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade Date&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;Trade ID&apos;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">DATE_TRUNC</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;DAY&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">pHistory</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> LESS THAN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2024-01-01&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> PROPERTIES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.11</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> DAILY_TRADE_VALUE </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2015-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2020-01-01&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-03-05&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;2024-03-06&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10001</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.25</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label_96dc3d20c6974f4a_946bc1a674d24733&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;status&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;VISIBLE&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;txnId&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;85092&apos;</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> partitions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> DAILY_TRADE_VALUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> PartitionId </span><span class="token operator">|</span><span class="token plain"> PartitionName   </span><span class="token operator">|</span><span class="token plain"> VisibleVersion </span><span class="token operator">|</span><span class="token plain"> VisibleVersionTime  </span><span class="token operator">|</span><span class="token plain"> State  </span><span class="token operator">|</span><span class="token plain"> PartitionKey </span><span class="token operator">|</span><span class="token plain"> Range                                                                          </span><span class="token operator">|</span><span class="token plain"> DistributionKey </span><span class="token operator">|</span><span class="token plain"> Buckets </span><span class="token operator">|</span><span class="token plain"> ReplicationNum </span><span class="token operator">|</span><span class="token plain"> StorageMedium </span><span class="token operator">|</span><span class="token plain"> CooldownTime        </span><span class="token operator">|</span><span class="token plain"> RemoteStoragePolicy </span><span class="token operator">|</span><span class="token plain"> LastConsistencyCheckTime </span><span class="token operator">|</span><span class="token plain"> DataSize </span><span class="token operator">|</span><span class="token plain"> IsInMemory </span><span class="token operator">|</span><span class="token plain"> ReplicaAllocation       </span><span class="token operator">|</span><span class="token plain"> IsMutable </span><span class="token operator">|</span><span class="token plain"> SyncWithBaseTables </span><span class="token operator">|</span><span class="token plain"> UnsyncTables </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577871</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> pHistory        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">53</span><span class="token plain">:</span><span class="token number">49</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577940</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p20240305000000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">53</span><span class="token plain">:</span><span class="token number">49</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">05</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">06</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577919</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p20240306000000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">53</span><span class="token plain">:</span><span class="token number">49</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">06</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">DATEV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">07</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TRADE_DATE      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+-----------------+----------------+---------------------+--------+--------------+--------------------------------------------------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.10</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p><strong>NULL partition</strong></p>
<p>With Auto Partition by LIST, Doris supports storing NULL values in NULL partitions. For example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> list_nullable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">str</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> LIST </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">str</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">str</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS auto</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> PROPERTIES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;replication_num&quot;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.10</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> list_nullable </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;123&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.24</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;label_f5489769c2f04f0d_bfb65510f9737fff&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;status&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;VISIBLE&apos;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&apos;txnId&apos;</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">&apos;85089&apos;</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> partitions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> list_nullable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+---------------+----------------+---------------------+--------+--------------+------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> PartitionId </span><span class="token operator">|</span><span class="token plain"> PartitionName </span><span class="token operator">|</span><span class="token plain"> VisibleVersion </span><span class="token operator">|</span><span class="token plain"> VisibleVersionTime  </span><span class="token operator">|</span><span class="token plain"> State  </span><span class="token operator">|</span><span class="token plain"> PartitionKey </span><span class="token operator">|</span><span class="token plain"> Range                              </span><span class="token operator">|</span><span class="token plain"> DistributionKey </span><span class="token operator">|</span><span class="token plain"> Buckets </span><span class="token operator">|</span><span class="token plain"> ReplicationNum </span><span class="token operator">|</span><span class="token plain"> StorageMedium </span><span class="token operator">|</span><span class="token plain"> CooldownTime        </span><span class="token operator">|</span><span class="token plain"> RemoteStoragePolicy </span><span class="token operator">|</span><span class="token plain"> LastConsistencyCheckTime </span><span class="token operator">|</span><span class="token plain"> DataSize </span><span class="token operator">|</span><span class="token plain"> IsInMemory </span><span class="token operator">|</span><span class="token plain"> ReplicaAllocation       </span><span class="token operator">|</span><span class="token plain"> IsMutable </span><span class="token operator">|</span><span class="token plain"> SyncWithBaseTables </span><span class="token operator">|</span><span class="token plain"> UnsyncTables </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+---------------+----------------+---------------------+--------+--------------+------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577297</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> pX            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">19</span><span class="token plain">:</span><span class="token number">21</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> str          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> str             </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577276</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p0            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">19</span><span class="token plain">:</span><span class="token number">21</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> str          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain"> str             </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">577255</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> p1233         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">01</span><span class="token plain"> </span><span class="token number">08</span><span class="token plain">:</span><span class="token number">19</span><span class="token plain">:</span><span class="token number">21</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> NORMAL </span><span class="token operator">|</span><span class="token plain"> str          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">types</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">keys</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">123</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain"> str             </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">              </span><span class="token operator">|</span><span class="token plain"> HDD           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">31</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain">:</span><span class="token number">59</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">location</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain">: </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">         </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------------+---------------+----------------+---------------------+--------+--------------+------------------------------------+-----------------+---------+----------------+---------------+---------------------+---------------------+--------------------------+----------+------------+-------------------------+-----------+--------------------+--------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.11</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg></span></button></div></div></div>
<p>However, Auto Partition by RANGE does not support NULL partitions, because the NULL values will be stored in the smallest <code>LESS THAN</code> partition, and it is impossible to reliably determine the appropriate range for it. If Auto Partition were to create a NULL partition with a range of (-INFINITY, MIN_VALUE), there would be a risk of this partition being inadvertently deleted in production, as the MIN_VALUE boundary may not accurately represent the intended business logic.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">&#x200B;</a></h3>
<p>Auto Partition covers most of the use cases of Dynamic Partition, while introducing the benefit of upfront partition rule definition. Once the rules are defined, the bulk of partition creation work is automatically handled by Doris instead of a DBA.</p>
<p>Before utilizing Auto Partition, it&apos;s important to understand the relevant limitations:</p>
<ol>
<li>
<p>Auto Partition by LIST supports partitioning based on <strong>multiple columns</strong>, but each automatically created partition only contains one single value, and the partition name cannot exceed 50 characters in length. Note that the partition names follow specific naming conventions, which have particular implications for metadata management. That means not all of the 50-character space is at the user&apos;s disposal.</p>
</li>
<li>
<p>Auto Partition by RANGE only supports a <strong>single partition column</strong>, which must be of type <strong>DATE</strong> or <strong>DATETIME</strong>.</p>
</li>
<li>
<p>Auto Partition by LIST supports <strong>NULLABLE</strong> partition column and inserting NULL values. Auto Partition by RANGE does not support NULLABLE partition column.</p>
</li>
<li>
<p>It is not recommended to use Auto Partition in conjunction with Dynamic Partition after Apache Doris 2.1.3.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-comparison">Performance comparison<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#performance-comparison" class="hash-link" aria-label="Direct link to Performance comparison" title="Direct link to Performance comparison">&#x200B;</a></h2>
<p>The main functional differences between Auto Partition and Dynamic Partition lie in partition creation and deletion, supported partition types, and their impact on import performance.</p>
<p>Dynamic Partition uses fixed threads to periodically create and reclaim partitions. It only supports partitioning by RANGE. In contrast, Auto Partition supports both partitioning by RANGE and by LIST. It automatically creates partitions on-demand based on specific rules during data ingestion, providing a higher level of automation and flexibility.</p>
<p>Dynamic Partition does not slow down data ingestion speed, while Auto Partition causes certain time overheads because it firstly checks for existing partitions and then creates new ones on demand. We will present the performance test results.</p>
<p><img decoding="async" loading="lazy" alt="Performance comparison" src="https://doris.apache.org/assets/images/performance-comparison-8d7f8ccd4c4267e74e3af342ada5d6fe.png" width="1280" height="585" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-partition-ingestion-workflow">Auto Partition: ingestion workflow<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#auto-partition-ingestion-workflow" class="hash-link" aria-label="Direct link to Auto Partition: ingestion workflow" title="Direct link to Auto Partition: ingestion workflow">&#x200B;</a></h2>
<p>This part is about how data ingestion is implemented with the Auto Partition mechanism, and we use <a href="https://doris.apache.org/docs/data-operate/import/stream-load-manual" target="_blank" rel="noopener noreferrer">Stream Load</a> as an example. When Doris initiates a data import, one of the Doris Backend nodes takes on the role of the Coordinator. It is responsible for the initial data processing work and then dispatching the data to the appropriate BE nodes, known as the Executors, for execution.</p>
<p><img decoding="async" loading="lazy" alt="Auto Partition: ingestion workflow" src="https://doris.apache.org/assets/images/auto-partition-ingestion-workflow-3343361208ec317008cf169ac91398be.png" width="1280" height="731" class="img_ev3q"></p>
<p>In the final Datasink Node of the Coordinator&apos;s execution pipeline, the data needs to be routed to the correct partitions, buckets, and Doris Backend node locations before it can be successfully transmitted and stored.</p>
<p>To enable this data transfer, the Coordinator and Executor nodes establish a communication channels:</p>
<ul>
<li>
<p>The sending end is called the Node Channel.</p>
</li>
<li>
<p>The receiving end is called the Tablets Channel.</p>
</li>
</ul>
<p>This is how Auto Partition comes into play during the process of determining the correct partitions for the data:</p>
<p><img decoding="async" loading="lazy" alt="Auto Partition: ingestion workflow" src="https://doris.apache.org/assets/images/auto-partition-ingestion-workflow-2-7e25e7fd75a37f9da1de58c0f2c46f11.png" width="1280" height="348" class="img_ev3q"></p>
<p>Previously, without Auto Partition, when a table does not have the required partition, the behavior in Doris is for the BE nodes to accumulate errors until a <code>DATA_QUALITY_ERROR</code> is reported. Now, with Auto Partition enabled, a request will be initiated to the Doris Frontend to create the necessary partition on-the-fly. After the partition creation transaction is completed, the Doris Frontend responds to the Coordinator, which then opens the corresponding communication channels (Node Channel and Tablets Channel) to continue the data ingestion process. This is a seamless experience for users.</p>
<p>In a real-world cluster environment, the time spent by the Coordinator waiting for the Doris Frontend to complete partition creation can incur large overheads. This is due to the inherent latency of Thrift RPC calls, as well as lock contention on the Frontend under high load conditions.</p>
<p>To improve the data ingestion efficiency in Auto Partition, Doris has implemented batching to largely reduce the number of RPC calls made to the FE. This brings a notable performance enhancement for data write operations.</p>
<p>Note that when the FE Master completes the partition creation transaction, the new partition becomes immediately visible. However, if the import process ultimately fails or is canceled, the created partitions are not automatically reclaimed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-partition-performance">Auto Partition performance<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#auto-partition-performance" class="hash-link" aria-label="Direct link to Auto Partition performance" title="Direct link to Auto Partition performance">&#x200B;</a></h2>
<p>We tested the performance and stability of Auto Partition in Doris, covering different use cases:</p>
<p><strong>Case 1</strong>: 1 Frontend + 3 Backend; 6 randomly generated datasets, each having 100 million rows and 2,000 partitions; ingested the 6 datasets concurrently into 6 tables</p>
<ul>
<li>
<p><strong>Objective</strong>: Evaluate the performance of Auto Partition under high pressure and check for any performance degradation.</p>
</li>
<li>
<p><strong>Results</strong>: Auto Partition brings an <strong>average performance loss less than 5%</strong>, with all import transactions running stably.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Auto Partition performance" src="https://doris.apache.org/assets/images/auto-partition-performance-4739a5a3e97dfe4b88cf2d94b0542c14.png" width="1280" height="581" class="img_ev3q"></p>
<p><strong>Case 2</strong>: 1 Frontend + 3 Backend; ingesting 100 rows per second from Flink by Routine Load; testing with 1, 10, and 20 concurrent transactions (tables), respectively</p>
<ul>
<li>
<p><strong>Objective</strong>: Identify any potential  or data backlog issues that could arise with Auto Partition under different concurrency levels.</p>
</li>
<li>
<p><strong>Results</strong>: With or without Auto Partition enabled, the data ingestion was successful without any backpressure issues across all the concurrency levels tested, even at 20 concurrent transactions when the CPU utilization reached close to 100%.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Auto Partition performance" src="https://doris.apache.org/assets/images/auto-partition-performance-2-8a3981c9825d5ca4e6b4e3f5aec38708.png" width="1280" height="557" class="img_ev3q"></p>
<p>To conclude the results of these tests, the impact of enabling Auto Partition on data ingestion performance is minimal.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-and-future-plans">Conclusion and future plans<a href="https://doris.apache.org/blog/auto-partition-in-apache-doris#conclusion-and-future-plans" class="hash-link" aria-label="Direct link to Conclusion and future plans" title="Direct link to Conclusion and future plans">&#x200B;</a></h2>
<p>Auto Partition has simplified DDL and partition management since Apache Doris 2.1.0. It is useful in large-scale data processing and makes it easy for users to migrate from other database systems to Apache Doris.</p>
<p>Moreover, we are committed to expanding the capabilities of Auto Partition to support more complex data types.</p>
<p>Plans for Auto Partition by RANGE:</p>
<ul>
<li>
<p>Support numeric values;</p>
</li>
<li>
<p>Allowing users to specify the left and right boundaries of the partition range.</p>
</li>
</ul>
<p>Plans for Auto Partition by LIST:</p>
<ul>
<li>Allow merging multiple values into the same partition based on specific rules.</li>
</ul>
<p>Join <a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-2gmq5o30h-455W226d79zP3L96ZhXIoQ" target="_blank" rel="noopener noreferrer">Apache Doris open-source community</a> for more information and further guidance.</p></div>]]></content:encoded>
            <category>Tech Sharing</category>
        </item>
        <item>
            <title><![CDATA[Apache Doris version 2.0.14 has been released]]></title>
            <link>https://doris.apache.org/blog/release-note-2.0.14</link>
            <guid>https://doris.apache.org/blog/release-note-2.0.14</guid>
            <pubDate>Wed, 07 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Thanks to our community users and developers, about 110 improvements and bug fixes have been made in Doris 2.0.14 version]]></description>
            <content:encoded><![CDATA[<header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href="https://doris.apache.org/blog">Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class="s-tags"><span class="s-tag">Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop="headline">Apache Doris version 2.0.14 has been released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class="authors"><span class="s-author text-black">Apache Doris</span></span><time datetime="2024-08-07T00:00:00.000Z" itemprop="datePublished" class="text-black ml-4">August 7, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Thanks to our community users and developers, about 110 improvements and bug fixes have been made in Doris 2.0.14 version</p>
<p><a href="https://doris.apache.org/download/" target="_blank" rel="noopener noreferrer">Quick Download</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-new-features">1 New features<a href="https://doris.apache.org/blog/release-note-2.0.14#1-new-features" class="hash-link" aria-label="Direct link to 1 New features" title="Direct link to 1 New features">&#x200B;</a></h2>
<ul>
<li>Adds a REST interface to retrieve the most recent query profile: <code>curl http://user:password@127.0.0.1:8030/api/profile/text</code> <a href="https://github.com/apache/doris/pull/38268" target="_blank" rel="noopener noreferrer">#38268</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-improvements">2 Improvements<a href="https://doris.apache.org/blog/release-note-2.0.14#2-improvements" class="hash-link" aria-label="Direct link to 2 Improvements" title="Direct link to 2 Improvements">&#x200B;</a></h2>
<ul>
<li>
<p>Optimizes the primary key point query performance for MOW tables with sequence columns <a href="https://github.com/apache/doris/pull/38287" target="_blank" rel="noopener noreferrer">#38287</a></p>
</li>
<li>
<p>Enhances the performance of inverted index queries with many conditions  <a href="https://github.com/apache/doris/pull/35346" target="_blank" rel="noopener noreferrer">#35346</a></p>
</li>
<li>
<p>Automatically enables the   <code>support_phrase</code> option when creating a tokenized inverted index to accelerate  <code>match_phrase</code> phrase queries <a href="https://github.com/apache/doris/pull/37949" target="_blank" rel="noopener noreferrer">#37949</a></p>
</li>
<li>
<p>Supports simplified SQL hints, for example: <code>SELECT /*+ query_timeout(3000) */ * FROM t;</code> <a href="https://github.com/apache/doris/pull/37720" target="_blank" rel="noopener noreferrer">#37720</a></p>
</li>
<li>
<p>Automatically retries reading from object storage when encountering a   <code>429</code> error to improve stability <a href="https://github.com/apache/doris/pull/35396" target="_blank" rel="noopener noreferrer">#35396</a></p>
</li>
<li>
<p>LEFT SEMI / ANTI JOIN terminates subsequent matching execution upon matching a qualifying data row to enhance performance. <a href="https://github.com/apache/doris/pull/34703" target="_blank" rel="noopener noreferrer">#34703</a></p>
</li>
<li>
<p>Prevents coredump when returning illegal data to MySQL results. <a href="https://github.com/apache/doris/pull/28069" target="_blank" rel="noopener noreferrer">#28069</a></p>
</li>
<li>
<p>Unifies the output of type names in lowercase to maintain compatibility with MySQL and be more friendly to BI tools. <a href="https://github.com/apache/doris/pull/38521" target="_blank" rel="noopener noreferrer">#38521</a></p>
</li>
</ul>
<p>You can access the full list through the GitHub <a href="https://github.com/apache/doris/compare/2.0.13...2.0.14" target="_blank" rel="noopener noreferrer">link</a> , with the key features and improvements highlighted below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="https://doris.apache.org/blog/release-note-2.0.14#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">&#x200B;</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@ByteYue, @CalvinKirs, @GoGoWen, @HappenLee, @Jibing-Li, @Lchangliang, @LiBinfeng-01, @Mryange, @XieJiann, @Yukang-Lian, @Yulei-Yang, @airborne12, @amorynan, @biohazard4321, @cambyzju, @csun5285, @eldenmoon, @englefly, @freemandealer, @hello-stephen, @hubgeter, @kaijchen, @liaoxin01, @luwei16, @morningman, @morrySnow, @mymeiyi, @qidaye, @sollhui, @starocean999, @w41ter, @wuwenchi, @xiaokang, @xy720, @yujun777, @zclllyybb, @zddr, @zhangstar333, @zhiqiang-hhhh, @zy-kkk, @zzzxl1993</p></div>]]></content:encoded>
            <category>Release Notes</category>
        </item>
    </channel>
</rss>